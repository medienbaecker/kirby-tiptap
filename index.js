(function () {var Ke=this;function Hd(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function ua(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function nh(e,t){const r=ua(t,e.schema),{from:i,to:n}=e.selection;let o=[];e.doc.nodesBetween(i,n,e=>{o=[...o,e]});const s=o.reverse().find(e=>e.type.name===r.name);return s?{...s.attrs}:{}}function Nb(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function Le(e,t){const r=Nb(t,e.schema),{from:i,to:n,empty:o}=e.selection;let s=[];o?s=e.selection.$head.marks():e.doc.nodesBetween(i,n,e=>{s=[...s,...e.marks]});const a=s.find(e=>e.type.name===r.name);return a?{...a.attrs}:{}}function hm(e,t){const r=Hd("string"==typeof t?t:t.name,e.schema);return"node"===r?nh(e,t):"mark"===r?Le(e,t):{}}function Tc(e,t){const r=Object.keys(t);return!r.length||!!r.filter(r=>t[r]===e[r]).length}function vc(e,t,r={}){const{from:i,to:n,empty:o}=e.selection,s=t?ua(t,e.schema):null;let a=[];if(e.doc.nodesBetween(i,n,(e,t)=>{if(!e.isText){const r=Math.max(i,t),o=Math.min(n,t+e.nodeSize);a=[...a,{node:e,from:r,to:o}]}}),o)return!!a.filter(e=>!s||s.name===e.node.type.name).find(e=>Tc(e.node.attrs,r));const $=n-i;return a.filter(e=>!s||s.name===e.node.type.name).filter(e=>Tc(e.node.attrs,r)).reduce((e,t)=>{return e+(t.to-t.from)},0)>=$}function Me(e,t,r={}){const{from:i,to:n,empty:o}=e.selection,s=t?Nb(t,e.schema):null;if(o)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!s||s.name===e.type.name).find(e=>Tc(e.attrs,r));let a=0,$=[];if(e.doc.nodesBetween(i,n,(e,t)=>{if(e.isText){const r=Math.max(i,t),o=Math.min(n,t+e.nodeSize);a+=o-r,$=[...$,...e.marks.map(e=>({mark:e,from:r,to:o}))]}}),0===a)return!1;const c=$.filter(e=>!s||s.name===e.mark.type.name).filter(e=>Tc(e.mark.attrs,r)).reduce((e,t)=>{return e+(t.to-t.from)},0),p=$.filter(e=>!s||e.mark.type!==s&&e.mark.type.excludes(s)).reduce((e,t)=>{return e+(t.to-t.from)},0);return(c>0?c+p:c)>=a}function im(e,t,r={}){if(!t)return vc(e,null,r)||Me(e,null,r);const i=Hd(t,e.schema);return"node"===i?vc(e,t,r):"mark"===i&&Me(e,t,r)}function jm(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function oh(e){const t=`<body>${e}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function Id(e,t,r){if(r={slice:!0,parseOptions:{},...r},"object"==typeof e&&null!==e)try{return Array.isArray(e)?ba.fromArray(e.map(e=>t.nodeFromJSON(e))):t.nodeFromJSON(e)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),Id("",t,r)}if("string"==typeof e){const i=eb.fromSchema(t);return r.slice?i.parseSlice(oh(e),r.parseOptions).content:i.parse(oh(e),r.parseOptions)}return Id("",t,r)}function ph(e,t,r={}){return Id(e,t,{slice:!1,parseOptions:r})}function km(e,t){const r=Da.fromSchema(t).serializeFragment(e.content),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function lm(e){var t;const r=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),i=e.toJSON();return JSON.stringify(r)===JSON.stringify(i)}function mm(e){const t=document.querySelector("style[data-tiptap-style]");if(null!==t)return t;const r=document.createElement("style");return r.setAttribute("data-tiptap-style",""),r.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(r),r}function qh(t,e,r){for(var n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;var o=t.child(n),s=e.child(n);if(o!=s){if(!o.sameMarkup(s))return r;if(o.isText&&o.text!=s.text){for(var i=0;o.text[i]==s.text[i];i++)r++;return r}if(o.content.size||s.content.size){var a=qh(o.content,s.content,r+1);if(null!=a)return a}r+=o.nodeSize}else r+=o.nodeSize}}function rh(t,e,r,n){for(var o=t.childCount,s=e.childCount;;){if(0==o||0==s)return o==s?null:{a:r,b:n};var i=t.child(--o),a=e.child(--s),$=i.nodeSize;if(i!=a){if(!i.sameMarkup(a))return{a:r,b:n};if(i.isText&&i.text!=a.text){for(var p=0,f=Math.min(i.text.length,a.text.length);p<f&&i.text[i.text.length-p-1]==a.text[a.text.length-p-1];)p++,r--,n--;return{a:r,b:n}}if(i.content.size||a.content.size){var c=rh(i.content,a.content,r-1,n-1);if(c)return c}r-=$,n-=$}else r-=$,n-=$}}function Ba(r){this.content=r}Ba.prototype={constructor:Ba,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return-1==e?void 0:this.content[e+1]},update:function(r,e,t){var n=t&&t!=r?this.remove(t):this,a=n.find(r),o=n.content.slice();return-1==a?o.push(t||r,e):(o[a+1]=e,t&&(o[a]=t)),new Ba(o)},remove:function(r){var e=this.find(r);if(-1==e)return this;var t=this.content.slice();return t.splice(e,2),new Ba(t)},addToStart:function(r,e){return new Ba([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new Ba(t)},addBefore:function(r,e,t){var n=this.remove(e),a=n.content.slice(),o=n.find(r);return a.splice(-1==o?a.length:o,0,e,t),new Ba(a)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return(r=Ba.from(r)).size?new Ba(r.content.concat(this.subtract(r).content)):this},append:function(r){return(r=Ba.from(r)).size?new Ba(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=Ba.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},get size(){return this.content.length>>1}},Ba.from=function(r){if(r instanceof Ba)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new Ba(e)};var sh=Ba;var ba=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize},Jd={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};ba.prototype.nodesBetween=function(t,e,r,n,o){void 0===n&&(n=0);for(var s=0,i=0;i<e;s++){var a=this.content[s],$=i+a.nodeSize;if($>t&&!1!==r(a,n+i,o,s)&&a.content.size){var p=i+1;a.nodesBetween(Math.max(0,t-p),Math.min(a.content.size,e-p),r,n+p)}i=$}},ba.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},ba.prototype.textBetween=function(t,e,r,n){var o="",s=!0;return this.nodesBetween(t,e,function(i,a){i.isText?(o+=i.text.slice(Math.max(t,a)-a,e-a),s=!r):i.isLeaf&&n?(o+=n,s=!r):!s&&i.isBlock&&(o+=r,s=!0)},0),o},ba.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,r=t.firstChild,n=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(r)&&(n[n.length-1]=e.withText(e.text+r.text),o=1);o<t.content.length;o++)n.push(t.content[o]);return new ba(n,this.size+t.size)},ba.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var r=[],n=0;if(e>t)for(var o=0,s=0;s<e;o++){var i=this.content[o],a=s+i.nodeSize;a>t&&((s<t||a>e)&&(i=i.isText?i.cut(Math.max(0,t-s),Math.min(i.text.length,e-s)):i.cut(Math.max(0,t-s-1),Math.min(i.content.size,e-s-1))),r.push(i),n+=i.nodeSize),s=a}return new ba(r,n)},ba.prototype.cutByIndex=function(t,e){return t==e?ba.empty:0==t&&e==this.content.length?this:new ba(this.content.slice(t,e))},ba.prototype.replaceChild=function(t,e){var r=this.content[t];if(r==e)return this;var n=this.content.slice(),o=this.size+e.nodeSize-r.nodeSize;return n[t]=e,new ba(n,o)},ba.prototype.addToStart=function(t){return new ba([t].concat(this.content),this.size+t.nodeSize)},ba.prototype.addToEnd=function(t){return new ba(this.content.concat(t),this.size+t.nodeSize)},ba.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},Jd.firstChild.get=function(){return this.content.length?this.content[0]:null},Jd.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Jd.childCount.get=function(){return this.content.length},ba.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},ba.prototype.maybeChild=function(t){return this.content[t]},ba.prototype.forEach=function(t){for(var e=0,r=0;e<this.content.length;e++){var n=this.content[e];t(n,r,e),r+=n.nodeSize}},ba.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),qh(this,t,e)},ba.prototype.findDiffEnd=function(t,e,r){return void 0===e&&(e=this.size),void 0===r&&(r=t.size),rh(this,t,e,r)},ba.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return Kd(0,t);if(t==this.size)return Kd(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var r=0,n=0;;r++){var o=n+this.child(r).nodeSize;if(o>=t)return o==t||e>0?Kd(r+1,o):Kd(r,n);n=o}},ba.prototype.toString=function(){return"<"+this.toStringInner()+">"},ba.prototype.toStringInner=function(){return this.content.join(", ")},ba.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null},ba.fromJSON=function(t,e){if(!e)return ba.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new ba(e.map(t.nodeFromJSON))},ba.fromArray=function(t){if(!t.length)return ba.empty;for(var e,r=0,n=0;n<t.length;n++){var o=t[n];r+=o.nodeSize,n&&o.isText&&t[n-1].sameMarkup(o)?(e||(e=t.slice(0,n)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new ba(e||t,r)},ba.from=function(t){if(!t)return ba.empty;if(t instanceof ba)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ba([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(ba.prototype,Jd);var Ne={index:0,offset:0};function Kd(t,e){return Ne.index=t,Ne.offset=e,Ne}function Ld(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!Ld(t[n],e[n]))return!1}else{for(var o in t)if(!(o in e&&Ld(t[o],e[o])))return!1;for(var s in e)if(!(s in t))return!1}return!0}ba.empty=new ba([],0);var ja=function(t,e){this.type=t,this.attrs=e};function qb(t){var e=Error.call(this,t);return e.__proto__=qb.prototype,e}ja.prototype.addToSet=function(t){for(var e,r=!1,n=0;n<t.length;n++){var o=t[n];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,n));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,n)),e.push(this),r=!0),e&&e.push(o)}}return e||(e=t.slice()),r||e.push(this),e},ja.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},ja.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},ja.prototype.eq=function(t){return this==t||this.type==t.type&&Ld(this.attrs,t.attrs)},ja.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},ja.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var r=t.marks[e.type];if(!r)throw new RangeError("There is no mark type "+e.type+" in this schema");return r.create(e.attrs)},ja.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].eq(e[r]))return!1;return!0},ja.setFrom=function(t){if(!t||0==t.length)return ja.none;if(t instanceof ja)return[t];var e=t.slice();return e.sort(function(t,e){return t.type.rank-e.type.rank}),e},ja.none=[],qb.prototype=Object.create(Error.prototype),qb.prototype.constructor=qb,qb.prototype.name="ReplaceError";var da=function(t,e,r){this.content=t,this.openStart=e,this.openEnd=r},th={size:{configurable:!0}};function uh(t,e,r){var n=t.findIndex(e),o=n.index,s=n.offset,i=t.maybeChild(o),a=t.findIndex(r),$=a.index,p=a.offset;if(s==e||i.isText){if(p!=r&&!t.child($).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(o!=$)throw new RangeError("Removing non-flat range");return t.replaceChild(o,i.copy(uh(i.content,e-s-1,r-s-1)))}function vh(t,e,r,n){var o=t.findIndex(e),s=o.index,i=o.offset,a=t.maybeChild(s);if(i==e||a.isText)return n&&!n.canReplace(s,s,r)?null:t.cut(0,e).append(r).append(t.cut(e));var $=vh(a.content,e-i-1,r);return $&&t.replaceChild(s,a.copy($))}function nm(t,e,r){if(r.openStart>t.depth)throw new qb("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new qb("Inconsistent open depths");return wh(t,e,r,0)}function wh(t,e,r,n){var o=t.index(n),s=t.node(n);if(o==e.index(n)&&n<t.depth-r.openStart){var i=wh(t,e,r,n+1);return s.copy(s.content.replaceChild(o,i))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=n||e.depth!=n){var a=om(r,t);return cc(s,yh(t,a.start,a.end,e,n))}var $=t.parent,p=$.content;return cc($,p.cut(0,t.parentOffset).append(r.content).append(p.cut(e.parentOffset)))}return cc(s,Md(t,e,n))}function xh(t,e){if(!e.type.compatibleContent(t.type))throw new qb("Cannot join "+e.type.name+" onto "+t.type.name)}function Oe(t,e,r){var n=t.node(r);return xh(n,e.node(r)),n}function bc(t,e){var r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Uc(t,e,r,n){var o=(e||t).node(r),s=0,i=e?e.index(r):o.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(bc(t.nodeAfter,n),s++));for(var a=s;a<i;a++)bc(o.child(a),n);e&&e.depth==r&&e.textOffset&&bc(e.nodeBefore,n)}function cc(t,e){if(!t.type.validContent(e))throw new qb("Invalid content for node "+t.type.name);return t.copy(e)}function yh(t,e,r,n,o){var s=t.depth>o&&Oe(t,e,o+1),i=n.depth>o&&Oe(r,n,o+1),a=[];return Uc(null,t,o,a),s&&i&&e.index(o)==r.index(o)?(xh(s,i),bc(cc(s,yh(t,e,r,n,o+1)),a)):(s&&bc(cc(s,Md(t,e,o+1)),a),Uc(e,r,o,a),i&&bc(cc(i,Md(r,n,o+1)),a)),Uc(n,null,o,a),new ba(a)}function Md(t,e,r){var n=[];(Uc(null,t,r,n),t.depth>r)&&bc(cc(Oe(t,e,r+1),Md(t,e,r+1)),n);return Uc(e,null,r,n),new ba(n)}function om(t,e){for(var r=e.depth-t.openStart,n=e.node(r).copy(t.content),o=r-1;o>=0;o--)n=e.node(o).copy(ba.from(n));return{start:n.resolveNoCache(t.openStart+r),end:n.resolveNoCache(n.content.size-t.openEnd-r)}}th.size.get=function(){return this.content.size-this.openStart-this.openEnd},da.prototype.insertAt=function(t,e){var r=vh(this.content,t+this.openStart,e,null);return r&&new da(r,this.openStart,this.openEnd)},da.prototype.removeBetween=function(t,e){return new da(uh(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},da.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},da.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},da.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},da.fromJSON=function(t,e){if(!e)return da.empty;var r=e.openStart||0,n=e.openEnd||0;if("number"!=typeof r||"number"!=typeof n)throw new RangeError("Invalid input for Slice.fromJSON");return new da(ba.fromJSON(t,e.content),r,n)},da.maxOpen=function(t,e){void 0===e&&(e=!0);for(var r=0,n=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)r++;for(var s=t.lastChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.lastChild)n++;return new da(t,r,n)},Object.defineProperties(da.prototype,th),da.empty=new da(ba.empty,0,0);var qa=function(t,e,r){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=r},wc={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};qa.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},wc.parent.get=function(){return this.node(this.depth)},wc.doc.get=function(){return this.node(0)},qa.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},qa.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},qa.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},qa.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},qa.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},qa.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},qa.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},wc.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},wc.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var r=this.pos-this.path[this.path.length-1],n=t.child(e);return r?t.child(e).cut(r):n},wc.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},qa.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var r=this.path[3*e],n=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)n+=r.child(o).nodeSize;return n},qa.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return ja.none;if(this.textOffset)return t.child(e).marks;var r=t.maybeChild(e-1),n=t.maybeChild(e);if(!r){var o=r;r=n,n=o}for(var s=r.marks,i=0;i<s.length;i++)!1!==s[i].type.spec.inclusive||n&&s[i].isInSet(n.marks)||(s=s[i--].removeFromSet(s));return s},qa.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var r=e.marks,n=t.parent.maybeChild(t.index()),o=0;o<r.length;o++)!1!==r[o].type.spec.inclusive||n&&r[o].isInSet(n.marks)||(r=r[o--].removeFromSet(r));return r},qa.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},qa.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!e||e(this.node(r))))return new Vc(this,t,r)},qa.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},qa.prototype.max=function(t){return t.pos>this.pos?t:this},qa.prototype.min=function(t){return t.pos<this.pos?t:this},qa.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},qa.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var r=[],n=0,o=e,s=t;;){var i=s.content.findIndex(o),a=i.index,$=i.offset,p=o-$;if(r.push(s,a,n+$),!p)break;if((s=s.child(a)).isText)break;o=p-1,n+=$+1}return new qa(e,r,o)},qa.resolveCached=function(t,e){for(var r=0;r<Pe.length;r++){var n=Pe[r];if(n.pos==e&&n.doc==t)return n}var o=Pe[zh]=qa.resolve(t,e);return zh=(zh+1)%pm,o},Object.defineProperties(qa.prototype,wc);var Pe=[],zh=0,pm=12,Vc=function(t,e,r){this.$from=t,this.$to=e,this.depth=r},xc={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};xc.start.get=function(){return this.$from.before(this.depth+1)},xc.end.get=function(){return this.$to.after(this.depth+1)},xc.parent.get=function(){return this.$from.node(this.depth)},xc.startIndex.get=function(){return this.$from.index(this.depth)},xc.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Vc.prototype,xc);var qm=Object.create(null),ia=function(t,e,r,n){this.type=t,this.attrs=e,this.content=r||ba.empty,this.marks=n||ja.none},Ta={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Ta.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Ta.childCount.get=function(){return this.content.childCount},ia.prototype.child=function(t){return this.content.child(t)},ia.prototype.maybeChild=function(t){return this.content.maybeChild(t)},ia.prototype.forEach=function(t){this.content.forEach(t)},ia.prototype.nodesBetween=function(t,e,r,n){void 0===n&&(n=0),this.content.nodesBetween(t,e,r,n,this)},ia.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},Ta.textContent.get=function(){return this.textBetween(0,this.content.size,"")},ia.prototype.textBetween=function(t,e,r,n){return this.content.textBetween(t,e,r,n)},Ta.firstChild.get=function(){return this.content.firstChild},Ta.lastChild.get=function(){return this.content.lastChild},ia.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},ia.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},ia.prototype.hasMarkup=function(t,e,r){return this.type==t&&Ld(this.attrs,e||t.defaultAttrs||qm)&&ja.sameSet(this.marks,r||ja.none)},ia.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},ia.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},ia.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},ia.prototype.slice=function(t,e,r){if(void 0===e&&(e=this.content.size),void 0===r&&(r=!1),t==e)return da.empty;var n=this.resolve(t),o=this.resolve(e),s=r?0:n.sharedDepth(e),i=n.start(s),a=n.node(s).content.cut(n.pos-i,o.pos-i);return new da(a,n.depth-s,o.depth-s)},ia.prototype.replace=function(t,e,r){return nm(this.resolve(t),this.resolve(e),r)},ia.prototype.nodeAt=function(t){for(var e=this;;){var r=e.content.findIndex(t),n=r.index,o=r.offset;if(!(e=e.maybeChild(n)))return null;if(o==t||e.isText)return e;t-=o+1}},ia.prototype.childAfter=function(t){var e=this.content.findIndex(t),r=e.index,n=e.offset;return{node:this.content.maybeChild(r),index:r,offset:n}},ia.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),r=e.index,n=e.offset;if(n<t)return{node:this.content.child(r),index:r,offset:n};var o=this.content.child(r-1);return{node:o,index:r-1,offset:n-o.nodeSize}},ia.prototype.resolve=function(t){return qa.resolveCached(this,t)},ia.prototype.resolveNoCache=function(t){return qa.resolve(this,t)},ia.prototype.rangeHasMark=function(t,e,r){var n=!1;return e>t&&this.nodesBetween(t,e,function(t){return r.isInSet(t.marks)&&(n=!0),!n}),n},Ta.isBlock.get=function(){return this.type.isBlock},Ta.isTextblock.get=function(){return this.type.isTextblock},Ta.inlineContent.get=function(){return this.type.inlineContent},Ta.isInline.get=function(){return this.type.isInline},Ta.isText.get=function(){return this.type.isText},Ta.isLeaf.get=function(){return this.type.isLeaf},Ta.isAtom.get=function(){return this.type.isAtom},ia.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Ah(this.marks,t)},ia.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},ia.prototype.canReplace=function(t,e,r,n,o){void 0===r&&(r=ba.empty),void 0===n&&(n=0),void 0===o&&(o=r.childCount);var s=this.contentMatchAt(t).matchFragment(r,n,o),i=s&&s.matchFragment(this.content,e);if(!i||!i.validEnd)return!1;for(var a=n;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0},ia.prototype.canReplaceWith=function(t,e,r,n){if(n&&!this.type.allowsMarks(n))return!1;var o=this.contentMatchAt(t).matchType(r),s=o&&o.matchFragment(this.content,e);return!!s&&s.validEnd},ia.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},ia.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=ja.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!ja.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map(function(t){return t.type.name}));this.content.forEach(function(t){return t.check()})},ia.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(t){return t.toJSON()})),t},ia.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var r=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,r)}var n=ba.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,n,r)},Object.defineProperties(ia.prototype,Ta);var rm=function(t){function e(e,r,n,o){if(t.call(this,e,r,null,o),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ah(this.marks,JSON.stringify(this.text))},r.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},r.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,r),e}(ia);function Ah(t,e){for(var r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}var Ca=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Nd={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Ca.parse=function(t,e){var r=new Od(t,e);if(null==r.next)return Ca.empty;var n=Ch(r);r.next&&r.err("Unexpected trailing text");var o=ym(xm(n));return zm(o,r),o},Ca.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},Ca.prototype.matchFragment=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.childCount);for(var n=this,o=e;n&&o<r;o++)n=n.matchType(t.child(o).type);return n},Nd.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},Nd.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},Ca.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var r=0;r<t.next.length;r+=2)if(this.next[e]==t.next[r])return!0;return!1},Ca.prototype.fillBefore=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=0);var n=[this];return function o(s,i){var a=s.matchFragment(t,r);if(a&&(!e||a.validEnd))return ba.from(i.map(function(t){return t.createAndFill()}));for(var $=0;$<s.next.length;$+=2){var p=s.next[$],f=s.next[$+1];if(!p.isText&&!p.hasRequiredAttrs()&&-1==n.indexOf(f)){n.push(f);var c=o(f,i.concat(p));if(c)return c}}}(this,[])},Ca.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var r=this.computeWrapping(t);return this.wrapCache.push(t,r),r},Ca.prototype.computeWrapping=function(t){for(var e=Object.create(null),r=[{match:this,type:null,via:null}];r.length;){var n=r.shift(),o=n.match;if(o.matchType(t)){for(var s=[],i=n;i.type;i=i.via)s.push(i.type);return s.reverse()}for(var a=0;a<o.next.length;a+=2){var $=o.next[a];$.isLeaf||$.hasRequiredAttrs()||$.name in e||n.type&&!o.next[a+1].validEnd||(r.push({match:$.contentMatch,type:$,via:n}),e[$.name]=!0)}}},Nd.edgeCount.get=function(){return this.next.length>>1},Ca.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},Ca.prototype.toString=function(){var t=[];return function e(r){t.push(r);for(var n=1;n<r.next.length;n+=2)-1==t.indexOf(r.next[n])&&e(r.next[n])}(this),t.map(function(e,r){for(var n=r+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)n+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return n}).join("\n")},Object.defineProperties(Ca.prototype,Nd),Ca.empty=new Ca(!0);var Od=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Bh={next:{configurable:!0}};function Ch(t){var e=[];do{e.push(sm(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function sm(t){var e=[];do{e.push(tm(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function tm(t){for(var e=wm(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=um(t,e)}return e}function Dh(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function um(t,e){var r=Dh(t),n=r;return t.eat(",")&&(n="}"!=t.next?Dh(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function vm(t,e){var r=t.nodeTypes,n=r[e];if(n)return[n];var o=[];for(var s in r){var i=r[s];i.groups.indexOf(e)>-1&&o.push(i)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}function wm(t){if(t.eat("(")){var e=Ch(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var r=vm(t,t.next).map(function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}});return t.pos++,1==r.length?r[0]:{type:"choice",exprs:r}}t.err("Unexpected token '"+t.next+"'")}function xm(t){var e=[[]];return o(function t(e,s){if("choice"==e.type)return e.exprs.reduce(function(e,r){return e.concat(t(r,s))},[]);if("seq"==e.type)for(var i=0;;i++){var a=t(e.exprs[i],s);if(i==e.exprs.length-1)return a;o(a,s=r())}else{if("star"==e.type){var $=r();return n(s,$),o(t(e.expr,$),$),[n($)]}if("plus"==e.type){var p=r();return o(t(e.expr,s),p),o(t(e.expr,p),p),[n(p)]}if("opt"==e.type)return[n(s)].concat(t(e.expr,s));if("range"==e.type){for(var f=s,c=0;c<e.min;c++){var h=r();o(t(e.expr,f),h),f=h}if(-1==e.max)o(t(e.expr,f),f);else for(var u=e.min;u<e.max;u++){var l=r();n(f,l),o(t(e.expr,f),l),f=l}return[n(f)]}if("name"==e.type)return[n(s,null,e.value)]}}(t,0),r()),e;function r(){return e.push([])-1}function n(t,r,n){var o={term:n,to:r};return e[t].push(o),o}function o(t,e){t.forEach(function(t){return t.to=e})}}function Eh(t,e){return e-t}function Fh(t,e){var r=[];return function e(n){var o=t[n];if(1==o.length&&!o[0].term)return e(o[0].to);r.push(n);for(var s=0;s<o.length;s++){var i=o[s],a=i.term,$=i.to;a||-1!=r.indexOf($)||e($)}}(e),r.sort(Eh)}function ym(t){var e=Object.create(null);return function r(n){var o=[];n.forEach(function(e){t[e].forEach(function(e){var r=e.term,n=e.to;if(r){var s=o.indexOf(r),i=s>-1&&o[s+1];Fh(t,n).forEach(function(t){i||o.push(r,i=[]),-1==i.indexOf(t)&&i.push(t)})}})});var s=e[n.join(",")]=new Ca(n.indexOf(t.length-1)>-1);for(var i=0;i<o.length;i+=2){var a=o[i+1].sort(Eh);s.next.push(o[i],e[a.join(",")]||r(a))}return s}(Fh(t,0))}function zm(t,e){for(var r=0,n=[t];r<n.length;r++){for(var o=n[r],s=!o.validEnd,i=[],a=0;a<o.next.length;a+=2){var $=o.next[a],p=o.next[a+1];i.push($.name),!s||$.isText||$.hasRequiredAttrs()||(s=!1),-1==n.indexOf(p)&&n.push(p)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Gh(t){var e=Object.create(null);for(var r in t){var n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function Hh(t,e){var r=Object.create(null);for(var n in t){var o=e&&e[n];if(void 0===o){var s=t[n];if(!s.hasDefault)throw new RangeError("No value supplied for attribute "+n);o=s.default}r[n]=o}return r}function Ih(t){var e=Object.create(null);if(t)for(var r in t)e[r]=new Jh(t[r]);return e}Bh.next.get=function(){return this.tokens[this.pos]},Od.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},Od.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(Od.prototype,Bh);var Ia=function(t,e,r){this.name=t,this.schema=e,this.spec=r,this.groups=r.group?r.group.split(" "):[],this.attrs=Ih(r.attrs),this.defaultAttrs=Gh(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==t),this.isText="text"==t},Wc={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Wc.isInline.get=function(){return!this.isBlock},Wc.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Wc.isLeaf.get=function(){return this.contentMatch==Ca.empty},Wc.isAtom.get=function(){return this.isLeaf||this.spec.atom},Ia.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},Ia.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},Ia.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Hh(this.attrs,t)},Ia.prototype.create=function(t,e,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ia(this,this.computeAttrs(t),ba.from(e),ja.setFrom(r))},Ia.prototype.createChecked=function(t,e,r){if(e=ba.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new ia(this,this.computeAttrs(t),e,ja.setFrom(r))},Ia.prototype.createAndFill=function(t,e,r){if(t=this.computeAttrs(t),(e=ba.from(e)).size){var n=this.contentMatch.fillBefore(e);if(!n)return null;e=n.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(ba.empty,!0);return o?new ia(this,t,e.append(o),ja.setFrom(r)):null},Ia.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0},Ia.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},Ia.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},Ia.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?e&&e.push(t[r]):e||(e=t.slice(0,r));return e?e.length?e:ja.empty:t},Ia.compile=function(t,e){var r=Object.create(null);t.forEach(function(t,n){return r[t]=new Ia(t,e,n)});var n=e.spec.topNode||"doc";if(!r[n])throw new RangeError("Schema is missing its top node type ('"+n+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r},Object.defineProperties(Ia.prototype,Wc);var Jh=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},Kh={isRequired:{configurable:!0}};Kh.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Jh.prototype,Kh);var Ob=function(t,e,r,n){this.name=t,this.schema=r,this.spec=n,this.attrs=Ih(n.attrs),this.rank=e,this.excluded=null;var o=Gh(this.attrs);this.instance=o&&new ja(this,o)};Ob.prototype.create=function(t){return!t&&this.instance?this.instance:new ja(this,Hh(this.attrs,t))},Ob.compile=function(t,e){var r=Object.create(null),n=0;return t.forEach(function(t,o){return r[t]=new Ob(t,n++,e,o)}),r},Ob.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},Ob.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},Ob.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var dc=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=sh.from(t.nodes),this.spec.marks=sh.from(t.marks),this.nodes=Ia.compile(this.spec.nodes,this),this.marks=Ob.compile(this.spec.marks,this);var r=Object.create(null);for(var n in this.nodes){if(n in this.marks)throw new RangeError(n+" can not be both a node and a mark");var o=this.nodes[n],s=o.spec.content||"",i=o.spec.marks;o.contentMatch=r[s]||(r[s]=Ca.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==i?null:i?Lh(this,i.split(" ")):""!=i&&o.inlineContent?null:[]}for(var a in this.marks){var $=this.marks[a],p=$.spec.excludes;$.excluded=null==p?[$]:""==p?[]:Lh(this,p.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Lh(t,e){for(var r=[],n=0;n<e.length;n++){var o=e[n],s=t.marks[o],i=s;if(s)r.push(s);else for(var a in t.marks){var $=t.marks[a];("_"==o||$.spec.group&&$.spec.group.split(" ").indexOf(o)>-1)&&r.push(i=$)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}dc.prototype.node=function(t,e,r,n){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Ia))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,r,n)},dc.prototype.text=function(t,e){var r=this.nodes.text;return new rm(r,r.defaultAttrs,t,ja.setFrom(e))},dc.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},dc.prototype.nodeFromJSON=function(t){return ia.fromJSON(this,t)},dc.prototype.markFromJSON=function(t){return ja.fromJSON(this,t)},dc.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var eb=function(t,e){var r=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(function(t){t.tag?r.tags.push(t):t.style&&r.styles.push(t)}),this.normalizeLists=!this.tags.some(function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var r=t.nodes[e.node];return r.contentMatch.matchType(r)})};eb.prototype.parse=function(t,e){void 0===e&&(e={});var r=new na(this,e,!1);return r.addAll(t,null,e.from,e.to),r.finish()},eb.prototype.parseSlice=function(t,e){void 0===e&&(e={});var r=new na(this,e,!0);return r.addAll(t,null,e.from,e.to),da.maxOpen(r.finish())},eb.prototype.matchTag=function(t,e,r){for(var n=r?this.tags.indexOf(r)+1:0;n<this.tags.length;n++){var o=this.tags[n];if(Cm(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var s=o.getAttrs(t);if(!1===s)continue;o.attrs=s}return o}}},eb.prototype.matchStyle=function(t,e,r,n){for(var o=n?this.styles.indexOf(n)+1:0;o<this.styles.length;o++){var s=this.styles[o];if(!(0!=s.style.indexOf(t)||s.context&&!r.matchesContext(s.context)||s.style.length>t.length&&(61!=s.style.charCodeAt(t.length)||s.style.slice(t.length+1)!=e))){if(s.getAttrs){var i=s.getAttrs(e);if(!1===i)continue;s.attrs=i}return s}}},eb.schemaRules=function(t){var e=[];function r(t){for(var r=null==t.priority?50:t.priority,n=0;n<e.length;n++){var o=e[n];if((null==o.priority?50:o.priority)<r)break}e.splice(n,0,t)}var n=function(e){var n=t.marks[e].spec.parseDOM;n&&n.forEach(function(t){r(t=Oh(t)),t.mark=e})};for(var o in t.marks)n(o);var s;for(var i in t.nodes)s=void 0,(s=t.nodes[i].spec.parseDOM)&&s.forEach(function(t){r(t=Oh(t)),t.node=i});return e},eb.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new eb(t,eb.schemaRules(t)))};var Qe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Am={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Mh={ol:!0,ul:!0},Re=1,Se=2,Xc=4;function Nh(t){return(t?Re:0)|("full"===t?Se:0)}var Pb=function(t,e,r,n,o,s,i){this.type=t,this.attrs=e,this.solid=o,this.match=s||(i&Xc?null:t.contentMatch),this.options=i,this.content=[],this.marks=r,this.activeMarks=ja.none,this.pendingMarks=n,this.stashMarks=[]};Pb.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(ba.from(t));if(!e){var r,n=this.type.contentMatch;return(r=n.findWrapping(t.type))?(this.match=n,r):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Pb.prototype.finish=function(t){if(!(this.options&Re)){var e,r=this.content[this.content.length-1];r&&r.isText&&(e=/[ \t\r\n\u000c]+$/.exec(r.text))&&(r.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-e[0].length)))}var n=ba.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(ba.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n},Pb.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},Pb.prototype.applyPending=function(t){for(var e=0,r=this.pendingMarks;e<r.length;e++){var n=r[e];(this.type?this.type.allowsMarkType(n.type):Em(n.type,t))&&!n.isInSet(this.activeMarks)&&(this.activeMarks=n.addToSet(this.activeMarks),this.pendingMarks=n.removeFromSet(this.pendingMarks))}},Pb.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Qe.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var na=function(t,e,r){this.parser=t,this.options=e,this.isOpen=r;var n,o=e.topNode,s=Nh(e.preserveWhitespace)|(r?Xc:0);n=o?new Pb(o.type,o.attrs,ja.none,ja.none,!0,e.topMatch||o.type.contentMatch,s):new Pb(r?null:t.schema.topNodeType,null,ja.none,ja.none,!0,null,s),this.nodes=[n],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Te={top:{configurable:!0},currentPos:{configurable:!0}};function Bm(t){for(var e=t.firstChild,r=null;e;e=e.nextSibling){var n=1==e.nodeType?e.nodeName.toLowerCase():null;n&&Mh.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):"li"==n?r=e:n&&(r=null)}}function Cm(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Dm(t){for(var e,r=/\s*([\w-]+)\s*:\s*([^;]+)/g,n=[];e=r.exec(t);)n.push(e[1],e[2].trim());return n}function Oh(t){var e={};for(var r in t)e[r]=t[r];return e}function Em(t,e){var r=e.schema.nodes,n=function(n){var o=r[n];if(o.allowsMarkType(t)){var s=[],i=function(t){s.push(t);for(var r=0;r<t.edgeCount;r++){var n=t.edge(r),o=n.type,a=n.next;if(o==e)return!0;if(s.indexOf(a)<0&&i(a))return!0}};return i(o.contentMatch)?{v:!0}:void 0}};for(var o in r){var s=n(o);if(s)return s.v}}function Fm(t,e){for(var r=0;r<e.length;r++)if(t.eq(e[r]))return e[r]}Te.top.get=function(){return this.nodes[this.open]},na.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),r=e?this.readStyles(Dm(e)):null,n=this.top;if(null!=r)for(var o=0;o<r.length;o++)this.addPendingMark(r[o]);if(this.addElement(t),null!=r)for(var s=0;s<r.length;s++)this.removePendingMark(r[s],n)}},na.prototype.addTextNode=function(t){var e=t.nodeValue,r=this.top;if(r.options&Se||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(r.options&Re)e=r.options&Se?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var n=r.content[r.content.length-1],o=t.previousSibling;(!n||o&&"BR"==o.nodeName||n.isText&&/[ \t\r\n\u000c]$/.test(n.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},na.prototype.addElement=function(t,e){var r,n=t.nodeName.toLowerCase();Mh.hasOwnProperty(n)&&this.parser.normalizeLists&&Bm(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(r=this.parser.matchTag(t,this,e));if(o?o.ignore:Am.hasOwnProperty(n))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var s,i=this.top,a=this.needsBlock;if(Qe.hasOwnProperty(n))s=!0,i.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),s&&this.sync(i),this.needsBlock=a}else this.addElementByRule(t,o,!1===o.consuming?r:null)},na.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},na.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},na.prototype.readStyles=function(t){var e=ja.none;t:for(var r=0;r<t.length;r+=2)for(var n=null;;){var o=this.parser.matchStyle(t[r],t[r+1],this,n);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;n=o}return e},na.prototype.addElementByRule=function(t,e,r){var n,o,s,i=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):n=this.enter(o,e.attrs,e.preserveWhitespace):(s=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(s));var a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(r)this.addElement(t,r);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(function(t){return i.insertNode(t)});else{var $=e.contentElement;"string"==typeof $?$=t.querySelector($):"function"==typeof $&&($=$(t)),$||($=t),this.findAround(t,$,!0),this.addAll($,n)}n&&(this.sync(a),this.open--),s&&this.removePendingMark(s,a)},na.prototype.addAll=function(t,e,r,n){for(var o=r||0,s=r?t.childNodes[r]:t.firstChild,i=null==n?null:t.childNodes[n];s!=i;s=s.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(s),e&&Qe.hasOwnProperty(s.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},na.prototype.findPlace=function(t){for(var e,r,n=this.open;n>=0;n--){var o=this.nodes[n],s=o.findWrapping(t);if(s&&(!e||e.length>s.length)&&(e=s,r=o,!s.length))break;if(o.solid)break}if(!e)return!1;this.sync(r);for(var i=0;i<e.length;i++)this.enterInner(e[i],null,!1);return!0},na.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var r=this.top;r.applyPending(t.type),r.match&&(r.match=r.match.matchType(t.type));for(var n=r.activeMarks,o=0;o<t.marks.length;o++)r.type&&!r.type.allowsMarkType(t.marks[o].type)||(n=t.marks[o].addToSet(n));return r.content.push(t.mark(n)),!0}return!1},na.prototype.enter=function(t,e,r){var n=this.findPlace(t.create(e));return n&&this.enterInner(t,e,!0,r),n},na.prototype.enterInner=function(t,e,r,n){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var s=null==n?o.options&~Xc:Nh(n);o.options&Xc&&0==o.content.length&&(s|=Xc),this.nodes.push(new Pb(t,e,o.activeMarks,o.pendingMarks,r,null,s)),this.open++},na.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},na.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},na.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Te.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var r=this.nodes[e].content,n=r.length-1;n>=0;n--)t+=r[n].nodeSize;e&&t++}return t},na.prototype.findAtPoint=function(t,e){if(this.find)for(var r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==e&&(this.find[r].pos=this.currentPos)},na.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},na.prototype.findAround=function(t,e,r){if(t!=e&&this.find)for(var n=0;n<this.find.length;n++){if(null==this.find[n].pos&&1==t.nodeType&&t.contains(this.find[n].node))e.compareDocumentPosition(this.find[n].node)&(r?2:4)&&(this.find[n].pos=this.currentPos)}},na.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},na.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var r=t.split("/"),n=this.options.context,o=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),s=-(n?n.depth+1:0)+(o?0:1),i=function(t,a){for(;t>=0;t--){var $=r[t];if(""==$){if(t==r.length-1||0==t)continue;for(;a>=s;a--)if(i(t-1,a))return!0;return!1}var p=a>0||0==a&&o?e.nodes[a].type:n&&a>=s?n.node(a-s).type:null;if(!p||p.name!=$&&-1==p.groups.indexOf($))return!1;a--}return!0};return i(r.length-1,this.open)},na.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var r=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(var n in this.parser.schema.nodes){var o=this.parser.schema.nodes[n];if(o.isTextblock&&o.defaultAttrs)return o}},na.prototype.addPendingMark=function(t){var e=Fm(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},na.prototype.removePendingMark=function(t,e){for(var r=this.open;r>=0;r--){var n=this.nodes[r];if(n.pendingMarks.lastIndexOf(t)>-1)n.pendingMarks=t.removeFromSet(n.pendingMarks);else{n.activeMarks=t.removeFromSet(n.activeMarks);var o=n.popFromStashMark(t);o&&n.type&&n.type.allowsMarkType(o.type)&&(n.activeMarks=o.addToSet(n.activeMarks))}if(n==e)break}},Object.defineProperties(na.prototype,Te);var Da=function(t,e){this.nodes=t||{},this.marks=e||{}};function Ph(t){var e={};for(var r in t){var n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function Ue(t){return t.document||window.document}Da.prototype.serializeFragment=function(t,e,r){var n=this;void 0===e&&(e={}),r||(r=Ue(e).createDocumentFragment());var o=r,s=null;return t.forEach(function(t){if(s||t.marks.length){s||(s=[]);for(var r=0,i=0;r<s.length&&i<t.marks.length;){var a=t.marks[i];if(n.marks[a.type.name]){if(!a.eq(s[r])||!1===a.type.spec.spanning)break;r+=2,i++}else i++}for(;r<s.length;)o=s.pop(),s.pop();for(;i<t.marks.length;){var $=t.marks[i++],p=n.serializeMark($,t.isInline,e);p&&(s.push($,o),o.appendChild(p.dom),o=p.contentDOM||p.dom)}}o.appendChild(n.serializeNode(t,e))}),r},Da.prototype.serializeNode=function(t,e){void 0===e&&(e={});var r=Da.renderSpec(Ue(e),this.nodes[t.type.name](t)),n=r.dom,o=r.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return n},Da.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var r=this.serializeNode(t,e),n=t.marks.length-1;n>=0;n--){var o=this.serializeMark(t.marks[n],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r},Da.prototype.serializeMark=function(t,e,r){void 0===r&&(r={});var n=this.marks[t.type.name];return n&&Da.renderSpec(Ue(r),n(t,e))},Da.renderSpec=function(t,e,r){if(void 0===r&&(r=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var n=e[0],o=n.indexOf(" ");o>0&&(r=n.slice(0,o),n=n.slice(o+1));var s=null,i=r?t.createElementNS(r,n):t.createElement(n),a=e[1],$=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var p in $=2,a)if(null!=a[p]){var f=p.indexOf(" ");f>0?i.setAttributeNS(p.slice(0,f),p.slice(f+1),a[p]):i.setAttribute(p,a[p])}for(var c=$;c<e.length;c++){var h=e[c];if(0===h){if(c<e.length-1||c>$)throw new RangeError("Content hole must be the only child of its parent node");return{dom:i,contentDOM:i}}var u=Da.renderSpec(t,h,r),l=u.dom,d=u.contentDOM;if(i.appendChild(l),d){if(s)throw new RangeError("Multiple content holes");s=d}}return{dom:i,contentDOM:s}},Da.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Da(this.nodesFromSchema(t),this.marksFromSchema(t)))},Da.nodesFromSchema=function(t){var e=Ph(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Da.marksFromSchema=function(t){return Ph(t.marks)};var Qh=65535,Rh=Math.pow(2,16);function Gm(t,e){return t+e*Rh}function Sh(t){return t&Qh}function Hm(t){return(t-(t&Qh))/Rh}var Ve=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null),this.pos=t,this.deleted=e,this.recover=r},xa=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};xa.prototype.recover=function(t){var e=0,r=Sh(t);if(!this.inverted)for(var n=0;n<r;n++)e+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*r]+e+Hm(t)},xa.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},xa.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},xa.prototype._map=function(t,e,r){for(var n=0,o=this.inverted?2:1,i=this.inverted?1:2,p=0;p<this.ranges.length;p+=3){var a=this.ranges[p]-(this.inverted?n:0);if(a>t)break;var $=this.ranges[p+o],s=this.ranges[p+i],c=a+$;if(t<=c){var h=a+n+(($?t==a?-1:t==c?1:e:e)<0?0:s);if(r)return h;var f=t==(e<0?a:c)?null:Gm(p/3,t-a);return new Ve(h,e<0?t!=a:t!=c,f)}n+=s-$}return r?t+n:new Ve(t+n)},xa.prototype.touches=function(t,e){for(var r=0,n=Sh(e),o=this.inverted?2:1,i=this.inverted?1:2,p=0;p<this.ranges.length;p+=3){var a=this.ranges[p]-(this.inverted?r:0);if(a>t)break;var $=this.ranges[p+o];if(t<=a+$&&p==3*n)return!0;r+=this.ranges[p+i]-$}return!1},xa.prototype.forEach=function(t){for(var e=this.inverted?2:1,r=this.inverted?1:2,n=0,o=0;n<this.ranges.length;n+=3){var i=this.ranges[n],p=i-(this.inverted?o:0),a=i+(this.inverted?0:o),$=this.ranges[n+e],s=this.ranges[n+r];t(p,p+$,a,a+s),o+=s-$}},xa.prototype.invert=function(){return new xa(this.ranges,!this.inverted)},xa.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},xa.offset=function(t){return 0==t?xa.empty:new xa(t<0?[0,-t,0]:[0,0,t])},xa.empty=new xa([]);var Ea=function(t,e,r,n){this.maps=t||[],this.from=r||0,this.to=null==n?this.maps.length:n,this.mirror=e};function yc(t){var e=Error.call(this,t);return e.__proto__=yc.prototype,e}Ea.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new Ea(this.maps,this.mirror,t,e)},Ea.prototype.copy=function(){return new Ea(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Ea.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},Ea.prototype.appendMapping=function(t){for(var e=0,r=this.maps.length;e<t.maps.length;e++){var n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?r+n:null)}},Ea.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},Ea.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},Ea.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,r=this.maps.length+t.maps.length;e>=0;e--){var n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?r-n-1:null)}},Ea.prototype.invert=function(){var t=new Ea;return t.appendMappingInverted(this),t},Ea.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,e);return t},Ea.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Ea.prototype._map=function(t,e,r){for(var n=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var p=this.getMirror(o);if(null!=p&&p>o&&p<this.to){o=p,t=this.maps[p].recover(i.recover);continue}}i.deleted&&(n=!0),t=i.pos}return r?t:new Ve(t,n)},yc.prototype=Object.create(Error.prototype),yc.prototype.constructor=yc,yc.prototype.name="TransformError";var ra=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Ea},We={before:{configurable:!0},docChanged:{configurable:!0}};function Pd(){throw new Error("Override me")}We.before.get=function(){return this.docs.length?this.docs[0]:this.doc},ra.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new yc(e.failed);return this},ra.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},We.docChanged.get=function(){return this.steps.length>0},ra.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(ra.prototype,We);var Xe=Object.create(null),Fa=function(){};Fa.prototype.apply=function(t){return Pd()},Fa.prototype.getMap=function(){return xa.empty},Fa.prototype.invert=function(t){return Pd()},Fa.prototype.map=function(t){return Pd()},Fa.prototype.merge=function(t){return null},Fa.prototype.toJSON=function(){return Pd()},Fa.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=Xe[e.stepType];if(!r)throw new RangeError("No step type "+e.stepType+" defined");return r.fromJSON(t,e)},Fa.jsonID=function(t,e){if(t in Xe)throw new RangeError("Duplicate use of step JSON ID "+t);return Xe[t]=e,e.prototype.jsonID=t,e};var Ja=function(t,e){this.doc=t,this.failed=e};Ja.ok=function(t){return new Ja(t,null)},Ja.fail=function(t){return new Ja(null,t)},Ja.fromReplace=function(t,e,r,n){try{return Ja.ok(t.replace(e,r,n))}catch(o){if(o instanceof qb)return Ja.fail(o.message);throw o}};var Eb=function(t){function e(e,r,n,o){t.call(this),this.from=e,this.to=r,this.slice=n,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Ye(t,this.from,this.to)?Ja.fail("Structure replace would overwrite content"):Ja.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new xa([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted?null:new e(r.pos,Math.max(r.pos,n.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var r=this.slice.size+t.slice.size==0?da.empty:new da(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,r,this.structure)}var n=this.slice.size+t.slice.size==0?da.empty:new da(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),n,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(r.from,r.to,da.fromJSON(t,r.slice),!!r.structure)},e}(Fa);Fa.jsonID("replace",Eb);var Oa=function(t){function e(e,r,n,o,i,p,a){t.call(this),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=o,this.slice=i,this.insert=p,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Ye(t,this.from,this.gapFrom)||Ye(t,this.gapTo,this.to)))return Ja.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Ja.fail("Gap is not a flat range");var r=this.slice.insertAt(this.insert,e.content);return r?Ja.fromReplace(t,this.from,this.to,r):Ja.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new xa([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var r=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return r.deleted&&n.deleted||o<r.pos||i>n.pos?null:new e(r.pos,n.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to||"number"!=typeof r.gapFrom||"number"!=typeof r.gapTo||"number"!=typeof r.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(r.from,r.to,r.gapFrom,r.gapTo,da.fromJSON(t,r.slice),r.insert,!!r.structure)},e}(Fa);function Ye(t,e,r){for(var n=t.resolve(e),o=r-e,i=n.depth;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0)for(var p=n.node(i).maybeChild(n.indexAfter(i));o>0;){if(!p||p.isLeaf)return!0;p=p.firstChild,o--}return!1}function Im(t,e,r){return(0==e||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function zc(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),r=t.depth;;--r){var n=t.$from.node(r),o=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&n.canReplace(o,i,e))return r;if(0==r||n.type.spec.isolating||!Im(n,o,i))break}}function Ze(t,e,r,n){void 0===n&&(n=t);var o=Jm(t,e),i=o&&Km(n,e);return i?o.map(Th).concat({type:e,attrs:r}).concat(i.map(Th)):null}function Th(t){return{type:t,attrs:null}}function Jm(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;var p=i.length?i[0]:e;return r.canReplaceWith(n,o,p)?i:null}function Km(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.child(n),p=e.contentMatch.findWrapping(i.type);if(!p)return null;for(var a=(p.length?p[p.length-1]:e).contentMatch,$=n;a&&$<o;$++)a=a.matchType(r.child($).type);return a&&a.validEnd?p:null}function Lm(t,e,r){var n=t.resolve(e),o=n.index();return n.parent.canReplaceWith(o,o+1,r)}function Fb(t,e,r,n){void 0===r&&(r=1);var o=t.resolve(e),i=o.depth-r,p=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!p.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,$=r-2;a>i;a--,$--){var s=o.node(a),c=o.index(a);if(s.type.spec.isolating)return!1;var h=s.content.cutByIndex(c,s.childCount),f=n&&n[$]||s;if(f!=s&&(h=h.replaceChild(0,f.type.create(f.attrs))),!s.canReplace(c+1,s.childCount)||!f.type.validContent(h))return!1}var l=o.indexAfter(i),u=n&&n[0];return o.node(i).canReplaceWith(l,l,u?u.type:o.node(i+1).type)}function $e(t,e){var r=t.resolve(e),n=r.index();return Mm(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Mm(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function Nm(t,e,r){var n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(0==n.parentOffset)for(var o=n.depth-1;o>=0;o--){var i=n.index(o);if(n.node(o).canReplaceWith(i,i,r))return n.before(o+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(var p=n.depth-1;p>=0;p--){var a=n.indexAfter(p);if(n.node(p).canReplaceWith(a,a,r))return n.after(p+1);if(a<n.node(p).childCount)return null}}function Uh(t,e,r){var n=t.resolve(e);if(!r.content.size)return e;for(var o=r.content,i=0;i<r.openStart;i++)o=o.firstChild.content;for(var p=1;p<=(0==r.openStart&&r.size?2:1);p++)for(var a=n.depth;a>=0;a--){var $=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,s=n.index(a)+($>0?1:0),c=n.node(a),h=!1;if(1==p)h=c.canReplace(s,s,o);else{var f=c.contentMatchAt(s).findWrapping(o.firstChild.type);h=f&&c.canReplaceWith(s,s,f[0])}if(h)return 0==$?n.pos:$<0?n.before(a+1):n.after(a+1)}return null}function _e(t,e,r){for(var n=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(_e(i.content,e,i))),i.isInline&&(i=e(i,r,o)),n.push(i)}return ba.fromArray(n)}Fa.jsonID("replaceAround",Oa),ra.prototype.lift=function(t,e){for(var r=t.$from,n=t.$to,o=t.depth,i=r.before(o+1),p=n.after(o+1),a=i,$=p,s=ba.empty,c=0,h=o,f=!1;h>e;h--)f||r.index(h)>0?(f=!0,s=ba.from(r.node(h).copy(s)),c++):a--;for(var l=ba.empty,u=0,d=o,m=!1;d>e;d--)m||n.after(d+1)<n.end(d)?(m=!0,l=ba.from(n.node(d).copy(l)),u++):$++;return this.step(new Oa(a,$,i,p,new da(s.append(l),c,u),s.size-c,!0))},ra.prototype.wrap=function(t,e){for(var r=ba.empty,n=e.length-1;n>=0;n--)r=ba.from(e[n].type.create(e[n].attrs,r));var o=t.start,i=t.end;return this.step(new Oa(o,i,o,i,new da(r,0,0),e.length,!0))},ra.prototype.setBlockType=function(t,e,r,n){var o=this;if(void 0===e&&(e=t),!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(t,e,function(t,e){if(t.isTextblock&&!t.hasMarkup(r,n)&&Lm(o.doc,o.mapping.slice(i).map(e),r)){o.clearIncompatible(o.mapping.slice(i).map(e,1),r);var p=o.mapping.slice(i),a=p.map(e,1),$=p.map(e+t.nodeSize,1);return o.step(new Oa(a,$,a+1,$-1,new da(ba.from(r.create(n,null,t.marks)),0,0),1,!0)),!1}}),this},ra.prototype.setNodeMarkup=function(t,e,r,n){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var i=e.create(r,null,n||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,i);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new Oa(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new da(ba.from(i),0,0),1,!0))},ra.prototype.split=function(t,e,r){void 0===e&&(e=1);for(var n=this.doc.resolve(t),o=ba.empty,i=ba.empty,p=n.depth,a=n.depth-e,$=e-1;p>a;p--,$--){o=ba.from(n.node(p).copy(o));var s=r&&r[$];i=ba.from(s?s.type.create(s.attrs,i):n.node(p).copy(i))}return this.step(new Eb(t,t,new da(o.append(i),e,e),!0))},ra.prototype.join=function(t,e){void 0===e&&(e=1);var r=new Eb(t-e,t+e,da.empty,!0);return this.step(r)};var af=function(t){function e(e,r,n){t.call(this),this.from=e,this.to=r,this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,r=t.slice(this.from,this.to),n=t.resolve(this.from),o=n.node(n.sharedDepth(this.to)),i=new da(_e(r.content,function(t,r){return t.isAtom&&r.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t},o),r.openStart,r.openEnd);return Ja.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new Yc(this.from,this.to,this.mark)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new e(r.pos,n.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(r.from,r.to,t.markFromJSON(r.mark))},e}(Fa);Fa.jsonID("addMark",af);var Yc=function(t){function e(e,r,n){t.call(this),this.from=e,this.to=r,this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,r=t.slice(this.from,this.to),n=new da(_e(r.content,function(t){return t.mark(e.mark.removeFromSet(t.marks))}),r.openStart,r.openEnd);return Ja.fromReplace(t,this.from,this.to,n)},e.prototype.invert=function(){return new af(this.from,this.to,this.mark)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new e(r.pos,n.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(r.from,r.to,t.markFromJSON(r.mark))},e}(Fa);function Om(t,e,r,n){if(void 0===r&&(r=e),void 0===n&&(n=da.empty),e==r&&!n.size)return null;var o=t.resolve(e),i=t.resolve(r);return Vh(o,i,n)?new Eb(e,r,n):new $a(o,i,n).fit()}function Vh(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}Fa.jsonID("removeMark",Yc),ra.prototype.addMark=function(t,e,r){var n=this,o=[],i=[],p=null,a=null;return this.doc.nodesBetween(t,e,function(n,$,s){if(n.isInline){var c=n.marks;if(!r.isInSet(c)&&s.type.allowsMarkType(r.type)){for(var h=Math.max($,t),f=Math.min($+n.nodeSize,e),l=r.addToSet(c),u=0;u<c.length;u++)c[u].isInSet(l)||(p&&p.to==h&&p.mark.eq(c[u])?p.to=f:o.push(p=new Yc(h,f,c[u])));a&&a.to==h?a.to=f:i.push(a=new af(h,f,r))}}}),o.forEach(function(t){return n.step(t)}),i.forEach(function(t){return n.step(t)}),this},ra.prototype.removeMark=function(t,e,r){var n=this;void 0===r&&(r=null);var o=[],i=0;return this.doc.nodesBetween(t,e,function(n,p){if(n.isInline){i++;var a=null;if(r instanceof Ob)for(var $,s=n.marks;$=r.isInSet(s);)(a||(a=[])).push($),s=$.removeFromSet(s);else r?r.isInSet(n.marks)&&(a=[r]):a=n.marks;if(a&&a.length)for(var c=Math.min(p+n.nodeSize,e),h=0;h<a.length;h++){for(var f=a[h],l=void 0,u=0;u<o.length;u++){var d=o[u];d.step==i-1&&f.eq(o[u].style)&&(l=d)}l?(l.to=c,l.step=i):o.push({style:f,from:Math.max(p,t),to:c,step:i})}}}),o.forEach(function(t){return n.step(new Yc(t.from,t.to,t.style))}),this},ra.prototype.clearIncompatible=function(t,e,r){void 0===r&&(r=e.contentMatch);for(var n=this.doc.nodeAt(t),o=[],i=t+1,p=0;p<n.childCount;p++){var a=n.child(p),$=i+a.nodeSize,s=r.matchType(a.type,a.attrs);if(s){r=s;for(var c=0;c<a.marks.length;c++)e.allowsMarkType(a.marks[c].type)||this.step(new Yc(i,$,a.marks[c]))}else o.push(new Eb(i,$,da.empty));i=$}if(!r.validEnd){var h=r.fillBefore(ba.empty,!0);this.replace(i,i,new da(h,0,0))}for(var f=o.length-1;f>=0;f--)this.step(o[f]);return this},ra.prototype.replace=function(t,e,r){void 0===e&&(e=t),void 0===r&&(r=da.empty);var n=Om(this.doc,t,e,r);return n&&this.step(n),this},ra.prototype.replaceWith=function(t,e,r){return this.replace(t,e,new da(ba.from(r),0,0))},ra.prototype.delete=function(t,e){return this.replace(t,e,da.empty)},ra.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var $a=function(t,e,r){this.$to=e,this.$from=t,this.unplaced=r,this.frontier=[];for(var n=0;n<=t.depth;n++){var o=t.node(n);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(n))})}this.placed=ba.empty;for(var i=t.depth;i>0;i--)this.placed=ba.from(t.node(i).copy(this.placed))},Wh={depth:{configurable:!0}};function Zc(t,e,r){return 0==e?t.cutByIndex(r):t.replaceChild(0,t.firstChild.copy(Zc(t.firstChild.content,e-1,r)))}function $c(t,e,r){return 0==e?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy($c(t.lastChild.content,e-1,r)))}function bf(t,e){for(var r=0;r<e;r++)t=t.firstChild.content;return t}function Xh(t,e,r){if(e<=0)return t;var n=t.content;return e>1&&(n=n.replaceChild(0,Xh(n.firstChild,e-1,1==n.childCount?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(ba.empty,!0)))),t.copy(n)}function cf(t,e,r,n,o){var i=t.node(e),p=o?t.indexAfter(e):t.index(e);if(p==i.childCount&&!r.compatibleContent(i.type))return null;var a=n.fillBefore(i.content,!0,p);return a&&!Pm(r,i.content,p)?a:null}function Pm(t,e,r){for(var n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Yh(t,e,r,n,o){if(e<r){var i=t.firstChild;t=t.replaceChild(0,i.copy(Yh(i.content,e+1,r,n,i)))}if(e>n){var p=o.contentMatchAt(0),a=p.fillBefore(t).append(t);t=a.append(p.matchFragment(a).fillBefore(ba.empty,!0))}return t}function Zh(t,e){for(var r=[],n=Math.min(t.depth,e.depth);n>=0;n--){var o=t.start(n);if(o<t.pos-(t.depth-n)||e.end(n)>e.pos+(e.depth-n)||t.node(n).type.spec.isolating||e.node(n).type.spec.isolating)break;o==e.start(n)&&r.push(n)}return r}Wh.depth.get=function(){return this.frontier.length-1},$a.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,o=this.close(e<0?this.$to:n.doc.resolve(e));if(!o)return null;for(var i=this.placed,p=n.depth,a=o.depth;p&&a&&1==i.childCount;)i=i.firstChild.content,p--,a--;var $=new da(i,p,a);return e>-1?new Oa(n.pos,e,this.$to.pos,this.$to.end(),$,r):$.size||n.pos!=this.$to.pos?new Eb(n.pos,o.pos,$):void 0},$a.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var r=void 0,n=(e?(r=bf(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var i=this.frontier[o],p=i.type,a=i.match,$=void 0,s=void 0;if(1==t&&(n?a.matchType(n.type)||(s=a.fillBefore(ba.from(n),!1)):p.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:o,parent:r,inject:s};if(2==t&&n&&($=a.findWrapping(n.type)))return{sliceDepth:e,frontierDepth:o,parent:r,wrap:$};if(r&&a.matchType(r.type))break}},$a.prototype.openMore=function(){var t=this.unplaced,e=t.content,r=t.openStart,n=t.openEnd,o=bf(e,r);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new da(e,r+1,Math.max(n,o.size+r>=e.size-n?r+1:0)),!0)},$a.prototype.dropNode=function(){var t=this.unplaced,e=t.content,r=t.openStart,n=t.openEnd,o=bf(e,r);if(o.childCount<=1&&r>0){var i=e.size-r<=r+o.size;this.unplaced=new da(Zc(e,r-1,1),r-1,i?r-1:n)}else this.unplaced=new da(Zc(e,r,1),r,n)},$a.prototype.placeNodes=function(t){for(var e=t.sliceDepth,r=t.frontierDepth,n=t.parent,o=t.inject,i=t.wrap;this.depth>r;)this.closeFrontierNode();if(i)for(var p=0;p<i.length;p++)this.openFrontierNode(i[p]);var a=this.unplaced,$=n?n.content:a.content,s=a.openStart-e,c=0,h=[],f=this.frontier[r],l=f.match,u=f.type;if(o){for(var d=0;d<o.childCount;d++)h.push(o.child(d));l=l.matchFragment(o)}for(var m=$.size+e-(a.content.size-a.openEnd);c<$.childCount;){var v=$.child(c),C=l.matchType(v.type);if(!C)break;(++c>1||0==s||v.content.size)&&(l=C,h.push(Xh(v.mark(u.allowedMarks(v.marks)),1==c?s:0,c==$.childCount?m:-1)))}var U=c==$.childCount;U||(m=-1),this.placed=$c(this.placed,r,ba.from(h)),this.frontier[r].match=l,U&&m<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var y=0,x=$;y<m;y++){var g=x.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),x=g.content}this.unplaced=U?0==e?da.empty:new da(Zc(a.content,e-1,1),e-1,m<0?a.openEnd:e-1):new da(Zc(a.content,e,c),a.openStart,a.openEnd)},$a.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!cf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var r=this.$to.depth,n=this.$to.after(r);r>1&&n==this.$to.end(--r);)++n;return n},$a.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var r=this.frontier[e],n=r.match,o=r.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),p=cf(t,e,o,n,i);if(p){for(var a=e-1;a>=0;a--){var $=this.frontier[a],s=$.match,c=cf(t,a,$.type,s,!0);if(!c||c.childCount)continue t}return{depth:e,fit:p,move:i?t.doc.resolve(t.after(e+1)):t}}}},$a.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=$c(this.placed,e.depth,e.fit)),t=e.move;for(var r=e.depth+1;r<=t.depth;r++){var n=t.node(r),o=n.type.contentMatch.fillBefore(n.content,!0,t.index(r));this.openFrontierNode(n.type,n.attrs,o)}return t},$a.prototype.openFrontierNode=function(t,e,r){var n=this.frontier[this.depth];n.match=n.match.matchType(t),this.placed=$c(this.placed,this.depth,ba.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})},$a.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(ba.empty,!0);t.childCount&&(this.placed=$c(this.placed,this.frontier.length,t))},Object.defineProperties($a.prototype,Wh),ra.prototype.replaceRange=function(t,e,r){if(!r.size)return this.deleteRange(t,e);var n=this.doc.resolve(t),o=this.doc.resolve(e);if(Vh(n,o,r))return this.step(new Eb(t,e,r));var i=Zh(n,this.doc.resolve(e));0==i[i.length-1]&&i.pop();var p=-(n.depth+1);i.unshift(p);for(var a=n.depth,$=n.pos-1;a>0;a--,$--){var s=n.node(a).type.spec;if(s.defining||s.isolating)break;i.indexOf(a)>-1?p=a:n.before(a)==$&&i.splice(1,0,-a)}for(var c=i.indexOf(p),h=[],f=r.openStart,l=r.content,u=0;;u++){var d=l.firstChild;if(h.push(d),u==r.openStart)break;l=d.content}f>0&&h[f-1].type.spec.defining&&n.node(c).type!=h[f-1].type?f-=1:f>=2&&h[f-1].isTextblock&&h[f-2].type.spec.defining&&n.node(c).type!=h[f-2].type&&(f-=2);for(var m=r.openStart;m>=0;m--){var v=(m+f+1)%(r.openStart+1),C=h[v];if(C)for(var U=0;U<i.length;U++){var y=i[(U+c)%i.length],x=!0;y<0&&(x=!1,y=-y);var g=n.node(y-1),S=n.index(y-1);if(g.canReplaceWith(S,S,C.type,C.marks))return this.replace(n.before(y),x?o.after(y):e,new da(Yh(r.content,0,r.openStart,v),v,r.openEnd))}}for(var M=this.steps.length,w=i.length-1;w>=0&&(this.replace(t,e,r),!(this.steps.length>M));w--){var R=i[w];R<0||(t=n.before(R),e=o.after(R))}return this},ra.prototype.replaceRangeWith=function(t,e,r){if(!r.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var n=Nm(this.doc,t,r.type);null!=n&&(t=e=n)}return this.replaceRange(t,e,new da(ba.from(r),0,0))},ra.prototype.deleteRange=function(t,e){for(var r=this.doc.resolve(t),n=this.doc.resolve(e),o=Zh(r,n),i=0;i<o.length;i++){var p=o[i],a=i==o.length-1;if(a&&0==p||r.node(p).type.contentMatch.validEnd)return this.delete(r.start(p),n.end(p));if(p>0&&(a||r.node(p-1).canReplace(r.index(p-1),n.indexAfter(p-1))))return this.delete(r.before(p),n.after(p))}for(var $=1;$<=r.depth&&$<=n.depth;$++)if(t-r.start($)==r.depth-$&&e>r.end($)&&n.end($)-e!=n.depth-$)return this.delete(r.before($),e);return this.delete(t,e)};var df=Object.create(null),ha=function(e,t,r){this.ranges=r||[new Qm(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},Qb={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};Qb.anchor.get=function(){return this.$anchor.pos},Qb.head.get=function(){return this.$head.pos},Qb.from.get=function(){return this.$from.pos},Qb.to.get=function(){return this.$to.pos},Qb.$from.get=function(){return this.ranges[0].$from},Qb.$to.get=function(){return this.ranges[0].$to},Qb.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},ha.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},ha.prototype.replace=function(e,t){void 0===t&&(t=da.empty);for(var r=t.content.lastChild,o=null,n=0;n<t.openEnd;n++)o=r,r=r.lastChild;for(var i=e.steps.length,p=this.ranges,s=0;s<p.length;s++){var $=p[s],a=$.$from,c=$.$to,l=e.mapping.slice(i);e.replaceRange(l.map(a.pos),l.map(c.pos),s?da.empty:t),0==s&&$h(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}},ha.prototype.replaceWith=function(e,t){for(var r=e.steps.length,o=this.ranges,n=0;n<o.length;n++){var i=o[n],p=i.$from,s=i.$to,$=e.mapping.slice(r),a=$.map(p.pos),c=$.map(s.pos);n?e.deleteRange(a,c):(e.replaceRangeWith(a,c,t),$h(e,r,t.isInline?-1:1))}},ha.findFrom=function(e,t,r){var o=e.parent.inlineContent?new ka(e):Ac(e.node(0),e.parent,e.pos,e.index(),t,r);if(o)return o;for(var n=e.depth-1;n>=0;n--){var i=t<0?Ac(e.node(0),e.node(n),e.before(n+1),e.index(n),t,r):Ac(e.node(0),e.node(n),e.after(n+1),e.index(n)+1,t,r);if(i)return i}},ha.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new Gb(e.node(0))},ha.atStart=function(e){return Ac(e,e,0,0,1)||new Gb(e)},ha.atEnd=function(e){return Ac(e,e,e.content.size,e.childCount,-1)||new Gb(e)},ha.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=df[t.type];if(!r)throw new RangeError("No selection type "+t.type+" defined");return r.fromJSON(e,t)},ha.jsonID=function(e,t){if(e in df)throw new RangeError("Duplicate use of selection JSON ID "+e);return df[e]=t,t.prototype.jsonID=e,t},ha.prototype.getBookmark=function(){return ka.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(ha.prototype,Qb),ha.prototype.visible=!0;var Qm=function(e,t){this.$from=e,this.$to=t},ka=function(e){function t(t,r){void 0===r&&(r=t),e.call(this,t,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={$cursor:{configurable:!0}};return r.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(r,o){var n=r.resolve(o.map(this.head));if(!n.parent.inlineContent)return e.near(n);var i=r.resolve(o.map(this.anchor));return new t(i.parent.inlineContent?i:n,n)},t.prototype.replace=function(t,r){if(void 0===r&&(r=da.empty),e.prototype.replace.call(this,t,r),r==da.empty){var o=this.$from.marksAcross(this.$to);o&&t.ensureMarks(o)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new ad(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,r){if("number"!=typeof r.anchor||"number"!=typeof r.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(r.anchor),e.resolve(r.head))},t.create=function(e,t,r){void 0===r&&(r=t);var o=e.resolve(t);return new this(o,r==t?o:e.resolve(r))},t.between=function(r,o,n){var i=r.pos-o.pos;if(n&&!i||(n=i>=0?1:-1),!o.parent.inlineContent){var p=e.findFrom(o,n,!0)||e.findFrom(o,-n,!0);if(!p)return e.near(o,n);o=p.$head}return r.parent.inlineContent||(0==i?r=o:(r=(e.findFrom(r,-n,!0)||e.findFrom(r,n,!0)).$anchor).pos<o.pos!=i<0&&(r=o)),new t(r,o)},Object.defineProperties(t.prototype,r),t}(ha);ha.jsonID("text",ka);var ad=function(e,t){this.anchor=e,this.head=t};ad.prototype.map=function(e){return new ad(e.map(this.anchor),e.map(this.head))},ad.prototype.resolve=function(e){return ka.between(e.resolve(this.anchor),e.resolve(this.head))};var ga=function(e){function t(t){var r=t.nodeAfter,o=t.node(0).resolve(t.pos+r.nodeSize);e.call(this,t,o),this.node=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,o){var n=o.mapResult(this.anchor),i=n.deleted,p=n.pos,s=r.resolve(p);return i?e.near(s):new t(s)},t.prototype.content=function(){return new da(ba.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new Qd(this.anchor)},t.fromJSON=function(e,r){if("number"!=typeof r.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(r.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(ha);ga.prototype.visible=!1,ha.jsonID("node",ga);var Qd=function(e){this.anchor=e};Qd.prototype.map=function(e){var t=e.mapResult(this.anchor),r=t.deleted,o=t.pos;return r?new ad(o,o):new Qd(o)},Qd.prototype.resolve=function(e){var t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ga.isSelectable(r)?new ga(t):ha.near(t)};var Gb=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,r){if(void 0===r&&(r=da.empty),r==da.empty){t.delete(0,t.doc.content.size);var o=e.atStart(t.doc);o.eq(t.selection)||t.setSelection(o)}else e.prototype.replace.call(this,t,r)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return Rm},t}(ha);ha.jsonID("all",Gb);var Rm={map:function(){return this},resolve:function(e){return new Gb(e)}};function Ac(e,t,r,o,n,i){if(t.inlineContent)return ka.create(e,r);for(var p=o-(n>0?0:1);n>0?p<t.childCount:p>=0;p+=n){var s=t.child(p);if(s.isAtom){if(!i&&ga.isSelectable(s))return ga.create(e,r-(n<0?s.nodeSize:0))}else{var $=Ac(e,s,r+n,n<0?s.childCount:0,n,i);if($)return $}r+=s.nodeSize*n}}function $h(e,t,r){var o=e.steps.length-1;if(!(o<t)){var n,i=e.steps[o];if(i instanceof Eb||i instanceof Oa)e.mapping.maps[o].forEach(function(e,t,r,o){null==n&&(n=o)}),e.setSelection(ha.near(e.doc.resolve(n),r))}}var ai=1,Rd=2,bi=4,Sm=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return r.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ai)&~Rd,this.storedMarks=null,this},r.selectionSet.get=function(){return(this.updated&ai)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=Rd,this},t.prototype.ensureMarks=function(e){return ja.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},r.storedMarksSet.get=function(){return(this.updated&Rd)>0},t.prototype.addStep=function(t,r){e.prototype.addStep.call(this,t,r),this.updated=this.updated&~Rd,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var r=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ja.none))),r.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,r){void 0===r&&(r=t);var o=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,r);var n=this.storedMarks;if(!n){var i=this.doc.resolve(t);n=r==t?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,o.text(e,n)),this.selection.empty||this.setSelection(ha.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},r.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=bi,this},r.scrolledIntoView.get=function(){return(this.updated&bi)>0},Object.defineProperties(t.prototype,r),t}(ra);function ci(e,t){return t&&e?e.bind(t):e}var bd=function(e,t,r){this.name=e,this.init=ci(t.init,r),this.apply=ci(t.apply,r)},Tm=[new bd("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new bd("selection",{init:function(e,t){return e.selection||ha.atStart(t.doc)},apply:function(e){return e.selection}}),new bd("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,r,o){return o.selection.$cursor?e.storedMarks:null}}),new bd("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],ef=function(e,t){var r=this;this.schema=e,this.fields=Tm.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach(function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),r.pluginsByKey[e.key]=e,e.spec.state&&r.fields.push(new bd(e.key,e.spec.state,e))})},Ga=function(e){this.config=e},Sd={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};Sd.schema.get=function(){return this.config.schema},Sd.plugins.get=function(){return this.config.plugins},Ga.prototype.apply=function(e){return this.applyTransaction(e).state},Ga.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=t){var o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0},Ga.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],r=this.applyInner(e),o=null;;){for(var n=!1,i=0;i<this.config.plugins.length;i++){var p=this.config.plugins[i];if(p.spec.appendTransaction){var s=o?o[i].n:0,$=o?o[i].state:this,a=s<t.length&&p.spec.appendTransaction.call(p,s?t.slice(s):t,$,r);if(a&&r.filterTransaction(a,i)){if(a.setMeta("appendedTransaction",e),!o){o=[];for(var c=0;c<this.config.plugins.length;c++)o.push(c<i?{state:r,n:t.length}:{state:this,n:0})}t.push(a),r=r.applyInner(a),n=!0}o&&(o[i]={state:r,n:t.length})}}if(!n)return{state:r,transactions:t}}},Ga.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new Ga(this.config),r=this.config.fields,o=0;o<r.length;o++){var n=r[o];t[n.name]=n.apply(e,this[n.name],this,t)}for(var i=0;i<cd.length;i++)cd[i](this,e,t);return t},Sd.tr.get=function(){return new Sm(this)},Ga.create=function(e){for(var t=new ef(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ga(t),o=0;o<t.fields.length;o++)r[t.fields[o].name]=t.fields[o].init(e,r);return r},Ga.prototype.reconfigure=function(e){for(var t=new ef(this.schema,e.plugins),r=t.fields,o=new Ga(t),n=0;n<r.length;n++){var i=r[n].name;o[i]=this.hasOwnProperty(i)?this[i]:r[n].init(e,o)}return o},Ga.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(function(e){return e.toJSON()})),e&&"object"==typeof e)for(var r in e){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=e[r],n=o.spec.state;n&&n.toJSON&&(t[r]=n.toJSON.call(o,this[o.key]))}return t},Ga.fromJSON=function(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var o=new ef(e.schema,e.plugins),n=new Ga(o);return o.fields.forEach(function(o){if("doc"==o.name)n.doc=ia.fromJSON(e.schema,t.doc);else if("selection"==o.name)n.selection=ha.fromJSON(n.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(n.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(var i in r){var p=r[i],s=p.spec.state;if(p.key==o.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(n[o.name]=s.fromJSON.call(p,e,t[i],n))}n[o.name]=o.init(e,n)}}),n},Ga.addApplyListener=function(e){cd.push(e)},Ga.removeApplyListener=function(e){var t=cd.indexOf(e);t>-1&&cd.splice(t,1)},Object.defineProperties(Ga.prototype,Sd);var cd=[];function di(e,t,r){for(var o in e){var n=e[o];n instanceof Function?n=n.bind(t):"handleDOMEvents"==o&&(n=di(n,t,{})),r[o]=n}return r}var _a=function(e){this.props={},e.props&&di(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:ei("plugin")};_a.prototype.getState=function(e){return e[this.key]};var ff=Object.create(null);function ei(e){return e in ff?e+"$"+ ++ff[e]:(ff[e]=0,e+"$")}var rb=function(e){void 0===e&&(e="key"),this.key=ei(e)};rb.prototype.get=function(e){return e.config.pluginsByKey[this.key]},rb.prototype.getState=function(e){return e[this.key]};var ca={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var gf=/Edge\/(\d+)/.exec(navigator.userAgent),fi=/MSIE \d/.test(navigator.userAgent),hf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);ca.mac=/Mac/.test(navigator.platform);var jf=ca.ie=!!(fi||hf||gf);ca.ie_version=fi?document.documentMode||6:hf?+hf[1]:gf?+gf[1]:null,ca.gecko=!jf&&/gecko\/(\d+)/i.test(navigator.userAgent),ca.gecko_version=ca.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var kf=!jf&&/Chrome\/(\d+)/.exec(navigator.userAgent);ca.chrome=!!kf,ca.chrome_version=kf&&+kf[1],ca.safari=!jf&&/Apple Computer/.test(navigator.vendor),ca.ios=ca.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),ca.android=/Android \d/.test(navigator.userAgent),ca.webkit="webkitFontSmoothing"in document.documentElement.style,ca.webkit_version=ca.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var ab=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},lf=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},Um=null,Hb=function(e,t,r){var o=Um||(Um=document.createRange());return o.setEnd(e,null==r?e.nodeValue.length:r),o.setStart(e,t||0),o},Td=function(e,t,r,o){return r&&(gi(e,t,r,o,-1)||gi(e,t,r,o,1))},Vm=/^(img|br|input|textarea|hr)$/i;function gi(e,t,r,o,n){for(;;){if(e==r&&t==o)return!0;if(t==(n<0?0:sb(e))){var i=e.parentNode;if(1!=i.nodeType||Xm(e)||Vm.test(e.nodeName)||"false"==e.contentEditable)return!1;t=ab(e)+(n<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(n<0?-1:0)]).contentEditable)return!1;t=n<0?sb(e):0}}}function sb(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Wm(e,t,r){for(var o=0==t,n=t==sb(e);o||n;){if(e==r)return!0;var i=ab(e);if(!(e=e.parentNode))return!1;o=o&&0==i,n=n&&i==sb(e)}}function Xm(e){for(var t,r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var mf=function(e){var t=e.isCollapsed;return t&&ca.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Bc(e,t){var r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}function Ym(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Rb(e,t){return"number"==typeof e?e:e[t]}function Zm(e){var t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,o=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*o}}function hi(e,t,r){for(var o=e.someProp("scrollThreshold")||0,n=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,a=r||e.dom;a;a=lf(a))if(1==a.nodeType){var s=a==i.body||1!=a.nodeType,$=s?Ym(i):Zm(a),c=0,l=0;if(t.top<$.top+Rb(o,"top")?l=-($.top-t.top+Rb(n,"top")):t.bottom>$.bottom-Rb(o,"bottom")&&(l=t.bottom-$.bottom+Rb(n,"bottom")),t.left<$.left+Rb(o,"left")?c=-($.left-t.left+Rb(n,"left")):t.right>$.right-Rb(o,"right")&&(c=t.right-$.right+Rb(n,"right")),c||l)if(s)i.defaultView.scrollBy(c,l);else{var d=a.scrollLeft,p=a.scrollTop;l&&(a.scrollTop+=l),c&&(a.scrollLeft+=c);var u=a.scrollLeft-d,v=a.scrollTop-p;t={left:t.left-u,top:t.top-v,right:t.right-u,bottom:t.bottom-v}}if(s)break}}function $m(e){for(var t,r,o=e.dom.getBoundingClientRect(),n=Math.max(0,o.top),i=(o.left+o.right)/2,a=n+1;a<Math.min(innerHeight,o.bottom);a+=5){var s=e.root.elementFromPoint(i,a);if(s!=e.dom&&e.dom.contains(s)){var $=s.getBoundingClientRect();if($.top>=n-20){t=s,r=$.top;break}}}return{refDOM:t,refTop:r,stack:ii(e.dom)}}function ii(e){for(var t=[],r=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=r);e=lf(e));return t}function _m(e){var t=e.refDOM,r=e.refTop,o=e.stack,n=t?t.getBoundingClientRect().top:0;ji(o,0==n?0:n-r)}function ji(e,t){for(var r=0;r<e.length;r++){var o=e[r],n=o.dom,i=o.top,a=o.left;n.scrollTop!=i+t&&(n.scrollTop=i+t),n.scrollLeft!=a&&(n.scrollLeft=a)}}var Ud=null;function an(e){if(e.setActive)return e.setActive();if(Ud)return e.focus(Ud);var t=ii(e);e.focus(null==Ud?{get preventScroll(){return Ud={preventScroll:!0},!0}}:void 0),Ud||(Ud=!1,ji(t,0))}function ki(e,t){for(var r,o,n=2e8,i=0,a=t.top,s=t.top,$=e.firstChild,c=0;$;$=$.nextSibling,c++){var l=void 0;if(1==$.nodeType)l=$.getClientRects();else{if(3!=$.nodeType)continue;l=Hb($).getClientRects()}for(var d=0;d<l.length;d++){var p=l[d];if(p.top<=a&&p.bottom>=s){a=Math.max(p.bottom,a),s=Math.min(p.top,s);var u=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(u<n){r=$,n=u,o=u&&3==r.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==$.nodeType&&u&&(i=c+(t.left>=(p.left+p.right)/2?1:0));continue}}!r&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(i=c+1)}}return r&&3==r.nodeType?bn(r,o):!r||n&&1==r.nodeType?{node:e,offset:i}:ki(r,o)}function bn(e,t){for(var r=e.nodeValue.length,o=document.createRange(),n=0;n<r;n++){o.setEnd(e,n+1),o.setStart(e,n);var i=Sb(o,1);if(i.top!=i.bottom&&nf(t,i))return{node:e,offset:n+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function nf(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function cn(e,t){var r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left?r:e}function dn(e,t,r){var o=ki(t,r),n=o.node,i=o.offset,a=-1;if(1==n.nodeType&&!n.firstChild){var s=n.getBoundingClientRect();a=s.left!=s.right&&r.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(n,i,a)}function en(e,t,r,o){for(var n=-1,i=t;i!=e.dom;){var a=e.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>o.left||s.top>o.top)n=a.posBefore;else{if(!(s.right<o.left||s.bottom<o.top))break;n=a.posAfter}}i=a.dom.parentNode}return n>-1?n:e.docView.posFromDOM(t,r)}function li(e,t,r){var o=e.childNodes.length;if(o&&r.top<r.bottom)for(var n=Math.max(0,Math.min(o-1,Math.floor(o*(t.top-r.top)/(r.bottom-r.top))-2)),i=n;;){var a=e.childNodes[i];if(1==a.nodeType)for(var s=a.getClientRects(),$=0;$<s.length;$++){var c=s[$];if(nf(t,c))return li(a,t,c)}if((i=(i+1)%o)==n)break}return e}function fn(e,t){var r,o,n,i,a=e.root;if(a.caretPositionFromPoint)try{var s=a.caretPositionFromPoint(t.left,t.top);s&&(n=(r=s).offsetNode,i=r.offset)}catch(f){}if(!n&&a.caretRangeFromPoint){var $=a.caretRangeFromPoint(t.left,t.top);$&&(n=(o=$).startContainer,i=o.startOffset)}var c,l=a.elementFromPoint(t.left,t.top+1);if(!l||!e.dom.contains(1!=l.nodeType?l.parentNode:l)){var d=e.dom.getBoundingClientRect();if(!nf(t,d))return null;if(!(l=li(e.dom,t,d)))return null}if(ca.safari)for(var p=l;n&&p;p=lf(p))p.draggable&&(n=i=null);if(l=cn(l,t),n){if(ca.gecko&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length))<n.childNodes.length){var u,v=n.childNodes[i];"IMG"==v.nodeName&&(u=v.getBoundingClientRect()).right<=t.left&&u.bottom>t.top&&i++}n==e.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(c=en(e,n,i,t))}null==c&&(c=dn(e,l,t));var h=e.docView.nearestDesc(l,!0);return{pos:c,inside:h?h.posAtStart-h.border:-1}}function Sb(e,t){var r=e.getClientRects();return r.length?r[t<0?0:r.length-1]:e.getBoundingClientRect()}var gn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function mi(e,t,r){var o=e.docView.domFromPos(t,r<0?-1:1),n=o.node,i=o.offset,a=ca.webkit||ca.gecko;if(3==n.nodeType){if(!a||!gn.test(n.nodeValue)&&(r<0?i:i!=n.nodeValue.length)){var s=i,$=i,c=r<0?1:-1;return r<0&&!i?($++,c=-1):r>=0&&i==n.nodeValue.length?(s--,c=1):r<0?s--:$++,dd(Sb(Hb(n,s,$),c),c<0)}var l=Sb(Hb(n,i,i),r);if(ca.gecko&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){var d=Sb(Hb(n,i-1,i-1),-1);if(d.top==l.top){var p=Sb(Hb(n,i,i+1),-1);if(p.top!=l.top)return dd(p,p.left<d.left)}}return l}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(r<0||i==sb(n))){var u=n.childNodes[i-1];if(1==u.nodeType)return of(u.getBoundingClientRect(),!1)}if(i<sb(n)){var v=n.childNodes[i];if(1==v.nodeType)return of(v.getBoundingClientRect(),!0)}return of(n.getBoundingClientRect(),r>=0)}if(i&&(r<0||i==sb(n))){var h=n.childNodes[i-1],f=3==h.nodeType?Hb(h,sb(h)-(a?0:1)):1!=h.nodeType||"BR"==h.nodeName&&h.nextSibling?null:h;if(f)return dd(Sb(f,1),!1)}if(i<sb(n)){var S=n.childNodes[i],O=3==S.nodeType?Hb(S,0,a?0:1):1==S.nodeType?S:null;if(O)return dd(Sb(O,-1),!0)}return dd(Sb(3==n.nodeType?Hb(n):n,-r),r>=0)}function dd(e,t){if(0==e.width)return e;var r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function of(e,t){if(0==e.height)return e;var r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function ni(e,t,r){var o=e.state,n=e.root.activeElement;o!=t&&e.updateState(t),n!=e.dom&&e.focus();try{return r()}finally{o!=t&&e.updateState(o),n!=e.dom&&n&&n.focus()}}function hn(e,t,r){var o=t.selection,n="up"==r?o.$from:o.$to;return ni(e,t,function(){for(var t=e.docView.domFromPos(n.pos,"up"==r?-1:1).node;;){var o=e.docView.nearestDesc(t,!0);if(!o)break;if(o.node.isBlock){t=o.dom;break}t=o.dom.parentNode}for(var i=mi(e,n.pos,1),a=t.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=Hb(a,0,a.nodeValue.length).getClientRects()}for(var $=0;$<s.length;$++){var c=s[$];if(c.bottom>c.top&&("up"==r?c.bottom<i.top+1:c.top>i.bottom-1))return!1}}return!0})}var jn=/[\u0590-\u08ac]/;function kn(e,t,r){var o=t.selection.$head;if(!o.parent.isTextblock)return!1;var n=o.parentOffset,i=!n,a=n==o.parent.content.size,s=getSelection();return jn.test(o.parent.textContent)&&s.modify?ni(e,t,function(){var t=s.getRangeAt(0),n=s.focusNode,i=s.focusOffset,a=s.caretBidiLevel;s.modify("move",r,"character");var $=!(o.depth?e.docView.domAfterPos(o.before()):e.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||n==s.focusNode&&i==s.focusOffset;return s.removeAllRanges(),s.addRange(t),null!=a&&(s.caretBidiLevel=a),$}):"left"==r||"backward"==r?i:a}var ln=null,mn=null,nn=!1;function on(e,t,r){return ln==t&&mn==r?nn:(ln=t,mn=r,nn="up"==r||"down"==r?hn(e,t,r):kn(e,t,r))}var fb=0,oi=1,Vd=2,Tb=3,ma=function(e,t,r,o){this.parent=e,this.children=t,this.dom=r,r.pmViewDesc=this,this.contentDOM=o,this.dirty=fb},tb={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};ma.prototype.matchesWidget=function(){return!1},ma.prototype.matchesMark=function(){return!1},ma.prototype.matchesNode=function(){return!1},ma.prototype.matchesHack=function(e){return!1},tb.beforePosition.get=function(){return!1},ma.prototype.parseRule=function(){return null},ma.prototype.stopEvent=function(){return!1},tb.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},tb.border.get=function(){return 0},ma.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},ma.prototype.posBeforeChild=function(e){for(var t=0,r=this.posAtStart;t<this.children.length;t++){var o=this.children[t];if(o==e)return r;r+=o.size}},tb.posBefore.get=function(){return this.parent.posBeforeChild(this)},tb.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},tb.posAfter.get=function(){return this.posBefore+this.size},tb.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},ma.prototype.localPosFromDOM=function(e,t,r){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(r<0){var o,n;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(n=o.pmViewDesc)||n.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(n)+n.size:this.posAtStart}var i,a;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(a=i.pmViewDesc)||a.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(e==this.dom&&this.contentDOM)s=t>ab(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var $=e;;$=$.parentNode){if($==this.dom){s=!1;break}if($.parentNode.firstChild!=$)break}if(null==s&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){s=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==s?r>0:s)?this.posAtEnd:this.posAtStart},ma.prototype.nearestDesc=function(e,t){for(var r=!0,o=e;o;o=o.parentNode){var n=this.getDesc(o);if(n&&(!t||n.node)){if(!r||!n.nodeDOM||(1==n.nodeDOM.nodeType?n.nodeDOM.contains(1==e.nodeType?e:e.parentNode):n.nodeDOM==e))return n;r=!1}}},ma.prototype.getDesc=function(e){for(var t=e.pmViewDesc,r=t;r;r=r.parent)if(r==this)return t},ma.prototype.posFromDOM=function(e,t,r){for(var o=e;o;o=o.parentNode){var n=this.getDesc(o);if(n)return n.localPosFromDOM(e,t,r)}return-1},ma.prototype.descAt=function(e){for(var t=0,r=0;t<this.children.length;t++){var o=this.children[t],n=r+o.size;if(r==e&&n!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<n)return o.descAt(e-r-o.border);r=n}},ma.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var r=0,o=0,n=!0;;o++,n=!1){for(;o<this.children.length&&(this.children[o].beforePosition||this.children[o].dom.parentNode!=this.contentDOM);)r+=this.children[o++].size;var i=o==this.children.length?null:this.children[o];if(r==e&&(0==t||!i||!i.size||i.border||t<0&&n)||i&&i.domAtom&&e<r+i.size)return{node:this.contentDOM,offset:i?ab(i.dom):this.contentDOM.childNodes.length};if(!i)throw new Error("Invalid position "+e);var a=r+i.size;if(!i.domAtom&&(t<0&&!i.border?a>=e:a>e)&&(a>e||o+1>=this.children.length||!this.children[o+1].beforePosition))return i.domFromPos(e-r-i.border,t);r=a}},ma.prototype.parseRange=function(e,t,r){if(void 0===r&&(r=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var o=-1,n=-1,i=r,a=0;;a++){var s=this.children[a],$=i+s.size;if(-1==o&&e<=$){var c=i+s.border;if(e>=c&&t<=$-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,c);e=i;for(var l=a;l>0;l--){var d=this.children[l-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){o=ab(d.dom)+1;break}e-=d.size}-1==o&&(o=0)}if(o>-1&&($>t||a==this.children.length-1)){t=$;for(var p=a+1;p<this.children.length;p++){var u=this.children[p];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){n=ab(u.dom);break}t+=u.size}-1==n&&(n=this.contentDOM.childNodes.length);break}i=$}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:n}},ma.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},ma.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),r=t.node,o=t.offset;if(1!=r.nodeType||o==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[o]},ma.prototype.setSelection=function(e,t,r,o){for(var n=Math.min(e,t),i=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var $=this.children[a],c=s+$.size;if(n>s&&i<c)return $.setSelection(e-s-$.border,t-s-$.border,r,o);s=c}var l=this.domFromPos(e,e?-1:1),d=t==e?l:this.domFromPos(t,t?-1:1),p=r.getSelection(),u=!1;if((ca.gecko||ca.safari)&&e==t){var v=l.node,h=l.offset;if(3==v.nodeType){if((u=h&&"\n"==v.nodeValue[h-1])&&h==v.nodeValue.length)for(var f=v,S=void 0;f;f=f.parentNode){if(S=f.nextSibling){"BR"==S.nodeName&&(l=d={node:S.parentNode,offset:ab(S)+1});break}var O=f.pmViewDesc;if(O&&O.node&&O.node.isBlock)break}}else{var M=v.childNodes[h-1];u=M&&("BR"==M.nodeName||"false"==M.contentEditable)}}if(ca.gecko&&p.focusNode&&p.focusNode!=d.node&&1==p.focusNode.nodeType){var E=p.focusNode.childNodes[p.focusOffset];E&&"false"==E.contentEditable&&(o=!0)}if(o||u&&ca.safari||!Td(l.node,l.offset,p.anchorNode,p.anchorOffset)||!Td(d.node,d.offset,p.focusNode,p.focusOffset)){var m=!1;if((p.extend||e==t)&&!u){p.collapse(l.node,l.offset);try{e!=t&&p.extend(d.node,d.offset),m=!0}catch(D){if(!(D instanceof DOMException))throw D}}if(!m){if(e>t){var g=l;l=d,d=g}var y=document.createRange();y.setEnd(d.node,d.offset),y.setStart(l.node,l.offset),p.removeAllRanges(),p.addRange(y)}}},ma.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},tb.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},ma.prototype.markDirty=function(e,t){for(var r=0,o=0;o<this.children.length;o++){var n=this.children[o],i=r+n.size;if(r==i?e<=i&&t>=r:e<i&&t>r){var a=r+n.border,s=i-n.border;if(e>=a&&t<=s)return this.dirty=e==r||t==i?Vd:oi,void(e!=a||t!=s||!n.contentLost&&n.dom.parentNode==this.contentDOM?n.markDirty(e-a,t-a):n.dirty=Tb);n.dirty=Tb}r=i}this.dirty=Vd},ma.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var r=1==e?Vd:oi;t.dirty<r&&(t.dirty=r)}},tb.domAtom.get=function(){return!1},Object.defineProperties(ma.prototype,tb);var Ub=[],pn=function(e){function t(t,r,o,n){var i,a=r.type.toDOM;if("function"==typeof a&&(a=a(o,function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:n})),!r.type.spec.raw){if(1!=a.nodeType){var s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable=!1,a.classList.add("ProseMirror-widget")}e.call(this,t,Ub,a,null),this.widget=r,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return r.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return this.dirty==fb&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},r.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,r),t}(ma),qn=function(e){function t(t,r,o,n){e.call(this,t,Ub,r,null),this.textDOM=o,this.text=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={size:{configurable:!0}};return r.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,r),t}(ma),pf=function(e){function t(t,r,o,n){e.call(this,t,[],o,n),this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,r,o,n){var i=n.nodeViews[r.type.name],a=i&&i(r,n,o);return a&&a.dom||(a=Da.renderSpec(document,r.type.spec.toDOM(r,o))),new t(e,r,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return this.dirty!=Tb&&this.mark.eq(e)},t.prototype.markDirty=function(t,r){if(e.prototype.markDirty.call(this,t,r),this.dirty!=fb){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=fb}},t.prototype.slice=function(e,r,o){var n=t.create(this.parent,this.mark,!0,o),i=this.children,a=this.size;r<a&&(i=sf(i,r,a,o)),e>0&&(i=sf(i,0,e,o));for(var s=0;s<i.length;s++)i[s].parent=n;return n.children=i,n},t}(ma),ed=function(e){function t(t,r,o,n,i,a,s,$,c){e.call(this,t,r.isLeaf?Ub:[],i,a),this.nodeDOM=s,this.node=r,this.outerDeco=o,this.innerDeco=n,a&&this.updateChildren($,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,r,o,n,i,a){var s,$,c=i.nodeViews[r.type.name],l=c&&c(r,i,function(){return $?$.parent?$.parent.posBeforeChild($):void 0:a},o,n),d=l&&l.dom,p=l&&l.contentDOM;if(r.isText){if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(r.text);}else d||(d=(s=Da.renderSpec(document,r.type.spec.toDOM(r))).dom,p=s.contentDOM);p||r.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable=!1),r.type.spec.draggable&&(d.draggable=!0));var u=d;return d=ti(d,o,r),l?$=new sn(e,r,o,n,d,p,u,l,i,a+1):r.isText?new qi(e,r,o,n,d,u,i):new t(e,r,o,n,d,p,u,i,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?ba.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,r){return this.dirty==fb&&e.eq(this.node)&&rf(t,this.outerDeco)&&r.eq(this.innerDeco)},r.size.get=function(){return this.node.nodeSize},r.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var r=this,o=this.node.inlineContent,n=t,i=o&&e.composing&&this.localCompositionNode(e,t),a=new ub(this,i&&i.node);wn(this.node,this.innerDeco,function(t,i,s){t.spec.marks?a.syncToMarks(t.spec.marks,o,e):t.type.side>=0&&!s&&a.syncToMarks(i==r.node.childCount?ja.none:r.node.child(i).marks,o,e),a.placeWidget(t,e,n)},function(t,r,i,s){a.syncToMarks(t.marks,o,e),a.findNodeMatch(t,r,i,s)||a.updateNextNode(t,r,i,e,s)||a.addNode(t,r,i,e,n),n+=t.nodeSize}),a.syncToMarks(Ub,o,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Vd)&&(i&&this.protectLocalComposition(e,i),ri(this.contentDOM,this.children,e),ca.ios&&xn(this.dom))},t.prototype.localCompositionNode=function(e,t){var r=e.state.selection,o=r.from,n=r.to;if(!(!(e.state.selection instanceof ka)||o<t||n>t+this.node.content.size)){var i=e.root.getSelection(),a=yn(i.focusNode,i.focusOffset);if(a&&this.dom.contains(a.parentNode)){var s=a.nodeValue,$=zn(this.node.content,s,o-t,n-t);return $<0?null:{node:a,pos:$,text:s}}}},t.prototype.protectLocalComposition=function(e,t){var r=t.node,o=t.pos,n=t.text;if(!this.getDesc(r)){for(var i=r;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var a=new qn(this,i,r,n);e.compositionNodes.push(a),this.children=sf(this.children,o,o+n.length,e,a)}},t.prototype.update=function(e,t,r,o){return!(this.dirty==Tb||!e.sameMarkup(this.node))&&(this.updateInner(e,t,r,o),!0)},t.prototype.updateInner=function(e,t,r,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=fb},t.prototype.updateOuterDeco=function(e){if(!rf(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,r=this.dom;this.dom=si(this.dom,this.nodeDOM,qf(this.outerDeco,this.node,t),qf(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},r.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,r),t}(ma);function pi(e,t,r,o,n){return ti(o,t,e),new ed(null,e,t,r,o,o,o,n,0)}var qi=function(e){function t(t,r,o,n,i,a,s){e.call(this,t,r,o,n,i,null,a,s)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,r,o){return!(this.dirty==Tb||this.dirty!=fb&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==fb&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=fb,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,r,o){return t==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,r,o)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,r,o){var n=this.node.cut(e,r),i=document.createTextNode(n.text);return new t(this.parent,n,this.outerDeco,this.innerDeco,i,i,o)},t.prototype.markDirty=function(t,r){e.prototype.markDirty.call(this,t,r),this.dom==this.nodeDOM||0!=t&&r!=this.nodeDOM.nodeValue.length||(this.dirty=Tb)},r.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,r),t}(ed),rn=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(e){return this.dirty==fb&&this.dom.nodeName==e},r.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,r),t}(ma),sn=function(e){function t(t,r,o,n,i,a,s,$,c,l){e.call(this,t,r,o,n,i,a,s,c,l),this.spec=$}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,r,o,n){if(this.dirty==Tb)return!1;if(this.spec.update){var i=this.spec.update(t,r,o);return i&&this.updateInner(t,r,o,n),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,r,o,n)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,r,o,n){this.spec.setSelection?this.spec.setSelection(t,r,o):e.prototype.setSelection.call(this,t,r,o,n)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(ed);function ri(e,t,r){for(var o=e.firstChild,n=!1,i=0;i<t.length;i++){var a=t[i],s=a.dom;if(s.parentNode==e){for(;s!=o;)o=ui(o),n=!0;o=o.nextSibling}else n=!0,e.insertBefore(s,o);if(a instanceof pf){var $=o?o.previousSibling:e.lastChild;ri(a.contentDOM,a.children,r),o=$?$.nextSibling:e.firstChild}}for(;o;)o=ui(o),n=!0;n&&r.trackWrites==e&&(r.trackWrites=null)}function fd(e){e&&(this.nodeName=e)}fd.prototype=Object.create(null);var ec=[new fd];function qf(e,t,r){if(0==e.length)return ec;for(var o=r?ec[0]:new fd,n=[o],i=0;i<e.length;i++){var a=e[i].type.attrs;if(a)for(var s in a.nodeName&&n.push(o=new fd(a.nodeName)),a){var $=a[s];null!=$&&(r&&1==n.length&&n.push(o=new fd(t.isInline?"span":"div")),"class"==s?o.class=(o.class?o.class+" ":"")+$:"style"==s?o.style=(o.style?o.style+";":"")+$:"nodeName"!=s&&(o[s]=$))}}return n}function si(e,t,r,o){if(r==ec&&o==ec)return t;for(var n=t,i=0;i<o.length;i++){var a=o[i],s=r[i];if(i){var $=void 0;s&&s.nodeName==a.nodeName&&n!=e&&($=n.parentNode)&&$.tagName.toLowerCase()==a.nodeName?n=$:(($=document.createElement(a.nodeName)).pmIsDeco=!0,$.appendChild(n),s=ec[0],n=$)}tn(n,s||ec[0],a)}return n}function tn(e,t,r){for(var o in t)"class"==o||"style"==o||"nodeName"==o||o in r||e.removeAttribute(o);for(var n in r)"class"!=n&&"style"!=n&&"nodeName"!=n&&r[n]!=t[n]&&e.setAttribute(n,r[n]);if(t.class!=r.class){for(var i=t.class?t.class.split(" ").filter(Boolean):Ub,a=r.class?r.class.split(" ").filter(Boolean):Ub,s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var $=0;$<a.length;$++)-1==i.indexOf(a[$])&&e.classList.add(a[$])}if(t.style!=r.style){if(t.style)for(var c,l=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=l.exec(t.style);)e.style.removeProperty(c[1]);r.style&&(e.style.cssText+=r.style)}}function ti(e,t,r){return si(e,e,ec,qf(t,r,1!=e.nodeType))}function rf(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function ui(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var ub=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=un(e.node.content,e.children)};function un(e,t){for(var r=e.childCount,o=t.length,n=new Map;r>0&&o>0;o--){var i=t[o-1],a=i.node;if(a){if(a!=e.child(r-1))break;--r,n.set(i,r)}}return{index:r,matched:n}}function vn(e,t){return e.type.side-t.type.side}function wn(e,t,r,o){var n=t.locals(e),i=0;if(0!=n.length)for(var a=0,s=[],$=null,c=0;;){if(a<n.length&&n[a].to==i){for(var l=n[a++],d=void 0;a<n.length&&n[a].to==i;)(d||(d=[l])).push(n[a++]);if(d){d.sort(vn);for(var p=0;p<d.length;p++)r(d[p],c,!!$)}else r(l,c,!!$)}var u=void 0,v=void 0;if($)v=-1,u=$,$=null;else{if(!(c<e.childCount))break;v=c,u=e.child(c++)}for(var h=0;h<s.length;h++)s[h].to<=i&&s.splice(h--,1);for(;a<n.length&&n[a].from<=i&&n[a].to>i;)s.push(n[a++]);var f=i+u.nodeSize;if(u.isText){var S=f;a<n.length&&n[a].from<S&&(S=n[a].from);for(var O=0;O<s.length;O++)s[O].to<S&&(S=s[O].to);S<f&&($=u.cut(S-i),u=u.cut(0,S-i),f=S,v=-1)}o(u,s.length?u.isInline&&!u.isLeaf?s.filter(function(e){return!e.inline}):s.slice():Ub,t.forChild(i,u),v),i=f}else for(var M=0;M<e.childCount;M++){var E=e.child(M);o(E,n,t.forChild(i,E),M),i+=E.nodeSize}}function xn(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function yn(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=sb(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function zn(e,t,r,o){for(var n=0,i=0;n<e.childCount&&i<=o;){var a=e.child(n++),s=i;if(i+=a.nodeSize,a.isText){for(var $=a.text;n<e.childCount;){var c=e.child(n++);if(i+=c.nodeSize,!c.isText)break;$+=c.text}if(i>=r){var l=$.lastIndexOf(t,o-s);if(l>=0&&l+t.length+s>=r)return s+l}}}return-1}function sf(e,t,r,o,n){for(var i=[],a=0,s=0;a<e.length;a++){var $=e[a],c=s,l=s+=$.size;c>=r||l<=t?i.push($):(c<t&&i.push($.slice(0,t-c,o)),n&&(i.push(n),n=null),l>r&&i.push($.slice(r-c,$.size,o)))}return i}function vi(e,t){var r=e.root.getSelection(),o=e.state.doc;if(!r.focusNode)return null;var n=e.docView.nearestDesc(r.focusNode),i=n&&0==n.size,a=e.docView.posFromDOM(r.focusNode,r.focusOffset);if(a<0)return null;var s,$,c=o.resolve(a);if(mf(r)){for(s=c;n&&!n.node;)n=n.parent;if(n&&n.node.isAtom&&ga.isSelectable(n.node)&&n.parent&&(!n.node.isInline||!Wm(r.focusNode,r.focusOffset,n.dom))){var l=n.posBefore;$=new ga(a==l?c:o.resolve(l))}}else{var d=e.docView.posFromDOM(r.anchorNode,r.anchorOffset);if(d<0)return null;s=o.resolve(d)}$||($=uf(e,s,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1));return $}function wi(e){return e.editable?e.hasFocus():vf(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function fc(e,t){var r=e.state.selection;if(Ai(e,r),wi(e)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)Bn(e);else{var o,n,i=r.anchor,a=r.head;!xi||r instanceof ka||(r.$from.parent.inlineContent||(o=yi(e,r.from)),r.empty||r.$from.parent.inlineContent||(n=yi(e,r.to))),e.docView.setSelection(i,a,e.root,t),xi&&(o&&zi(o),n&&zi(n)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&An(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}ub.prototype.destroyBetween=function(e,t){if(e!=t){for(var r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}},ub.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ub.prototype.syncToMarks=function(e,t,r){for(var o=0,n=this.stack.length>>1,i=Math.min(n,e.length);o<i&&(o==n-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<n;)this.destroyRest(),this.top.dirty=fb,this.index=this.stack.pop(),this.top=this.stack.pop(),n--;for(;n<e.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++)if(this.top.children[s].matchesMark(e[n])){a=s;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var $=pf.create(this.top,e[n],t,r);this.top.children.splice(this.index,0,$),this.top=$,this.changed=!0}this.index=0,n++}},ub.prototype.findNodeMatch=function(e,t,r,o){var n=this.top.children,i=-1;if(o>=this.preMatch.index){for(var a=this.index;a<n.length;a++)if(n[a].matchesNode(e,t,r)){i=a;break}}else for(var s=this.index,$=Math.min(n.length,s+1);s<$;s++){var c=n[s];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},ub.prototype.updateNextNode=function(e,t,r,o,n){for(var i=this.index;i<this.top.children.length;i++){var a=this.top.children[i];if(a instanceof ed){var s=this.preMatch.matched.get(a);if(null!=s&&s!=n)return!1;var $=a.dom;if(!(this.lock&&($==this.lock||1==$.nodeType&&$.contains(this.lock.parentNode))&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Tb&&rf(t,a.outerDeco)))&&a.update(e,t,r,o))return this.destroyBetween(this.index,i),a.dom!=$&&(this.changed=!0),this.index++,!0;break}}return!1},ub.prototype.addNode=function(e,t,r,o,n){this.top.children.splice(this.index++,0,ed.create(this.top,e,t,r,o,n)),this.changed=!0},ub.prototype.placeWidget=function(e,t,r){var o=this.index<this.top.children.length?this.top.children[this.index]:null;if(!o||!o.matchesWidget(e)||e!=o.widget&&o.widget.type.toDOM.parentNode){var n=new pn(this.top,e,t,r);this.top.children.splice(this.index++,0,n),this.changed=!0}else this.index++},ub.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof pf;)e=e.children[e.children.length-1];e&&e instanceof qi&&!/\n$/.test(e.node.text)||(ca.safari&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},ub.prototype.addHackNode=function(e){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(e))this.index++;else{var t=document.createElement(e);this.top.children.splice(this.index++,0,new rn(this.top,Ub,t,null)),this.changed=!0}};var xi=ca.safari||ca.chrome&&ca.chrome_version<63;function yi(e,t){var r=e.docView.domFromPos(t,0),o=r.node,n=r.offset,i=n<o.childNodes.length?o.childNodes[n]:null,a=n?o.childNodes[n-1]:null;if(ca.safari&&i&&"false"==i.contentEditable)return tf(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return tf(i);if(a)return tf(a)}}function tf(e){return e.contentEditable="true",ca.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function zi(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function An(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var r=e.root.getSelection(),o=r.anchorNode,n=r.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){r.anchorNode==o&&r.anchorOffset==n||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout(function(){wi(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}function Bn(e){var t=e.root.getSelection(),r=document.createRange(),o=e.cursorWrapper.dom,n="IMG"==o.nodeName;n?r.setEnd(o.parentNode,ab(o)+1):r.setEnd(o,0),r.collapse(!1),t.removeAllRanges(),t.addRange(r),!n&&!e.state.selection.visible&&ca.ie&&ca.ie_version<=11&&(o.disabled=!0,o.disabled=!1)}function Ai(e,t){if(t instanceof ga){var r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(Bi(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else Bi(e)}function Bi(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function uf(e,t,r,o){return e.someProp("createSelectionBetween",function(o){return o(e,t,r)})||ka.between(t,r,o)}function Cn(e){return(!e.editable||e.root.activeElement==e.dom)&&vf(e)}function vf(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(r){return!1}}function Dn(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),r=e.root.getSelection();return Td(t.node,t.offset,r.anchorNode,r.anchorOffset)}function wf(e,t){var r=e.selection,o=r.$anchor,n=r.$head,i=t>0?o.max(n):o.min(n),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&ha.findFrom(a,t)}function gc(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ci(e,t,r){var o=e.state.selection;if(!(o instanceof ka)){if(o instanceof ga&&o.node.isInline)return gc(e,new ka(t>0?o.$to:o.$from));var n=wf(e.state,t);return!!n&&gc(e,n)}if(!o.empty||r.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var i=wf(e.state,t);return!!(i&&i instanceof ga)&&gc(e,i)}if(!(ca.mac&&r.indexOf("m")>-1)){var a,s=o.$head,$=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!$||$.isText)return!1;var c=t<0?s.pos-$.nodeSize:s.pos;return!!($.isAtom||(a=e.docView.descAt(c))&&!a.contentDOM)&&(ga.isSelectable($)?gc(e,new ga(t<0?e.state.doc.resolve(s.pos-$.nodeSize):s)):!!ca.webkit&&gc(e,new ka(e.state.doc.resolve(t<0?c:c+$.nodeSize))))}}function Wd(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function gd(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function xf(e){var t=e.root.getSelection(),r=t.focusNode,o=t.focusOffset;if(r){var n,i,a=!1;for(ca.gecko&&1==r.nodeType&&o<Wd(r)&&gd(r.childNodes[o])&&(a=!0);;)if(o>0){if(1!=r.nodeType)break;var s=r.childNodes[o-1];if(gd(s))n=r,i=--o;else{if(3!=s.nodeType)break;o=(r=s).nodeValue.length}}else{if(Di(r))break;for(var $=r.previousSibling;$&&gd($);)n=r.parentNode,i=ab($),$=$.previousSibling;if($)o=Wd(r=$);else{if((r=r.parentNode)==e.dom)break;o=0}}a?zf(e,t,r,o):n&&zf(e,t,n,i)}}function yf(e){var t=e.root.getSelection(),r=t.focusNode,o=t.focusOffset;if(r){for(var n,i,a=Wd(r);;)if(o<a){if(1!=r.nodeType)break;if(!gd(r.childNodes[o]))break;n=r,i=++o}else{if(Di(r))break;for(var s=r.nextSibling;s&&gd(s);)n=s.parentNode,i=ab(s)+1,s=s.nextSibling;if(s)o=0,a=Wd(r=s);else{if((r=r.parentNode)==e.dom)break;o=a=0}}n&&zf(e,t,n,i)}}function Di(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function zf(e,t,r,o){if(mf(t)){var n=document.createRange();n.setEnd(r,o),n.setStart(r,o),t.removeAllRanges(),t.addRange(n)}else t.extend&&t.extend(r,o);e.domObserver.setCurSelection();var i=e.state;setTimeout(function(){e.state==i&&fc(e)},50)}function Ei(e,t,r){var o=e.state.selection;if(o instanceof ka&&!o.empty||r.indexOf("s")>-1)return!1;if(ca.mac&&r.indexOf("m")>-1)return!1;var n=o.$from,i=o.$to;if(!n.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=wf(e.state,t);if(a&&a instanceof ga)return gc(e,a)}if(!n.parent.inlineContent){var s=t<0?n:i,$=o instanceof Gb?ha.near(s,t):ha.findFrom(s,t);return!!$&&gc(e,$)}return!1}function Fi(e,t){if(!(e.state.selection instanceof ka))return!0;var r=e.state.selection,o=r.$head,n=r.$anchor,i=r.empty;if(!o.sameParent(n))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!o.textOffset&&(t<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var s=e.state.tr;return t<0?s.delete(o.pos-a.nodeSize,o.pos):s.delete(o.pos,o.pos+a.nodeSize),e.dispatch(s),!0}return!1}function Gi(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function En(e){if(ca.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),r=t.focusNode,o=t.focusOffset;if(r&&1==r.nodeType&&0==o&&r.firstChild&&"false"==r.firstChild.contentEditable){var n=r.firstChild;Gi(e,n,!0),setTimeout(function(){return Gi(e,n,!1)},20)}}}function Fn(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Gn(e,t){var r=t.keyCode,o=Fn(t);return 8==r||ca.mac&&72==r&&"c"==o?Fi(e,-1)||xf(e):46==r||ca.mac&&68==r&&"c"==o?Fi(e,1)||yf(e):13==r||27==r||(37==r?Ci(e,-1,o)||xf(e):39==r?Ci(e,1,o)||yf(e):38==r?Ei(e,-1,o)||xf(e):40==r?En(e)||Ei(e,1,o)||yf(e):o==(ca.mac?"m":"c")&&(66==r||73==r||89==r||90==r))}function Hn(e,t,r){var o=e.docView.parseRange(t,r),n=o.node,i=o.fromOffset,a=o.toOffset,s=o.from,$=o.to,c=e.root.getSelection(),l=null,d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(l=[{node:d,offset:c.anchorOffset}],mf(c)||l.push({node:c.focusNode,offset:c.focusOffset})),ca.chrome&&8===e.lastKeyCode)for(var p=a;p>i;p--){var u=n.childNodes[p-1],v=u.pmViewDesc;if("BR"==u.nodeName&&!v){a=p;break}if(!v||v.size)break}var h=e.state.doc,f=e.someProp("domParser")||eb.fromSchema(e.state.schema),S=h.resolve(s),O=null,M=f.parse(n,{topNode:S.parent,topMatch:S.parent.contentMatchAt(S.index()),topOpen:!0,from:i,to:a,preserveWhitespace:!S.parent.type.spec.code||"full",editableContent:!0,findPositions:l,ruleFromNode:In,context:S});if(l&&null!=l[0].pos){var E=l[0].pos,m=l[1]&&l[1].pos;null==m&&(m=E),O={anchor:E+s,head:m+s}}return{doc:M,sel:O,from:s,to:$}}function In(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(ca.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}if(e.parentNode.lastChild==e||ca.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Jn(e,t,r,o,n){if(t<0){var i=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,a=vi(e,i);if(a&&!e.state.selection.eq(a)){var s=e.state.tr.setSelection(a);"pointer"==i?s.setMeta("pointer",!0):"key"==i&&s.scrollIntoView(),e.dispatch(s)}}else{var $=e.state.doc.resolve(t),c=$.sharedDepth(r);t=$.before(c+1),r=e.state.doc.resolve(r).after(c+1);var l=e.state.selection,d=Hn(e,t,r);if(ca.chrome&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from){var p=e.cursorWrapper.deco.type.toDOM.nextSibling,u=p&&p.nodeValue?p.nodeValue.length:1;d.sel={anchor:d.sel.anchor+u,head:d.sel.anchor+u}}var v,h,f=e.state.doc,S=f.slice(d.from,d.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(v=e.state.selection.to,h="end"):(v=e.state.selection.from,h="start"),e.lastKeyCode=null;var O=Mn(S.content,d.doc.content,d.from,v,h);if(!O){if(!(o&&l instanceof ka&&!l.empty&&l.$head.sameParent(l.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if((ca.ios&&e.lastIOSEnter>Date.now()-225||ca.android)&&n.some(function(e){return"DIV"==e.nodeName||"P"==e.nodeName})&&e.someProp("handleKeyDown",function(t){return t(e,Bc(13,"Enter"))}))return void(e.lastIOSEnter=0);if(d.sel){var M=Hi(e,e.state.doc,d.sel);M&&!M.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(M))}return}O={start:l.from,endA:l.to,endB:l.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&O.start==O.endB&&e.state.selection instanceof ka&&(O.start>e.state.selection.from&&O.start<=e.state.selection.from+2?O.start=e.state.selection.from:O.endA<e.state.selection.to&&O.endA>=e.state.selection.to-2&&(O.endB+=e.state.selection.to-O.endA,O.endA=e.state.selection.to)),ca.ie&&ca.ie_version<=11&&O.endB==O.start+1&&O.endA==O.start&&O.start>d.from&&" \xA0"==d.doc.textBetween(O.start-d.from-1,O.start-d.from+1)&&(O.start--,O.endA--,O.endB--);var E,m=d.doc.resolveNoCache(O.start-d.from),g=d.doc.resolveNoCache(O.endB-d.from),y=m.sameParent(g)&&m.parent.inlineContent;if((ca.ios&&e.lastIOSEnter>Date.now()-225&&(!y||n.some(function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))||!y&&m.pos<d.doc.content.size&&(E=ha.findFrom(d.doc.resolve(m.pos+1),1,!0))&&E.head==g.pos)&&e.someProp("handleKeyDown",function(t){return t(e,Bc(13,"Enter"))}))e.lastIOSEnter=0;else if(e.state.selection.anchor>O.start&&Ln(f,O.start,O.endA,m,g)&&e.someProp("handleKeyDown",function(t){return t(e,Bc(8,"Backspace"))}))ca.android&&ca.chrome&&e.domObserver.suppressSelectionUpdates();else{ca.chrome&&ca.android&&O.toB==O.from&&(e.lastAndroidDelete=Date.now()),ca.android&&!y&&m.start()!=g.start()&&0==g.parentOffset&&m.depth==g.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==O.endA&&(O.endB-=2,g=d.doc.resolveNoCache(O.endB-d.from),setTimeout(function(){e.someProp("handleKeyDown",function(t){return t(e,Bc(13,"Enter"))})},20));var D,b,w,N,C=O.start,x=O.endA;if(y)if(m.pos==g.pos)ca.ie&&ca.ie_version<=11&&0==m.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(function(){return fc(e)},20)),D=e.state.tr.delete(C,x),b=f.resolve(O.start).marksAcross(f.resolve(O.endA));else if(O.endA==O.endB&&(N=f.resolve(O.start))&&(w=Kn(m.parent.content.cut(m.parentOffset,g.parentOffset),N.parent.content.cut(N.parentOffset,O.endA-N.start()))))D=e.state.tr,"add"==w.type?D.addMark(C,x,w.mark):D.removeMark(C,x,w.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){var T=m.parent.textBetween(m.parentOffset,g.parentOffset);if(e.someProp("handleTextInput",function(t){return t(e,C,x,T)}))return;D=e.state.tr.insertText(T,C,x)}if(D||(D=e.state.tr.replace(C,x,d.doc.slice(O.start-d.from,O.endB-d.from))),d.sel){var k=Hi(e,D.doc,d.sel);k&&!(ca.chrome&&ca.android&&e.composing&&k.empty&&(O.start!=O.endB||e.lastAndroidDelete<Date.now()-100)&&(k.head==C||k.head==D.mapping.map(x)-1)||ca.ie&&k.empty&&k.head==C)&&D.setSelection(k)}b&&D.ensureMarks(b),e.dispatch(D.scrollIntoView())}}}function Hi(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:uf(e,t.resolve(r.anchor),t.resolve(r.head))}function Kn(e,t){for(var r,o,n,i=e.firstChild.marks,a=t.firstChild.marks,s=i,$=a,c=0;c<a.length;c++)s=a[c].removeFromSet(s);for(var l=0;l<i.length;l++)$=i[l].removeFromSet($);if(1==s.length&&0==$.length)o=s[0],r="add",n=function(e){return e.mark(o.addToSet(e.marks))};else{if(0!=s.length||1!=$.length)return null;o=$[0],r="remove",n=function(e){return e.mark(o.removeFromSet(e.marks))}}for(var d=[],p=0;p<t.childCount;p++)d.push(n(t.child(p)));if(ba.from(d).eq(e))return{mark:o,type:r}}function Ln(e,t,r,o,n){if(!o.parent.isTextblock||r-t<=n.pos-o.pos||Af(o,!0,!1)<n.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=e.resolve(Af(i,!0,!0));return!(!a.parent.isTextblock||a.pos>r||Af(a,!0,!1)<r)&&o.parent.content.cut(o.parentOffset).eq(a.parent.content)}function Af(e,t,r){for(var o=e.depth,n=t?e.end():e.pos;o>0&&(t||e.indexAfter(o)==e.node(o).childCount);)o--,n++,t=!1;if(r)for(var i=e.node(o).maybeChild(e.indexAfter(o));i&&!i.isLeaf;)i=i.firstChild,n++;return n}function Mn(e,t,r,o,n){var i=e.findDiffStart(t,r);if(null==i)return null;var a=e.findDiffEnd(t,r+e.size,r+t.size),s=a.a,$=a.b;"end"==n&&(o-=s+Math.max(0,i-Math.min(s,$))-i);if(s<i&&e.size<t.size)$=(i-=o<=i&&o>=s?i-o:0)+($-s),s=i;else if($<i){s=(i-=o<=i&&o>=$?i-o:0)+(s-$),$=i}return{start:i,endA:s,endB:$}}function Ii(e,t){for(var r=[],o=t.content,n=t.openStart,i=t.openEnd;n>1&&i>1&&1==o.childCount&&1==o.firstChild.childCount;){n--,i--;var a=o.firstChild;r.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),o=a.content}var s=e.someProp("clipboardSerializer")||Da.fromSchema(e.state.schema),$=Oi(),c=$.createElement("div");c.appendChild(s.serializeFragment(o,{document:$}));for(var l,d=c.firstChild;d&&1==d.nodeType&&(l=Ni[d.nodeName.toLowerCase()]);){for(var p=l.length-1;p>=0;p--){for(var u=$.createElement(l[p]);c.firstChild;)u.appendChild(c.firstChild);c.appendChild(u)}d=c.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",n+" "+i+" "+JSON.stringify(r)),{dom:c,text:e.someProp("clipboardTextSerializer",function(e){return e(t)})||t.content.textBetween(0,t.content.size,"\n\n")}}function Ji(e,t,r,o,n){var i,a,s=n.parent.type.spec.code;if(!r&&!t)return null;var $=t&&(o||s||!r);if($){if(e.someProp("transformPastedText",function(e){t=e(t,s||o)}),s)return new da(ba.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0);var c=e.someProp("clipboardTextParser",function(e){return e(t,n,o)});c?a=c:(i=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach(function(e){i.appendChild(document.createElement("p")).textContent=e}))}else e.someProp("transformPastedHTML",function(e){r=e(r)}),i=Qn(r);var l=i&&i.querySelector("[data-pm-slice]"),d=l&&/^(\d+) (\d+) (.*)/.exec(l.getAttribute("data-pm-slice"));if(!a){var p=e.someProp("clipboardParser")||e.someProp("domParser")||eb.fromSchema(e.state.schema);a=p.parseSlice(i,{preserveWhitespace:!(!$&&!d),context:n})}return a=d?Rn(On(a,+d[1],+d[2]),d[3]):da.maxOpen(Nn(a.content,n),!1),e.someProp("transformPasted",function(e){a=e(a)}),a}function Nn(e,t){if(e.childCount<2)return e;for(var r=function(r){var o=t.node(r).contentMatchAt(t.index(r)),n=void 0,i=[];if(e.forEach(function(e){if(i){var t,r=o.findWrapping(e.type);if(!r)return i=null;if(t=i.length&&n.length&&Li(r,n,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=Mi(i[i.length-1],n.length));var a=Ki(e,r);i.push(a),o=o.matchType(a.type,a.attrs),n=r}}}),i)return{v:ba.from(i)}},o=t.depth;o>=0;o--){var n=r(o);if(n)return n.v}return e}function Ki(e,t,r){void 0===r&&(r=0);for(var o=t.length-1;o>=r;o--)e=t[o].create(null,ba.from(e));return e}function Li(e,t,r,o,n){if(n<e.length&&n<t.length&&e[n]==t[n]){var i=Li(e,t,r,o.lastChild,n+1);if(i)return o.copy(o.content.replaceChild(o.childCount-1,i));if(o.contentMatchAt(o.childCount).matchType(n==e.length-1?r.type:e[n+1]))return o.copy(o.content.append(ba.from(Ki(r,e,n+1))))}}function Mi(e,t){if(0==t)return e;var r=e.content.replaceChild(e.childCount-1,Mi(e.lastChild,t-1)),o=e.contentMatchAt(e.childCount).fillBefore(ba.empty,!0);return e.copy(r.append(o))}function Bf(e,t,r,o,n,i){var a=t<0?e.firstChild:e.lastChild,s=a.content;return n<o-1&&(s=Bf(s,t,r,o,n+1,i)),n>=r&&(s=t<0?a.contentMatchAt(0).fillBefore(s,e.childCount>1||i<=n).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(ba.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function On(e,t,r){return t<e.openStart&&(e=new da(Bf(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new da(Bf(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}var Ni={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Pn=null;function Oi(){return Pn||(Pn=document.implementation.createHTMLDocument("title"))}function Qn(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var r,o=Oi().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(e);if((r=n&&Ni[n[1].toLowerCase()])&&(e=r.map(function(e){return"<"+e+">"}).join("")+e+r.map(function(e){return"</"+e+">"}).reverse().join("")),o.innerHTML=e,r)for(var i=0;i<r.length;i++)o=o.querySelector(r[i])||o;return o}function Rn(e,t){if(!e.size)return e;var r,o=e.content.firstChild.type.schema;try{r=JSON.parse(t)}catch(c){return e}for(var n=e.content,i=e.openStart,a=e.openEnd,s=r.length-2;s>=0;s-=2){var $=o.nodes[r[s]];if(!$||$.hasRequiredAttrs())break;n=ba.from($.create(r[s+1],n)),i++,a++}return new da(n,i,a)}var Sn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Cf=ca.ie&&ca.ie_version<=11,Df=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Df.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Df.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Ua=function(e,t){var r=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver(function(e){for(var t=0;t<e.length;t++)r.queue.push(e[t]);ca.ie&&ca.ie_version<=11&&e.some(function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length})?r.flushSoon():r.flush()}),this.currentSelection=new Df,Cf&&(this.onCharData=function(e){r.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Ua.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){e.flushingSoon=-1,e.flush()},20))},Ua.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Ua.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Sn),Cf&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Ua.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var r=0;r<t.length;r++)this.queue.push(t[r]);window.setTimeout(function(){return e.flush()},20)}this.observer.disconnect()}Cf&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Ua.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Ua.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Ua.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return e.suppressingSelectionUpdates=!1},50)},Ua.prototype.onSelectionChange=function(){if(Cn(this.view)){if(this.suppressingSelectionUpdates)return fc(this.view);if(ca.ie&&ca.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&Td(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Ua.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Ua.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Ua.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&vf(this.view)&&!this.ignoreSelectionChange(t),o=-1,n=-1,i=!1,a=[];if(this.view.editable)for(var s=0;s<e.length;s++){var $=this.registerMutation(e[s],a);$&&(o=o<0?$.from:Math.min($.from,o),n=n<0?$.to:Math.max($.to,n),$.typeOver&&(i=!0))}if(ca.gecko&&a.length>1){var c=a.filter(function(e){return"BR"==e.nodeName});if(2==c.length){var l=c[0],d=c[1];l.parentNode&&l.parentNode.parentNode==d.parentNode?d.remove():l.remove()}}(o>-1||r)&&(o>-1&&(this.view.docView.markDirty(o,n),Un(this.view)),this.handleDOMChange(o,n,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||fc(this.view),this.currentSelection.set(t))}},Ua.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var r=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(r==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!r||r.ignoreMutation(e))return null;if("childList"==e.type){for(var o=0;o<e.addedNodes.length;o++)t.push(e.addedNodes[o]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};var n=e.previousSibling,i=e.nextSibling;if(ca.ie&&ca.ie_version<=11&&e.addedNodes.length)for(var a=0;a<e.addedNodes.length;a++){var s=e.addedNodes[a],$=s.previousSibling,c=s.nextSibling;(!$||Array.prototype.indexOf.call(e.addedNodes,$)<0)&&(n=$),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(i=c)}var l=n&&n.parentNode==e.target?ab(n)+1:0,d=r.localPosFromDOM(e.target,l,-1),p=i&&i.parentNode==e.target?ab(i):e.target.childNodes.length;return{from:d,to:r.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Tn=!1;function Un(e){Tn||(Tn=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var Pa={},Ka={};function Vn(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Ua(e,function(t,r,o,n){return Jn(e,t,r,o,n)}),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var r=Pa[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!Xn(e,t)||Ff(e,t)||!e.editable&&t.type in Ka||r(e,t)})};for(var r in Pa)t(r);ca.safari&&e.dom.addEventListener("input",function(){return null}),Ef(e)}function hc(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Wn(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}function Ef(e){e.someProp("handleDOMEvents",function(t){for(var r in t)e.eventHandlers[r]||e.dom.addEventListener(r,e.eventHandlers[r]=function(t){return Ff(e,t)})})}function Ff(e,t){return e.someProp("handleDOMEvents",function(r){var o=r[t.type];return!!o&&(o(e,t)||t.defaultPrevented)})}function Xn(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var r=t.target;r!=e.dom;r=r.parentNode)if(!r||11==r.nodeType||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}function Yn(e,t){Ff(e,t)||!Pa[t.type]||!e.editable&&t.type in Ka||Pa[t.type](e,t)}function Xd(e){return{left:e.clientX,top:e.clientY}}function Zn(e,t){var r=t.x-e.clientX,o=t.y-e.clientY;return r*r+o*o<100}function Gf(e,t,r,o,n){if(-1==o)return!1;for(var i=e.state.doc.resolve(o),a=function(o){if(e.someProp(t,function(t){return o>i.depth?t(e,r,i.nodeAfter,i.before(o),n,!0):t(e,r,i.node(o),i.before(o),n,!1)}))return{v:!0}},s=i.depth+1;s>0;s--){var $=a(s);if($)return $.v}return!1}function Cc(e,t,r){e.focused||e.focus();var o=e.state.tr.setSelection(t);"pointer"==r&&o.setMeta("pointer",!0),e.dispatch(o)}function $n(e,t){if(-1==t)return!1;var r=e.state.doc.resolve(t),o=r.nodeAfter;return!!(o&&o.isAtom&&ga.isSelectable(o))&&(Cc(e,new ga(r),"pointer"),!0)}function _n(e,t){if(-1==t)return!1;var r,o,n=e.state.selection;n instanceof ga&&(r=n.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;a>0;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(ga.isSelectable(s)){o=r&&n.$from.depth>0&&a>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?i.before(n.$from.depth):i.before(a);break}}return null!=o&&(Cc(e,ga.create(e.state.doc,o),"pointer"),!0)}function ao(e,t,r,o,n){return Gf(e,"handleClickOn",t,r,o)||e.someProp("handleClick",function(r){return r(e,t,o)})||(n?_n(e,r):$n(e,r))}function bo(e,t,r,o){return Gf(e,"handleDoubleClickOn",t,r,o)||e.someProp("handleDoubleClick",function(r){return r(e,t,o)})}function co(e,t,r,o){return Gf(e,"handleTripleClickOn",t,r,o)||e.someProp("handleTripleClick",function(r){return r(e,t,o)})||eo(e,r,o)}function eo(e,t,r){if(0!=r.button)return!1;var o=e.state.doc;if(-1==t)return!!o.inlineContent&&(Cc(e,ka.create(o,0,o.content.size),"pointer"),!0);for(var n=o.resolve(t),i=n.depth+1;i>0;i--){var a=i>n.depth?n.nodeAfter:n.node(i),s=n.before(i);if(a.inlineContent)Cc(e,ka.create(o,s+1,s+1+a.content.size),"pointer");else{if(!ga.isSelectable(a))continue;Cc(e,ga.create(o,s),"pointer")}return!0}}function Hf(e){return Zd(e)}Ka.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!Qi(e,t))if(229!=t.keyCode&&e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!ca.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",function(r){return r(e,t)})||Gn(e,t)?t.preventDefault():hc(e,"key");else{var r=Date.now();e.lastIOSEnter=r,e.lastIOSEnterFallbackTimeout=setTimeout(function(){e.lastIOSEnter==r&&(e.someProp("handleKeyDown",function(t){return t(e,Bc(13,"Enter"))}),e.lastIOSEnter=0)},200)}},Ka.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Ka.keypress=function(e,t){if(!(Qi(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||ca.mac&&t.metaKey))if(e.someProp("handleKeyPress",function(r){return r(e,t)}))t.preventDefault();else{var r=e.state.selection;if(!(r instanceof ka&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(t.charCode);e.someProp("handleTextInput",function(t){return t(e,r.$from.pos,r.$to.pos,o)})||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}}};var Pi=ca.mac?"metaKey":"ctrlKey";Pa.mousedown=function(e,t){e.shiftKey=t.shiftKey;var r=Hf(e),o=Date.now(),n="singleClick";o-e.lastClick.time<500&&Zn(t,e.lastClick)&&!t[Pi]&&("singleClick"==e.lastClick.type?n="doubleClick":"doubleClick"==e.lastClick.type&&(n="tripleClick")),e.lastClick={time:o,x:t.clientX,y:t.clientY,type:n};var i=e.posAtCoords(Xd(t));i&&("singleClick"==n?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new Yd(e,i,t,r)):("doubleClick"==n?bo:co)(e,i.pos,i.inside,t)?t.preventDefault():hc(e,"pointer"))};var Yd=function(e,t,r,o){var n,i,a=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=r,this.flushed=o,this.selectNode=r[Pi],this.allowDefault=r.shiftKey||0!=r.button,t.inside>-1)n=e.state.doc.nodeAt(t.inside),i=t.inside;else{var s=e.state.doc.resolve(t.pos);n=s.parent,i=s.depth?s.before():0}this.mightDrag=null;var $=o?null:r.target,c=$?e.docView.nearestDesc($,!0):null;this.target=c?c.dom:null;var l=e.state.selection;(0==r.button&&n.type.spec.draggable&&!1!==n.type.spec.selectable||l instanceof ga&&l.from<=i&&l.to>i)&&(this.mightDrag={node:n,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&ca.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){a.view.mouseDown==a&&a.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),hc(e,"pointer")};function Qi(e,t){return!!e.composing||!!(ca.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}Yd.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Yd.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Xd(e))),this.allowDefault||!t?hc(this.view,"pointer"):ao(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||ca.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||ca.chrome&&!(this.view.state.selection instanceof ka)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2?(Cc(this.view,ha.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):hc(this.view,"pointer")}},Yd.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),hc(this.view,"pointer"),0==e.buttons&&this.done()},Pa.touchdown=function(e){Hf(e),hc(e,"pointer")},Pa.contextmenu=function(e){return Hf(e)};var fo=ca.android?5e3:-1;function Ri(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout(function(){return Zd(e)},t))}function Si(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function Zd(e,t){if(e.domObserver.forceFlush(),Si(e),t||e.docView.dirty){var r=vi(e);return r&&!r.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(r)):e.updateState(e.state),!0}return!1}function go(e,t){if(e.dom.parentNode){var r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),n=document.createRange();n.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(n),setTimeout(function(){r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}}Ka.compositionstart=Ka.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,r=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(function(e){return!1===e.type.spec.inclusive})))e.markCursor=e.state.storedMarks||r.marks(),Zd(e,!0),e.markCursor=null;else if(Zd(e),ca.gecko&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length)for(var o=e.root.getSelection(),n=o.focusNode,i=o.focusOffset;n&&1==n.nodeType&&0!=i;){var a=i<0?n.lastChild:n.childNodes[i-1];if(!a)break;if(3==a.nodeType){o.collapse(a,a.nodeValue.length);break}n=a,i=-1}e.composing=!0}Ri(e,fo)},Ka.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Ri(e,20))};var Dc=ca.ie&&ca.ie_version<15||ca.ios&&ca.webkit_version<604;function ho(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function io(e,t){if(e.dom.parentNode){var r=e.shiftKey||e.state.selection.$from.parent.type.spec.code,o=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout(function(){e.focus(),o.parentNode&&o.parentNode.removeChild(o),r?If(e,o.value,null,t):If(e,o.textContent,o.innerHTML,t)},50)}}function If(e,t,r,o){var n=Ji(e,t,r,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",function(t){return t(e,o,n||da.empty)}))return!0;if(!n)return!1;var i=ho(n),a=i?e.state.tr.replaceSelectionWith(i,e.shiftKey):e.state.tr.replaceSelection(n);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Pa.copy=Ka.cut=function(e,t){var r=e.state.selection,o="cut"==t.type;if(!r.empty){var n=Dc?null:t.clipboardData,i=Ii(e,r.content()),a=i.dom,s=i.text;n?(t.preventDefault(),n.clearData(),n.setData("text/html",a.innerHTML),n.setData("text/plain",s)):go(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Ka.paste=function(e,t){var r=Dc?null:t.clipboardData;r&&If(e,r.getData("text/plain"),r.getData("text/html"),t)?t.preventDefault():io(e,t)};var jo=function(e,t){this.slice=e,this.move=t},Ti=ca.mac?"altKey":"ctrlKey";for(var Ui in Pa.dragstart=function(e,t){var r=e.mouseDown;if(r&&r.done(),t.dataTransfer){var o=e.state.selection,n=o.empty?null:e.posAtCoords(Xd(t));if(n&&n.pos>=o.from&&n.pos<=(o instanceof ga?o.to-1:o.to));else if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(ga.create(e.state.doc,r.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(ga.create(e.state.doc,i.posBefore)))}var a=e.state.selection.content(),s=Ii(e,a),$=s.dom,c=s.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Dc?"Text":"text/html",$.innerHTML),t.dataTransfer.effectAllowed="copyMove",Dc||t.dataTransfer.setData("text/plain",c),e.dragging=new jo(a,!t[Ti])}},Pa.dragend=function(e){var t=e.dragging;window.setTimeout(function(){e.dragging==t&&(e.dragging=null)},50)},Ka.dragover=Ka.dragenter=function(e,t){return t.preventDefault()},Ka.drop=function(e,t){var r=e.dragging;if(e.dragging=null,t.dataTransfer){var o=e.posAtCoords(Xd(t));if(o){var n=e.state.doc.resolve(o.pos);if(n){var i=r&&r.slice;i?e.someProp("transformPasted",function(e){i=e(i)}):i=Ji(e,t.dataTransfer.getData(Dc?"Text":"text/plain"),Dc?null:t.dataTransfer.getData("text/html"),!1,n);var a=r&&!t[Ti];if(e.someProp("handleDrop",function(r){return r(e,t,i||da.empty,a)}))t.preventDefault();else if(i){t.preventDefault();var s=i?Uh(e.state.doc,n.pos,i):n.pos;null==s&&(s=n.pos);var $=e.state.tr;a&&$.deleteSelection();var c=$.mapping.map(s),l=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,d=$.doc;if(l?$.replaceRangeWith(c,c,i.content.firstChild):$.replaceRange(c,c,i),!$.doc.eq(d)){var p=$.doc.resolve(c);if(l&&ga.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))$.setSelection(new ga(p));else{var u=$.mapping.map(s);$.mapping.maps[$.mapping.maps.length-1].forEach(function(e,t,r,o){return u=o}),$.setSelection(uf(e,p,$.doc.resolve(u)))}e.focus(),e.dispatch($.setMeta("uiEvent","drop"))}}}}}},Pa.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&fc(e)},20))},Pa.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},Pa.beforeinput=function(e,t){if(ca.chrome&&ca.android&&"deleteContentBackward"==t.inputType){var r=e.domChangeCount;setTimeout(function(){if(e.domChangeCount==r&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",function(t){return t(e,Bc(8,"Backspace"))}))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}},50)}},Ka)Pa[Ui]=Ka[Ui];function hd(e,t){if(e==t)return!0;for(var r in e)if(e[r]!==t[r])return!1;for(var o in t)if(!(o in e))return!1;return!0}var id=function(e,t){this.spec=t||Ec,this.side=this.spec.side||0,this.toDOM=e};id.prototype.map=function(e,t,r,o){var n=e.mapResult(t.from+o,this.side<0?-1:1),i=n.pos;return n.deleted?null:new wa(i-r,i-r,this)},id.prototype.valid=function(){return!0},id.prototype.eq=function(e){return this==e||e instanceof id&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&hd(this.spec,e.spec))};var gb=function(e,t){this.spec=t||Ec,this.attrs=e};gb.prototype.map=function(e,t,r,o){var n=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-r;return n>=i?null:new wa(n,i,this)},gb.prototype.valid=function(e,t){return t.from<t.to},gb.prototype.eq=function(e){return this==e||e instanceof gb&&hd(this.attrs,e.attrs)&&hd(this.spec,e.spec)},gb.is=function(e){return e.type instanceof gb};var jd=function(e,t){this.spec=t||Ec,this.attrs=e};jd.prototype.map=function(e,t,r,o){var n=e.mapResult(t.from+o,1);if(n.deleted)return null;var i=e.mapResult(t.to+o,-1);return i.deleted||i.pos<=n.pos?null:new wa(n.pos-r,i.pos-r,this)},jd.prototype.valid=function(e,t){var r=e.content.findIndex(t.from),o=r.index,n=r.offset;return n==t.from&&n+e.child(o).nodeSize==t.to},jd.prototype.eq=function(e){return this==e||e instanceof jd&&hd(this.attrs,e.attrs)&&hd(this.spec,e.spec)};var wa=function(e,t,r){this.from=e,this.to=t,this.type=r},Jf={spec:{configurable:!0},inline:{configurable:!0}};wa.prototype.copy=function(e,t){return new wa(e,t,this.type)},wa.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},wa.prototype.map=function(e,t,r){return this.type.map(e,this,t,r)},wa.widget=function(e,t,r){return new wa(e,e,new id(t,r))},wa.inline=function(e,t,r,o){return new wa(e,t,new gb(r,o))},wa.node=function(e,t,r,o){return new wa(e,t,new jd(r,o))},Jf.spec.get=function(){return this.type.spec},Jf.inline.get=function(){return this.type instanceof gb},Object.defineProperties(wa.prototype,Jf);var $d=[],Ec={},la=function(e,t){this.local=e&&e.length?e:$d,this.children=t&&t.length?t:$d};la.create=function(e,t){return t.length?_d(t,e,0,Ec):ya},la.prototype.find=function(e,t,r){var o=[];return this.findInner(null==e?0:e,null==t?1e9:t,o,0,r),o},la.prototype.findInner=function(e,t,r,o,n){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!n||n(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var $=this.children[s]+1;this.children[s+2].findInner(e-$,t-$,r,o+$,n)}},la.prototype.map=function(e,t,r){return this==ya||0==e.maps.length?this:this.mapInner(e,t,0,0,r||Ec)},la.prototype.mapInner=function(e,t,r,o,n){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(e,r,o);s&&s.type.valid(t,s)?(i||(i=[])).push(s):n.onRemove&&n.onRemove(this.local[a].spec)}return this.children.length?ko(this.children,i,e,t,r,o,n):i?new la(i.sort(ic)):ya},la.prototype.add=function(e,t){return t.length?this==ya?la.create(e,t):this.addInner(e,t,0):this},la.prototype.addInner=function(e,t,r){var o,n=this,i=0;e.forEach(function(e,a){var s,$=a+r;if(s=Wi(t,e,$)){for(o||(o=n.children.slice());i<o.length&&o[i]<a;)i+=3;o[i]==a?o[i+2]=o[i+2].addInner(e,s,$+1):o.splice(i,0,a,a+e.nodeSize,_d(s,e,$+1,Ec)),i+=3}});for(var a=Vi(i?Xi(t):t,-r),s=0;s<a.length;s++)a[s].type.valid(e,a[s])||a.splice(s--,1);return new la(a.length?this.local.concat(a).sort(ic):this.local,o||this.children)},la.prototype.remove=function(e){return 0==e.length||this==ya?this:this.removeInner(e,0)},la.prototype.removeInner=function(e,t){for(var r=this.children,o=this.local,n=0;n<r.length;n+=3){for(var i=void 0,a=r[n]+t,s=r[n+1]+t,$=0,c=void 0;$<e.length;$++)(c=e[$])&&c.from>a&&c.to<s&&(e[$]=null,(i||(i=[])).push(c));if(i){r==this.children&&(r=this.children.slice());var l=r[n+2].removeInner(i,a+1);l!=ya?r[n+2]=l:(r.splice(n,3),n-=3)}}if(o.length)for(var d=0,p=void 0;d<e.length;d++)if(p=e[d])for(var u=0;u<o.length;u++)o[u].eq(p,t)&&(o==this.local&&(o=this.local.slice()),o.splice(u--,1));return r==this.children&&o==this.local?this:o.length||r.length?new la(o,r):ya},la.prototype.forChild=function(e,t){if(this==ya)return this;if(t.isLeaf)return la.empty;for(var r,o,n=0;n<this.children.length;n+=3)if(this.children[n]>=e){this.children[n]==e&&(r=this.children[n+2]);break}for(var i=e+1,a=i+t.content.size,s=0;s<this.local.length;s++){var $=this.local[s];if($.from<a&&$.to>i&&$.type instanceof gb){var c=Math.max(i,$.from)-i,l=Math.min(a,$.to)-i;c<l&&(o||(o=[])).push($.copy(c,l))}}if(o){var d=new la(o.sort(ic));return r?new vb([d,r]):d}return r||ya},la.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof la)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0},la.prototype.locals=function(e){return Kf(this.localsInner(e))},la.prototype.localsInner=function(e){if(this==ya)return $d;if(e.inlineContent||!this.local.some(gb.is))return this.local;for(var t=[],r=0;r<this.local.length;r++)this.local[r].type instanceof gb||t.push(this.local[r]);return t};var ya=new la;la.empty=ya,la.removeOverlap=Kf;var vb=function(e){this.members=e};function ko(e,t,r,o,n,i,a){for(var s=e.slice(),$=function(e,t,r,o){for(var a=0;a<s.length;a+=3){var $=s[a+1],c=void 0;-1==$||e>$+i||(t>=s[a]+i?s[a+1]=-1:r>=n&&(c=o-r-(t-e))&&(s[a]+=c,s[a+1]+=c))}},c=0;c<r.maps.length;c++)r.maps[c].forEach($);for(var l=!1,d=0;d<s.length;d+=3)if(-1==s[d+1]){var p=r.map(e[d]+i),u=p-n;if(u<0||u>=o.content.size){l=!0;continue}var v=r.map(e[d+1]+i,-1)-n,h=o.content.findIndex(u),f=h.index,S=h.offset,O=o.maybeChild(f);if(O&&S==u&&S+O.nodeSize==v){var M=s[d+2].mapInner(r,O,p+1,e[d]+i+1,a);M!=ya?(s[d]=u,s[d+1]=v,s[d+2]=M):(s[d+1]=-2,l=!0)}else l=!0}if(l){var E=_d(lo(s,e,t||[],r,n,i,a),o,0,a);t=E.local;for(var m=0;m<s.length;m+=3)s[m+1]<0&&(s.splice(m,3),m-=3);for(var g=0,y=0;g<E.children.length;g+=3){for(var D=E.children[g];y<s.length&&s[y]<D;)y+=3;s.splice(y,0,E.children[g],E.children[g+1],E.children[g+2])}}return new la(t&&t.sort(ic),s)}function Vi(e,t){if(!t||!e.length)return e;for(var r=[],o=0;o<e.length;o++){var n=e[o];r.push(new wa(n.from+t,n.to+t,n.type))}return r}function lo(e,t,r,o,n,i,a){function s(e,t){for(var i=0;i<e.local.length;i++){var $=e.local[i].map(o,n,t);$?r.push($):a.onRemove&&a.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)s(e.children[c+2],e.children[c]+t+1)}for(var $=0;$<e.length;$+=3)-1==e[$+1]&&s(e[$+2],t[$]+i+1);return r}function Wi(e,t,r){if(t.isLeaf)return null;for(var o=r+t.nodeSize,n=null,i=0,a=void 0;i<e.length;i++)(a=e[i])&&a.from>r&&a.to<o&&((n||(n=[])).push(a),e[i]=null);return n}function Xi(e){for(var t=[],r=0;r<e.length;r++)null!=e[r]&&t.push(e[r]);return t}function _d(e,t,r,o){var n=[],i=!1;t.forEach(function(t,a){var s=Wi(e,t,a+r);if(s){i=!0;var $=_d(s,t,r+a+1,o);$!=ya&&n.push(a,a+t.nodeSize,$)}});for(var a=Vi(i?Xi(e):e,-r).sort(ic),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(o.onRemove&&o.onRemove(a[s].spec),a.splice(s--,1));return a.length||n.length?new la(a,n):ya}function ic(e,t){return e.from-t.from||e.to-t.to}function Kf(e){for(var t=e,r=0;r<t.length-1;r++){var o=t[r];if(o.from!=o.to)for(var n=r+1;n<t.length;n++){var i=t[n];if(i.from!=o.from){i.from<o.to&&(t==e&&(t=e.slice()),t[r]=o.copy(o.from,i.from),Yi(t,n,o.copy(i.from,o.to)));break}i.to!=o.to&&(t==e&&(t=e.slice()),t[n]=i.copy(i.from,o.to),Yi(t,n+1,i.copy(o.to,i.to)))}}return t}function Yi(e,t,r){for(;t<e.length&&ic(r,e[t])>0;)t++;e.splice(t,0,r)}function Lf(e){var t=[];return e.someProp("decorations",function(r){var o=r(e.state);o&&o!=ya&&t.push(o)}),e.cursorWrapper&&t.push(la.create(e.state.doc,[e.cursorWrapper.deco])),vb.from(t)}vb.prototype.forChild=function(e,t){if(t.isLeaf)return la.empty;for(var r=[],o=0;o<this.members.length;o++){var n=this.members[o].forChild(e,t);n!=ya&&(n instanceof vb?r=r.concat(n.members):r.push(n))}return vb.from(r)},vb.prototype.eq=function(e){if(!(e instanceof vb)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},vb.prototype.locals=function(e){for(var t,r=!0,o=0;o<this.members.length;o++){var n=this.members[o].localsInner(e);if(n.length)if(t){r&&(t=t.slice(),r=!1);for(var i=0;i<n.length;i++)t.push(n[i])}else t=n}return t?Kf(r?t:t.sort(ic)):$d},vb.from=function(e){switch(e.length){case 0:return ya;case 1:return e[0];default:return new vb(e);}};var ta=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_i(this),this.markCursor=null,this.cursorWrapper=null,$i(this),this.nodeViews=aj(this),this.docView=pi(this.state.doc,Zi(this),Lf(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,Vn(this),this.pluginViews=[],this.updatePluginViews()},Mf={props:{configurable:!0},root:{configurable:!0}};function Zi(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",function(r){if("function"==typeof r&&(r=r(e.state)),r)for(var o in r)"class"==o?t.class+=" "+r[o]:t[o]||"contenteditable"==o||"nodeName"==o||(t[o]=String(r[o]))}),[wa.node(0,e.state.doc.content.size,t)]}function $i(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:wa.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function _i(e){return!e.someProp("editable",function(t){return!1===t(e.state)})}function mo(e,t){var r=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(r)!=t.$anchor.start(r)}function aj(e){var t={};return e.someProp("nodeViews",function(e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r])}),t}function no(e,t){var r=0,o=0;for(var n in e){if(e[n]!=t[n])return!0;r++}for(var i in t)o++;return r!=o}Mf.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},ta.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ef(this),this._props=e,this.updateStateInner(e.state,!0)},ta.prototype.setProps=function(e){var t={};for(var r in this._props)t[r]=this._props[r];for(var o in t.state=this.state,e)t[o]=e[o];this.update(t)},ta.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},ta.prototype.updateStateInner=function(e,t){var r=this,o=this.state,n=!1,i=!1;if(e.storedMarks&&this.composing&&(Si(this),i=!0),this.state=e,t){var a=aj(this);no(a,this.nodeViews)&&(this.nodeViews=a,n=!0),Ef(this)}this.editable=_i(this),$i(this);var s=Lf(this),$=Zi(this),c=t?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",l=n||!this.docView.matchesNode(e.doc,$,s);!l&&e.selection.eq(o.selection)||(i=!0);var d="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&$m(this);if(i){this.domObserver.stop();var p=l&&(ca.ie||ca.chrome)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&mo(o.selection,e.selection);if(l){var u=ca.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!n&&this.docView.update(e.doc,$,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=pi(e.doc,$,s,this.dom,this)),u&&!this.trackWrites&&(p=!0)}p||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&Dn(this))?fc(this,p):(Ai(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(e){return e(r)})||(e.selection instanceof ga?hi(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),v):hi(this,this.coordsAtPos(e.selection.head,1),v))}else d&&_m(d)},ta.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},ta.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var r=this.pluginViews[t];r.update&&r.update(this,e)}else{this.destroyPluginViews();for(var o=0;o<this.state.plugins.length;o++){var n=this.state.plugins[o];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}},ta.prototype.someProp=function(e,t){var r,o=this._props&&this._props[e];if(null!=o&&(r=t?t(o):o))return r;var n=this.state.plugins;if(n)for(var i=0;i<n.length;i++){var a=n[i].props[e];if(null!=a&&(r=t?t(a):a))return r}},ta.prototype.hasFocus=function(){return this.root.activeElement==this.dom},ta.prototype.focus=function(){this.domObserver.stop(),this.editable&&an(this.dom),fc(this),this.domObserver.start()},Mf.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},ta.prototype.posAtCoords=function(e){return fn(this,e)},ta.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),mi(this,e,t)},ta.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},ta.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},ta.prototype.posAtDOM=function(e,t,r){void 0===r&&(r=-1);var o=this.docView.posFromDOM(e,t,r);if(null==o)throw new RangeError("DOM position not inside the editor");return o},ta.prototype.endOfTextblock=function(e,t){return on(this,t||this.state,e)},ta.prototype.destroy=function(){this.docView&&(Wn(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Lf(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},ta.prototype.dispatchEvent=function(e){return Yn(this,e)},ta.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(ta.prototype,Mf);var Vb={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"};var ae={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:"\"",229:"Q"};for(var bj="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),oo="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),po="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),cj="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),qo="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ro=bj&&(cj||+bj[1]<57)||po&&cj,La=0;La<10;La++)Vb[48+La]=Vb[96+La]=String(La);for(La=1;La<=24;La++)Vb[La+111]="F"+La;for(La=65;La<=90;La++)Vb[La]=String.fromCharCode(La+32),ae[La]=String.fromCharCode(La);for(var Nf in Vb)ae.hasOwnProperty(Nf)||(ae[Nf]=Vb[Nf]);function so($){var r=!(ro&&($.ctrlKey||$.altKey||$.metaKey)||(oo||qo)&&$.shiftKey&&$.key&&1==$.key.length)&&$.key||($.shiftKey?ae:Vb)[$.keyCode]||$.key||"Unidentified";return"Esc"==r&&(r="Escape"),"Del"==r&&(r="Delete"),"Left"==r&&(r="ArrowLeft"),"Up"==r&&(r="ArrowUp"),"Right"==r&&(r="ArrowRight"),"Down"==r&&(r="ArrowDown"),r}var to="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function uo(e){var t,r,i,$,a=e.split(/-(?!$)/),n=a[a.length-1];"Space"==n&&(n=" ");for(var o=0;o<a.length-1;o++){var l=a[o];if(/^(cmd|meta|m)$/i.test(l))$=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))i=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);to?$=!0:r=!0}}return t&&(n="Alt-"+n),r&&(n="Ctrl-"+n),$&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function vo(e){var t=Object.create(null);for(var r in e)t[uo(r)]=e[r];return t}function Of(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==r&&t.shiftKey&&(e="Shift-"+e),e}function wo(e){return new _a({props:{handleKeyDown:dj(e)}})}function dj(e){var t=vo(e);return function(e,r){var i,$=so(r),a=1==$.length&&" "!=$,n=t[Of($,r,!a)];if(n&&n(e.state,e.dispatch,e))return!0;if(a&&(r.shiftKey||r.altKey||r.metaKey||$.charCodeAt(0)>127)&&(i=Vb[r.keyCode])&&i!=$){var o=t[Of(i,r,!0)];if(o&&o(e.state,e.dispatch,e))return!0}else if(a&&r.shiftKey){var l=t[Of($,r,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}var wb=function(e,r){this.match=e,this.handler="string"==typeof r?xo(r):r};function xo(e){return function(r,t,$,o){var n=e;if(t[1]){var u=t[0].lastIndexOf(t[1]);n+=t[0].slice(u+t[1].length);var p=($+=u)-o;p>0&&(n=t[0].slice(u-p,u)+n,$=o)}return r.tr.insertText(n,$,o)}}var yo=500;function zo(e){var r=e.rules,t=new _a({state:{init:function(){return null},apply:function(e,r){var t=e.getMeta(this);return t||(e.selectionSet||e.docChanged?null:r)}},props:{handleTextInput:function(e,$,o,n){return ej(e,$,o,n,r,t)},handleDOMEvents:{compositionend:function(e){setTimeout(function(){var $=e.state.selection.$cursor;$&&ej(e,$.pos,$.pos,"",r,t)})}}},isInputRules:!0});return t}function ej(e,r,t,$,o,n){if(e.composing)return!1;var u=e.state,p=u.doc.resolve(r);if(p.parent.type.spec.code)return!1;for(var l=p.parent.textBetween(Math.max(0,p.parentOffset-yo),p.parentOffset,null,"\uFFFC")+$,s=0;s<o.length;s++){var i=o[s].match.exec(l),a=i&&o[s].handler(u,i,r-(i[0].length-$.length),t);if(a)return e.dispatch(a.setMeta(n,{transform:a,from:r,to:t,text:$})),!0}return!1}function Ao(e,r){for(var t=e.plugins,$=0;$<t.length;$++){var o=t[$],n=void 0;if(o.spec.isInputRules&&(n=o.getState(e))){if(r){for(var u=e.tr,p=n.transform,l=p.steps.length-1;l>=0;l--)u.step(p.steps[l].invert(p.docs[l]));if(n.text){var s=u.doc.resolve(n.from).marks();u.replaceWith(n.from,n.to,e.schema.text(n.text,s))}else u.delete(n.from,n.to);r(u)}return!0}}return!1}var a=new wb(/--$/,"\u2014"),b=new wb(/\.\.\.$/,"\u2026"),c=new wb(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),d=new wb(/"$/,"\u201D"),e=new wb(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),f=new wb(/'$/,"\u2019");function Pf(e,r,t,$){return new wb(e,function(e,o,n,u){var p=t instanceof Function?t(o):t,l=e.tr.delete(n,u),s=l.doc.resolve(n).blockRange(),i=s&&Ze(s,r,p);if(!i)return null;l.wrap(s,i);var a=l.doc.resolve(n-1).nodeBefore;return a&&a.type==r&&$e(l.doc,n-1)&&(!$||$(o,a))&&l.join(n-1),l})}function Qf(e,r,t){return new wb(e,function(e,$,o,n){var u=e.doc.resolve(o),p=t instanceof Function?t($):t;return u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),r)?e.tr.delete(o,n).setBlockType(o,o,r,p):null})}function Rf(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function fj(e,t,r){var o=e.selection.$cursor;if(!o||(r?!r.endOfTextblock("backward",e):o.parentOffset>0))return!1;var n=hj(o);if(!n){var $=o.blockRange(),i=$&&zc($);return null!=i&&(t&&t(e.tr.lift($,i).scrollIntoView()),!0)}var a=n.nodeBefore;if(!a.type.spec.isolating&&rj(e,n,t))return!0;if(0==o.parent.content.size&&(kd(a,"end")||ga.isSelectable(a))){if(t){var p=e.tr.deleteRange(o.before(),o.after());p.setSelection(kd(a,"end")?ha.findFrom(p.doc.resolve(p.mapping.map(n.pos,-1)),-1):ga.create(p.doc,n.pos-a.nodeSize)),t(p.scrollIntoView())}return!0}return!(!a.isAtom||n.depth!=o.depth-1)&&(t&&t(e.tr.delete(n.pos-a.nodeSize,n.pos).scrollIntoView()),!0)}function kd(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function gj(e,t,r){var o=e.selection,n=o.$head,$=n;if(!o.empty)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):n.parentOffset>0)return!1;$=hj(n)}var i=$&&$.nodeBefore;return!(!i||!ga.isSelectable(i))&&(t&&t(e.tr.setSelection(ga.create(e.doc,$.pos-i.nodeSize)).scrollIntoView()),!0)}function hj(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function ij(e,t,r){var o=e.selection.$cursor;if(!o||(r?!r.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var n=kj(o);if(!n)return!1;var $=n.nodeAfter;if(rj(e,n,t))return!0;if(0==o.parent.content.size&&(kd($,"start")||ga.isSelectable($))){if(t){var i=e.tr.deleteRange(o.before(),o.after());i.setSelection(kd($,"start")?ha.findFrom(i.doc.resolve(i.mapping.map(n.pos)),1):ga.create(i.doc,i.mapping.map(n.pos))),t(i.scrollIntoView())}return!0}return!(!$.isAtom||n.depth!=o.depth-1)&&(t&&t(e.tr.delete(n.pos,n.pos+$.nodeSize).scrollIntoView()),!0)}function jj(e,t,r){var o=e.selection,n=o.$head,$=n;if(!o.empty)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)return!1;$=kj(n)}var i=$&&$.nodeAfter;return!(!i||!ga.isSelectable(i))&&(t&&t(e.tr.setSelection(ga.create(e.doc,$.pos)).scrollIntoView()),!0)}function kj(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}function lj(e,t){var r=e.selection,o=r.$from,n=r.$to,$=o.blockRange(n),i=$&&zc($);return null!=i&&(t&&t(e.tr.lift($,i).scrollIntoView()),!0)}function mj(e,t){var r=e.selection,o=r.$head,n=r.$anchor;return!(!o.parent.type.spec.code||!o.sameParent(n))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function Sf(e){for(var t=0;t<e.edgeCount;t++){var r=e.edge(t).type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function nj(e,t){var r=e.selection,o=r.$head,n=r.$anchor;if(!o.parent.type.spec.code||!o.sameParent(n))return!1;var $=o.node(-1),i=o.indexAfter(-1),a=Sf($.contentMatchAt(i));if(!$.canReplaceWith(i,i,a))return!1;if(t){var p=o.after(),c=e.tr.replaceWith(p,p,a.createAndFill());c.setSelection(ha.near(c.doc.resolve(p),1)),t(c.scrollIntoView())}return!0}function oj(e,t){var r=e.selection,o=r.$from,n=r.$to;if(r instanceof Gb||o.parent.inlineContent||n.parent.inlineContent)return!1;var $=Sf(n.parent.contentMatchAt(n.indexAfter()));if(!$||!$.isTextblock)return!1;if(t){var i=(!o.parentOffset&&n.index()<n.parent.childCount?o:n).pos,a=e.tr.insert(i,$.createAndFill());a.setSelection(ka.create(a.doc,i+1)),t(a.scrollIntoView())}return!0}function pj(e,t){var r=e.selection.$cursor;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var o=r.before();if(Fb(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}var n=r.blockRange(),$=n&&zc(n);return null!=$&&(t&&t(e.tr.lift(n,$).scrollIntoView()),!0)}function Bo(e,t){var r=e.selection,o=r.$from,n=r.$to;if(e.selection instanceof ga&&e.selection.node.isBlock)return!(!o.parentOffset||!Fb(e.doc,o.pos))&&(t&&t(e.tr.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;if(t){var $=n.parentOffset==n.parent.content.size,i=e.tr;(e.selection instanceof ka||e.selection instanceof Gb)&&i.deleteSelection();var a=0==o.depth?null:Sf(o.node(-1).contentMatchAt(o.indexAfter(-1))),p=$&&a?[{type:a}]:null,c=Fb(i.doc,i.mapping.map(o.pos),1,p);if(p||c||!Fb(i.doc,i.mapping.map(o.pos),1,a&&[{type:a}])||(p=[{type:a}],c=!0),c&&(i.split(i.mapping.map(o.pos),1,p),!$&&!o.parentOffset&&o.parent.type!=a)){var l=i.mapping.map(o.before()),s=i.doc.resolve(l);o.node(-1).canReplaceWith(s.index(),s.index()+1,a)&&i.setNodeMarkup(i.mapping.map(o.before()),a)}t(i.scrollIntoView())}return!0}function Co(e,t){var r,o=e.selection,n=o.$from,$=o.to,i=n.sharedDepth($);return 0!=i&&(r=n.before(i),t&&t(e.tr.setSelection(ga.create(e.doc,r))),!0)}function qj(e,t){return t&&t(e.tr.setSelection(new Gb(e.doc))),!0}function Do(e,t,r){var o=t.nodeBefore,n=t.nodeAfter,$=t.index();return!!(o&&n&&o.type.compatibleContent(n.type))&&(!o.content.size&&t.parent.canReplace($-1,$)?(r&&r(e.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace($,$+1)||!n.isTextblock&&!$e(e.doc,t.pos))&&(r&&r(e.tr.clearIncompatible(t.pos,o.type,o.contentMatchAt(o.childCount)).join(t.pos).scrollIntoView()),!0))}function rj(e,t,r){var o,n,$=t.nodeBefore,i=t.nodeAfter;if($.type.spec.isolating||i.type.spec.isolating)return!1;if(Do(e,t,r))return!0;var a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(o=(n=$.contentMatchAt($.childCount)).findWrapping(i.type))&&n.matchType(o[0]||i.type).validEnd){if(r){for(var p=t.pos+i.nodeSize,c=ba.empty,l=o.length-1;l>=0;l--)c=ba.from(o[l].create(null,c));c=ba.from($.copy(c));var s=e.tr.step(new Oa(t.pos-1,p,t.pos,p,new da(c,1,0),o.length,!0)),f=p+2*o.length;$e(s.doc,f)&&s.join(f),r(s.scrollIntoView())}return!0}var d=ha.findFrom(t,1),z=d&&d.$from.blockRange(d.$to),L=z&&zc(z);if(null!=L&&L>=t.depth)return r&&r(e.tr.lift(z,L).scrollIntoView()),!0;if(a&&i.isTextblock&&kd($,"end")){for(var u=$,m=[];m.push(u),!u.isTextblock;)u=u.lastChild;if(u.canReplace(u.childCount,u.childCount,i.content)){if(r){for(var x=ba.empty,v=m.length-1;v>=0;v--)x=ba.from(m[v].copy(x));r(e.tr.step(new Oa(t.pos-m.length,t.pos+i.nodeSize,t.pos+1,t.pos+i.nodeSize-1,new da(x,m.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function sj(e,t){return function(r,o){var n=r.selection,$=n.$from,i=n.$to,a=$.blockRange(i),p=a&&Ze(a,e,t);return!!p&&(o&&o(r.tr.wrap(a,p).scrollIntoView()),!0)}}function Eo(e,t){return function(r,o){var n=r.selection,$=n.from,i=n.to,a=!1;return r.doc.nodesBetween($,i,function(o,n){if(a)return!1;if(o.isTextblock&&!o.hasMarkup(e,t))if(o.type==e)a=!0;else{var $=r.doc.resolve(n),i=$.index();a=$.parent.canReplaceWith(i,i+1,e)}}),!!a&&(o&&o(r.tr.setBlockType($,i,e,t).scrollIntoView()),!0)}}function Tf(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,r,o){for(var n=0;n<e.length;n++)if(e[n](t,r,o))return!0;return!1}}var tj=Tf(Rf,fj,gj),uj=Tf(Rf,ij,jj),Ib={Enter:Tf(mj,oj,pj,Bo),"Mod-Enter":nj,Backspace:tj,"Mod-Backspace":tj,Delete:uj,"Mod-Delete":uj,"Mod-a":qj},vj={"Ctrl-h":Ib.Backspace,"Alt-Backspace":Ib["Mod-Backspace"],"Ctrl-d":Ib.Delete,"Ctrl-Alt-Backspace":Ib["Mod-Delete"],"Alt-Delete":Ib["Mod-Delete"],"Alt-d":Ib["Mod-Delete"]};for(var wj in Ib)vj[wj]=Ib[wj];var Fo="undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform(),g=Fo?vj:Ib;function Go(t,e){return function(r,$){var o=r.selection,n=o.$from,i=o.$to,p=n.blockRange(i),a=!1,l=p;if(!p)return!1;if(p.depth>=2&&n.node(p.depth-1).type.compatibleContent(t)&&0==p.startIndex){if(0==n.index(p.depth-1))return!1;var d=r.doc.resolve(p.start-2);l=new Vc(d,d,p.depth),p.endIndex<p.parent.childCount&&(p=new Vc(n,r.doc.resolve(i.end(p.depth)),p.depth)),a=!0}var s=Ze(l,t,e,p);return!!s&&($&&$(Ho(r.tr,p,s,a,t).scrollIntoView()),!0)}}function Ho(t,e,r,$,o){for(var n=ba.empty,i=r.length-1;i>=0;i--)n=ba.from(r[i].type.create(r[i].attrs,n));t.step(new Oa(e.start-($?2:0),e.end,e.start,e.end,new da(n,0,0),r.length,!0));for(var p=0,a=0;a<r.length;a++)r[a].type==o&&(p=a+1);for(var l=r.length-p,d=e.start+r.length-($?2:0),s=e.parent,x=e.startIndex,m=e.endIndex,D=!0;x<m;x++,D=!1)!D&&Fb(t.doc,d,l)&&(t.split(d,l),d+=2*l),d+=s.child(x).nodeSize;return t}function Io(t){return function(e,r){var $=e.selection,o=$.$from,n=$.$to,i=o.blockRange(n,function(e){return e.childCount&&e.firstChild.type==t});return!!i&&(!r||(o.node(i.depth-1).type==t?Jo(e,r,t,i):Ko(e,r,i)))}}function Jo(t,e,r,$){var o=t.tr,n=$.end,i=$.$to.end($.depth);return n<i&&(o.step(new Oa(n-1,i,n,i,new da(ba.from(r.create(null,$.parent.copy())),1,0),1,!0)),$=new Vc(o.doc.resolve($.$from.pos),o.doc.resolve(i),$.depth)),e(o.lift($,zc($)).scrollIntoView()),!0}function Ko(t,e,r){for(var $=t.tr,o=r.parent,n=r.end,i=r.endIndex-1,p=r.startIndex;i>p;i--)n-=o.child(i).nodeSize,$.delete(n-1,n+1);var a=$.doc.resolve(r.start),l=a.nodeAfter,d=0==r.startIndex,s=r.endIndex==o.childCount,x=a.node(-1),m=a.index(-1);if(!x.canReplace(m+(d?0:1),m+1,l.content.append(s?ba.empty:ba.from(o))))return!1;var D=a.pos,c=D+l.nodeSize;return $.step(new Oa(D-(d?1:0),c+(s?1:0),D+1,c-1,new da((d?ba.empty:ba.from(o.copy(ba.empty))).append(s?ba.empty:ba.from(o.copy(ba.empty))),d?0:1,s?0:1),d?0:1)),e($.scrollIntoView()),!0}function Lo(t){return function(e,r){var $=e.selection,o=$.$from,n=$.$to,i=o.blockRange(n,function(e){return e.childCount&&e.firstChild.type==t});if(!i)return!1;var p=i.startIndex;if(0==p)return!1;var a=i.parent,l=a.child(p-1);if(l.type!=t)return!1;if(r){var d=l.lastChild&&l.lastChild.type==a.type,s=ba.from(d?t.create():null),x=new da(ba.from(t.create(null,ba.from(a.type.create(null,s)))),d?3:1,0),m=i.start,D=i.end;r(e.tr.step(new Oa(m-(d?3:1),D,m,D,x,1,!0)).scrollIntoView())}return!0}}class Mo{constructor(e,t){this.editor=e,this.commands=t}createCommands(){const{commands:e,editor:t}=this,{state:r,view:i}=t,{tr:n}=r,o=this.buildProps(n);return Object.fromEntries(Object.entries(e).map(([e,t])=>{return[e,(...e)=>{const r=t(...e)(o);return n.getMeta("preventDispatch")||i.dispatch(n),r}]}))}createChain(e,t=!0){const{commands:r,editor:i}=this,{state:n,view:o}=i,s=[],a=!!e,$=e||n.tr,c={...Object.fromEntries(Object.entries(r).map(([e,r])=>{return[e,(...e)=>{const i=this.buildProps($,t),n=r(...e)(i);return s.push(n),c}]})),run:()=>(a||!t||$.getMeta("preventDispatch")||o.dispatch($),s.every(e=>!0===e))};return c}createCan(e){const{commands:t,editor:r}=this,{state:i}=r,n=e||i.tr,o=this.buildProps(n,void 0);return{...Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...o,dispatch:void 0})])),chain:()=>this.createChain(n,void 0)}}buildProps(e,t=!0){const{editor:r,commands:i}=this,{state:n,view:o}=r;n.storedMarks&&e.setStoredMarks(n.storedMarks);const s={tr:e,editor:r,view:o,state:this.chainableState(e,n),dispatch:t?()=>void 0:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(i).map(([e,t])=>[e,(...e)=>t(...e)(s)]))}};return s}chainableState(e,t){let{selection:r}=e,{doc:i}=e,{storedMarks:n}=e;return{...t,schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return n},get selection(){return r},get doc(){return i},get tr(){return r=e.selection,i=e.doc,n=e.storedMarks,e}}}}function ea(e,t,r={}){if(void 0===e.config[t]&&e.parent)return ea(e.parent,t,r);if("function"==typeof e.config[t]){return e.config[t].bind({...r,parent:e.parent?ea(e.parent,t,r):null})}return e.config[t]}function ld(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function xj(e){const t=[],{nodeExtensions:r,markExtensions:i}=ld(e),n=[...r,...i],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return e.forEach(e=>{const r=ea(e,"addGlobalAttributes",{name:e.name,options:e.options});r&&r().forEach(e=>{e.types.forEach(r=>{Object.entries(e.attributes).forEach(([e,i])=>{t.push({type:r,name:e,attribute:{...o,...i}})})})})}),n.forEach(e=>{const r={name:e.name,options:e.options},i=ea(e,"addAttributes",r);if(!i)return;const n=i();Object.entries(n).forEach(([r,i])=>{t.push({type:e.name,name:r,attribute:{...o,...i}})})}),t}function Qa(...e){return e.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([e,t])=>{r[e]?r[e]="class"===e?[r[e],t].join(" "):"style"===e?[r[e],t].join("; "):t:r[e]=t}),r},{})}function Uf(e,t){return t.filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>Qa(e,t),{})}function No(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function Oo(e){return"string"!=typeof e?e:e.match(/^\d*(\.\d+)?$/)?Number(e):"true"===e||"false"!==e&&e}function yj(e,t){return e.style?e:{...e,getAttrs:r=>{const i=e.getAttrs?e.getAttrs(r):e.attrs;if(!1===i)return!1;const n=t.filter(e=>e.attribute.rendered).reduce((e,t)=>{const i=t.attribute.parseHTML?t.attribute.parseHTML(r)||{}:{[t.name]:Oo(r.getAttribute(t.name))};return{...e,...Object.fromEntries(Object.entries(i).filter(([,e])=>null!=e))}},{});return{...i,...n}}}}function va(e,t,...r){return"function"==typeof e?t?e.bind(t)(...r):e(...r):e}function zj(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>("attrs"!==e||!No(t))&&null!=t))}function Po(e){var t;const r=xj(e),{nodeExtensions:i,markExtensions:n}=ld(e),o=null===(t=i.find(e=>ea(e,"topNode")))||void 0===t?void 0:t.name,s=Object.fromEntries(i.map(t=>{const i=r.filter(e=>e.type===t.name),n={name:t.name,options:t.options},o=zj({...e.reduce((e,r)=>{const i=ea(r,"extendNodeSchema",n);return{...e,...(i?i(t):{})}},{}),content:va(ea(t,"content",n)),marks:va(ea(t,"marks",n)),group:va(ea(t,"group",n)),inline:va(ea(t,"inline",n)),atom:va(ea(t,"atom",n)),selectable:va(ea(t,"selectable",n)),draggable:va(ea(t,"draggable",n)),code:va(ea(t,"code",n)),defining:va(ea(t,"defining",n)),isolating:va(ea(t,"isolating",n)),attrs:Object.fromEntries(i.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),s=va(ea(t,"parseHTML",n));s&&(o.parseDOM=s.map(e=>yj(e,i)));const a=ea(t,"renderHTML",n);return a&&(o.toDOM=e=>a({node:e,HTMLAttributes:Uf(e,i)})),[t.name,o]})),a=Object.fromEntries(n.map(t=>{const i=r.filter(e=>e.type===t.name),n={name:t.name,options:t.options},o=zj({...e.reduce((e,r)=>{const i=ea(r,"extendMarkSchema",n);return{...e,...(i?i(t):{})}},{}),inclusive:va(ea(t,"inclusive",n)),excludes:va(ea(t,"excludes",n)),group:va(ea(t,"group",n)),spanning:va(ea(t,"spanning",n)),attrs:Object.fromEntries(i.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),s=va(ea(t,"parseHTML",n));s&&(o.parseDOM=s.map(e=>yj(e,i)));const a=ea(t,"renderHTML",n);return a&&(o.toDOM=e=>a({mark:e,HTMLAttributes:Uf(e,i)})),[t.name,o]}));return new dc({topNode:o,nodes:s,marks:a})}function Vf(e,t){return t.nodes[e]?t.nodes[e]:t.marks[e]?t.marks[e]:null}class be{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=be.resolve(e),this.schema=Po(this.extensions),this.extensions.forEach(e=>{var t;const r={name:e.name,options:e.options,editor:this.editor,type:Vf(e.name,this.schema)};if("mark"===e.type){(null===(t=va(ea(e,"keepOnSplit",r)))||void 0===t||t)&&this.splittableMarks.push(e.name)}const i=ea(e,"onBeforeCreate",r);i&&this.editor.on("beforeCreate",i);const n=ea(e,"onCreate",r);n&&this.editor.on("create",n);const o=ea(e,"onUpdate",r);o&&this.editor.on("update",o);const s=ea(e,"onSelectionUpdate",r);s&&this.editor.on("selectionUpdate",s);const a=ea(e,"onTransaction",r);a&&this.editor.on("transaction",a);const $=ea(e,"onFocus",r);$&&this.editor.on("focus",$);const c=ea(e,"onBlur",r);c&&this.editor.on("blur",c);const p=ea(e,"onDestroy",r);p&&this.editor.on("destroy",p)})}static resolve(e){return be.sort(be.flatten(e))}static flatten(e){return e.map(e=>{const t=ea(e,"addExtensions",{name:e.name,options:e.options});return t?[e,...this.flatten(t())]:e}).flat(10)}static sort(e){return e.sort((e,t)=>{const r=ea(e,"priority")||100,i=ea(t,"priority")||100;return r>i?-1:r<i?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r=ea(t,"addCommands",{name:t.name,options:t.options,editor:this.editor,type:Vf(t.name,this.schema)});return r?{...e,...r()}:e},{})}get plugins(){return[...this.extensions].reverse().map(e=>{const t={name:e.name,options:e.options,editor:this.editor,type:Vf(e.name,this.schema)},r=[],i=ea(e,"addKeyboardShortcuts",t);if(i){const e=Object.fromEntries(Object.entries(i()).map(([e,t])=>[e,()=>t({editor:this.editor})])),t=wo(e);r.push(t)}const n=ea(e,"addInputRules",t);if(this.editor.options.enableInputRules&&n){const e=n(),t=e.length?[zo({rules:e})]:[];r.push(...t)}const o=ea(e,"addPasteRules",t);if(this.editor.options.enablePasteRules&&o){const e=o();r.push(...e)}const s=ea(e,"addProseMirrorPlugins",t);if(s){const e=s();r.push(...e)}return r}).flat()}get attributes(){return xj(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=ld(this.extensions);return Object.fromEntries(t.filter(e=>!!ea(e,"addNodeView")).map(t=>{const r=this.attributes.filter(e=>e.type===t.name),i={name:t.name,options:t.options,editor:e,type:ua(t.name,this.schema)},n=ea(t,"addNodeView",i);if(!n)return[];return[t.name,(i,o,s,a)=>{const $=Uf(i,r);return n()({editor:e,node:i,getPos:s,decorations:a,HTMLAttributes:$,extension:t})}]}))}get textSerializers(){const{editor:e}=this,{nodeExtensions:t}=ld(this.extensions);return Object.fromEntries(t.filter(e=>!!ea(e,"renderText")).map(t=>{const r=ea(t,"renderText",{name:t.name,options:t.options,editor:e,type:ua(t.name,this.schema)});if(!r)return[];return[t.name,e=>r(e)]}))}}class Qo{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(e=>e.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(e=>e!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Ro(e){return Object.prototype.toString.call(e).slice(8,-1)}function Wf(e){return"Object"===Ro(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function ce(e,t){const r={...e};return Wf(e)&&Wf(t)&&Object.keys(t).forEach(i=>{Wf(t[i])&&i in e?r[i]=ce(e[i],t[i]):Object.assign(r,{[i]:t[i]})}),r}class Va{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,this.options=this.config.defaultOptions}static create(e={}){return new Va(e)}configure(e={}){const t=this.extend();return t.options=ce(this.options,e),t}extend(e={}){const t=new Va(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t}}const So=(e,t,r,i,n)=>{let o="",s=!0;return e.state.doc.nodesBetween(t,r,(a,$)=>{var c;const p=e.extensionManager.textSerializers[a.type.name];p?(o+=p({node:a}),s=!i):a.isText?(o+=null===(c=null==a?void 0:a.text)||void 0===c?void 0:c.slice(Math.max(t,$)-$,r-$),s=!i):a.isLeaf&&n?(o+=n,s=!i):!s&&a.isBlock&&(o+=i,s=!0)},0),o},To=Va.create({name:"editable",addProseMirrorPlugins(){return[new _a({key:new rb("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{from:t,to:r}=e.state.selection;return So(e,t,r,"\n")}}})]}}),Uo=()=>({view:e})=>{return e.dom.blur(),!0};var Vo=Object.freeze({__proto__:null,blur:Uo});const Wo=(e=!1)=>({commands:t})=>t.setContent("",e);var Xo=Object.freeze({__proto__:null,clearContent:Wo});const Yo=()=>({state:e,tr:t,dispatch:r})=>{const{selection:i}=t,{ranges:n}=i;return n.forEach(i=>{e.doc.nodesBetween(i.$from.pos,i.$to.pos,(e,i)=>{if(e.type.isText)return;const n=t.doc.resolve(t.mapping.map(i)),o=t.doc.resolve(t.mapping.map(i+e.nodeSize)),s=n.blockRange(o);if(!s)return;const a=zc(s);if(e.type.isTextblock&&r){const{defaultType:e}=n.parent.contentMatchAt(n.index());t.setNodeMarkup(s.start,e)}(a||0===a)&&r&&t.lift(s,a)})}),!0};var Zo=Object.freeze({__proto__:null,clearNodes:Yo});const $o=e=>t=>e(t);var _o=Object.freeze({__proto__:null,command:$o});const ap=()=>({state:e,dispatch:t})=>oj(e,t);var bp=Object.freeze({__proto__:null,createParagraphNear:ap});const cp=e=>({tr:t,dispatch:r})=>{const{from:i,to:n}=e;return r&&t.delete(i,n),!0};var dp=Object.freeze({__proto__:null,deleteRange:cp});const ep=()=>({state:e,dispatch:t})=>Rf(e,t);var fp=Object.freeze({__proto__:null,deleteSelection:ep});const gp=()=>({commands:e})=>e.keyboardShortcut("Enter");var hp=Object.freeze({__proto__:null,enter:gp});const ip=()=>({state:e,dispatch:t})=>nj(e,t);var jp=Object.freeze({__proto__:null,exitCode:ip});function Xf(e,t,r={}){return e.find(e=>e.type===t&&Tc(e.attrs,r))}function kp(e,t,r={}){return!!Xf(e,t,r)}function Aj(e,t,r={}){if(!e||!t)return;const i=e.parent.childAfter(e.parentOffset);if(!i.node)return;const n=Xf(i.node.marks,t,r);if(!n)return;let o=e.index(),s=e.start()+i.offset,a=o+1,$=s+i.node.nodeSize;for(Xf(i.node.marks,t,r);o>0&&n.isInSet(e.parent.child(o-1).marks);)o-=1,s-=e.parent.child(o).nodeSize;for(;a<e.parent.childCount&&kp(e.parent.child(a).marks,t,r);)$+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:$}}const lp=(e,t={})=>({tr:r,state:i,dispatch:n})=>{const o=Nb(e,i.schema),{doc:s,selection:a}=r,{$from:$,from:c,to:p}=a;if(n){const e=Aj($,o,t);if(e&&e.from<=c&&e.to>=p){const t=ka.create(s,e.from,e.to);r.setSelection(t)}}return!0};var mp=Object.freeze({__proto__:null,extendMarkRange:lp});const np=e=>t=>{const r="function"==typeof e?e(t):e;for(let e=0;e<r.length;e+=1)if(r[e](t))return!0;return!1};var op=Object.freeze({__proto__:null,first:np});function md(e=0,t=0,r=0){return Math.min(Math.max(e,t),r)}function pp(e){var t;return"class"===(null===(t=e.constructor)||void 0===t?void 0:t.toString().substring(0,5))}function Bj(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!pp(e)}function Cj(e){return Bj(e)&&e instanceof ka}function qp(e,t=null){if(!t)return null;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){const{size:t}=e.doc.content;return{from:t,to:t}}return{from:t,to:t}}const rp=(e=null)=>({editor:t,view:r,tr:i,dispatch:n})=>{if(r.hasFocus()&&null===e||!1===e)return!0;if(n&&null===e&&!Cj(t.state.selection))return r.focus(),!0;const{from:o,to:s}=qp(t.state,e)||t.state.selection,{doc:a,storedMarks:$}=i,c=md(o,0,a.content.size),p=md(s,0,a.content.size),l=ka.create(a,c,p),d=t.state.selection.eq(l);return n&&(i.setSelection(l),d&&$&&i.setStoredMarks($),r.focus()),!0};var sp=Object.freeze({__proto__:null,focus:rp});const tp=(e,t)=>r=>e.every((e,i)=>t(e,{...r,index:i}));var up=Object.freeze({__proto__:null,forEach:tp});const vp=e=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},e);var wp=Object.freeze({__proto__:null,insertContent:vp});function xp(e,t,r){const i=e.steps.length-1;if(i<t)return;const n=e.steps[i];if(!(n instanceof Eb||n instanceof Oa))return;const o=e.mapping.maps[i];let s=0;o.forEach((e,t,r,i)=>{0===s&&(s=i)}),e.setSelection(ha.near(e.doc.resolve(s),r))}const yp=(e,t)=>({tr:r,dispatch:i,editor:n})=>{if(i){const i=Id(t,n.schema,{parseOptions:{preserveWhitespace:"full"}});if("<>"===i.toString())return!0;const{from:o,to:s}="number"==typeof e?{from:e,to:e}:e;r.replaceWith(o,s,i),xp(r,r.steps.length-1,1)}return!0};var zp=Object.freeze({__proto__:null,insertContentAt:yp});const Ap=()=>({state:e,dispatch:t})=>fj(e,t);var Bp=Object.freeze({__proto__:null,joinBackward:Ap});const Cp=()=>({state:e,dispatch:t})=>ij(e,t);var Dp=Object.freeze({__proto__:null,joinForward:Cp});const Ep="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function Fp(e){const t=e.split(/-(?!$)/);let r,i,n,o,s=t[t.length-1];"Space"===s&&(s=" ");for(let a=0;a<t.length-1;a+=1){const e=t[a];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))r=!0;else if(/^(c|ctrl|control)$/i.test(e))i=!0;else if(/^s(hift)?$/i.test(e))n=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);Ep?o=!0:i=!0}}return r&&(s=`Alt-${s}`),i&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),n&&(s=`Shift-${s}`),s}const Gp=e=>({editor:t,view:r,tr:i,dispatch:n})=>{const o=Fp(e).split(/-(?!$)/),s=o.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),$=t.captureTransaction(()=>{r.someProp("handleKeyDown",e=>e(r,a))});return null==$||$.steps.forEach(e=>{const t=e.map(i.mapping);t&&n&&i.maybeStep(t)}),!0};var Hp=Object.freeze({__proto__:null,keyboardShortcut:Gp});const Ip=(e,t={})=>({state:r,dispatch:i})=>{return!!vc(r,ua(e,r.schema),t)&&lj(r,i)};var Jp=Object.freeze({__proto__:null,lift:Ip});const Kp=()=>({state:e,dispatch:t})=>pj(e,t);var Lp=Object.freeze({__proto__:null,liftEmptyBlock:Kp});const Mp=e=>({state:t,dispatch:r})=>{const i=ua(e,t.schema);return Io(i)(t,r)};var Np=Object.freeze({__proto__:null,liftListItem:Mp});const Op=()=>({state:e,dispatch:t})=>mj(e,t);var Pp=Object.freeze({__proto__:null,newlineInCode:Op});const Qp=(e,t={})=>({state:r,commands:i})=>{console.warn("[tiptap warn]: replace() is deprecated. please use insertContent() instead.");const{from:n,to:o}=r.selection,s={from:n,to:o};return i.replaceRange(s,e,t)};var Rp=Object.freeze({__proto__:null,replace:Qp});const Sp=(e,t,r={})=>({tr:i,state:n,dispatch:o})=>{console.warn("[tiptap warn]: replaceRange() is deprecated. please use insertContent() instead.");const s=ua(t,n.schema),{from:a,to:$}=e;return o&&i.replaceRangeWith(a,$,s.create(r)),!0};var Tp=Object.freeze({__proto__:null,replaceRange:Sp});function Dj(e,t){const r="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,i)=>(r.includes(i)||(t[i]=e[i]),t),{})}const Up=(e,t)=>({tr:r,state:i,dispatch:n})=>{let o=null,s=null;const a=Hd("string"==typeof e?e:e.name,i.schema);return!!a&&("node"===a&&(o=ua(e,i.schema)),"mark"===a&&(s=Nb(e,i.schema)),n&&r.selection.ranges.forEach(e=>{i.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,i)=>{o&&o===e.type&&r.setNodeMarkup(i,void 0,Dj(e.attrs,t)),s&&e.marks.length&&e.marks.forEach(n=>{s===n.type&&r.addMark(i,i+e.nodeSize,s.create(Dj(n.attrs,t)))})})}),!0)};var Vp=Object.freeze({__proto__:null,resetAttributes:Up});const Wp=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0);var Xp=Object.freeze({__proto__:null,scrollIntoView:Wp});const Yp=()=>({state:e,dispatch:t})=>qj(e,t);var Zp=Object.freeze({__proto__:null,selectAll:Yp});const $p=()=>({state:e,dispatch:t})=>gj(e,t);var _p=Object.freeze({__proto__:null,selectNodeBackward:$p});const aq=()=>({state:e,dispatch:t})=>jj(e,t);var bq=Object.freeze({__proto__:null,selectNodeForward:aq});const cq=()=>({state:e,dispatch:t})=>Co(e,t);var dq=Object.freeze({__proto__:null,selectParentNode:cq});const eq=(e,t=!1,r={})=>({tr:i,editor:n,dispatch:o})=>{const{doc:s}=i,a=ph(e,n.schema,r),$=ka.create(s,0,s.content.size);return o&&i.setSelection($).replaceSelectionWith(a,!1).setMeta("preventUpdate",!t),!0};var fq=Object.freeze({__proto__:null,setContent:eq});const gq=(e,t={})=>({tr:r,state:i,dispatch:n})=>{const{selection:o}=r,{empty:s,ranges:a}=o,$=Nb(e,i.schema);if(n)if(s){const e=Le(i,$);r.addStoredMark($.create({...e,...t}))}else a.forEach(e=>{const n=e.$from.pos,o=e.$to.pos;i.doc.nodesBetween(n,o,(e,i)=>{const s=Math.max(i,n),a=Math.min(i+e.nodeSize,o);e.marks.find(e=>e.type===$)?e.marks.forEach(e=>{$===e.type&&r.addMark(s,a,$.create({...e.attrs,...t}))}):r.addMark(s,a,$.create(t))})});return!0};var hq=Object.freeze({__proto__:null,setMark:gq});const iq=(e,t)=>({tr:r})=>(r.setMeta(e,t),!0);var jq=Object.freeze({__proto__:null,setMeta:iq});const kq=(e,t={})=>({state:r,dispatch:i})=>{const n=ua(e,r.schema);return Eo(n,t)(r,i)};var lq=Object.freeze({__proto__:null,setNode:kq});const mq=e=>({tr:t,dispatch:r})=>{if(r){const{doc:r}=t,i=md(e,0,r.content.size),n=ga.create(r,i);t.setSelection(n)}return!0};var nq=Object.freeze({__proto__:null,setNodeSelection:mq});const oq=e=>({tr:t,dispatch:r})=>{if(r){const{doc:r}=t,{from:i,to:n}="number"==typeof e?{from:e,to:e}:e,o=md(i,0,r.content.size),s=md(n,0,r.content.size),a=ka.create(r,o,s);t.setSelection(a)}return!0};var pq=Object.freeze({__proto__:null,setTextSelection:oq});const qq=e=>({state:t,dispatch:r})=>{const i=ua(e,t.schema);return Lo(i)(t,r)};var rq=Object.freeze({__proto__:null,sinkListItem:qq});function de(e,t,r){return Object.fromEntries(Object.entries(r).filter(([r])=>{const i=e.find(e=>e.type===t&&e.name===r);return!!i&&i.attribute.keepOnSplit}))}function sq(e){for(let t=0;t<e.edgeCount;t+=1){const{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function Ej(e,t){const r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(r){const i=r.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(i)}}const tq=({keepMarks:e=!0}={})=>({tr:t,state:r,dispatch:i,editor:n})=>{const{selection:o,doc:s}=t,{$from:a,$to:$}=o,c=de(n.extensionManager.attributes,a.node().type.name,a.node().attrs);if(o instanceof ga&&o.node.isBlock)return!(!a.parentOffset||!Fb(s,a.pos))&&(i&&(e&&Ej(r,n.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(i){const i=$.parentOffset===$.parent.content.size;o instanceof ka&&t.deleteSelection();const s=0===a.depth?void 0:sq(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=i&&s?[{type:s,attrs:c}]:void 0,l=Fb(t.doc,t.mapping.map(a.pos),1,p);if(p||l||!Fb(t.doc,t.mapping.map(a.pos),1,s?[{type:s}]:void 0)||(l=!0,p=s?[{type:s,attrs:c}]:void 0),l&&(t.split(t.mapping.map(a.pos),1,p),s&&!i&&!a.parentOffset&&a.parent.type!==s)){const e=t.mapping.map(a.before()),r=t.doc.resolve(e);a.node(-1).canReplaceWith(r.index(),r.index()+1,s)&&t.setNodeMarkup(t.mapping.map(a.before()),s)}e&&Ej(r,n.extensionManager.splittableMarks),t.scrollIntoView()}return!0};var uq=Object.freeze({__proto__:null,splitBlock:tq});const vq=e=>({tr:t,state:r,dispatch:i,editor:n})=>{var o;const s=ua(e,r.schema),{$from:a,$to:$}=r.selection,c=r.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent($))return!1;const p=a.node(-1);if(p.type!==s)return!1;const l=n.extensionManager.attributes;if(0===a.parent.content.size&&a.node(-1).childCount===a.indexAfter(-1)){if(2===a.depth||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let e=ba.empty;const r=a.index(-1)>0;for(let t=a.depth-(r?1:2);t>=a.depth-3;t-=1)e=ba.from(a.node(t).copy(e));const i=de(l,a.node().type.name,a.node().attrs),n=(null===(o=s.contentMatch.defaultType)||void 0===o?void 0:o.createAndFill(i))||void 0;e=e.append(ba.from(s.createAndFill(null,n)||void 0)),t.replace(a.before(r?void 0:-1),a.after(-3),new da(e,r?3:2,2)).setSelection(ka.near(t.doc.resolve(a.pos+(r?3:2)))).scrollIntoView()}return!0}const d=$.pos===a.end()?p.contentMatchAt(0).defaultType:null,u=de(l,p.type.name,p.attrs),O=de(l,a.node().type.name,a.node().attrs);t.delete(a.pos,$.pos);const m=d?[{type:s,attrs:u},{type:d,attrs:O}]:[{type:s,attrs:u}];return!!Fb(t.doc,a.pos,2)&&(i&&t.split(a.pos,2,m).scrollIntoView(),!0)};var wq=Object.freeze({__proto__:null,splitListItem:vq});function xq(e,t){for(let r=e.depth;r>0;r-=1){const i=e.node(r);if(t(i))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:i}}}function yq(e){return t=>xq(t.$from,e)}function Fj(e,t){const{nodeExtensions:r}=ld(t),i=r.find(t=>t.name===e);if(!i)return!1;const n=va(ea(i,"group",{name:i.name,options:i.options}));return"string"==typeof n&&n.split(" ").includes("list")}const zq=(e,t)=>({editor:r,tr:i,state:n,dispatch:o,chain:s,commands:a,can:$})=>{const{extensions:c}=r.extensionManager,p=ua(e,n.schema),l=ua(t,n.schema),{selection:d}=n,{$from:u,$to:O}=d,m=u.blockRange(O);if(!m)return!1;const W=yq(e=>Fj(e.type.name,c))(d);if(m.depth>=1&&W&&m.depth-W.depth<=1){if(W.node.type===p)return a.liftListItem(l);if(Fj(W.node.type.name,c)&&p.validContent(W.node.content)&&o)return i.setNodeMarkup(W.pos,p),!0}return $().wrapInList(p)?a.wrapInList(p):s().clearNodes().wrapInList(p).run()};var Aq=Object.freeze({__proto__:null,toggleList:zq});const Bq=(e,t={})=>({state:r,commands:i})=>{const n=Nb(e,r.schema);return Me(r,n,t)?i.unsetMark(n):i.setMark(n,t)};var Cq=Object.freeze({__proto__:null,toggleMark:Bq});const Dq=(e,t,r={})=>({state:i,commands:n})=>{const o=ua(e,i.schema),s=ua(t,i.schema);return vc(i,o,r)?n.setNode(s):n.setNode(o,r)};var Eq=Object.freeze({__proto__:null,toggleNode:Dq});const Fq=(e,t={})=>({state:r,dispatch:i})=>{const n=ua(e,r.schema);return vc(r,n,t)?lj(r,i):sj(n,t)(r,i)};var Gq=Object.freeze({__proto__:null,toggleWrap:Fq});const Hq=()=>({state:e,dispatch:t})=>Ao(e,t);var Iq=Object.freeze({__proto__:null,undoInputRule:Hq});const Jq=()=>({tr:e,state:t,dispatch:r})=>{const{selection:i}=e,{empty:n,ranges:o}=i;return!!n||(r&&Object.entries(t.schema.marks).forEach(([,t])=>{o.forEach(r=>{e.removeMark(r.$from.pos,r.$to.pos,t)})}),!0)};var Kq=Object.freeze({__proto__:null,unsetAllMarks:Jq});const Lq=e=>({tr:t,state:r,dispatch:i})=>{const{selection:n}=t,o=Nb(e,r.schema),{$from:s,empty:a,ranges:$}=n;if(i){if(a){let{from:e,to:r}=n;const i=Aj(s,o);i&&(e=i.from,r=i.to),t.removeMark(e,r,o)}else $.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos,o)});t.removeStoredMark(o)}return!0};var Mq=Object.freeze({__proto__:null,unsetMark:Lq});const Nq=(e,t={})=>({tr:r,state:i,dispatch:n})=>{let o=null,s=null;const a=Hd("string"==typeof e?e:e.name,i.schema);return!!a&&("node"===a&&(o=ua(e,i.schema)),"mark"===a&&(s=Nb(e,i.schema)),n&&r.selection.ranges.forEach(e=>{const n=e.$from.pos,a=e.$to.pos;i.doc.nodesBetween(n,a,(e,i)=>{o&&o===e.type&&r.setNodeMarkup(i,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach(o=>{if(s===o.type){const $=Math.max(i,n),c=Math.min(i+e.nodeSize,a);r.addMark($,c,s.create({...o.attrs,...t}))}})})}),!0)};var Oq=Object.freeze({__proto__:null,updateAttributes:Nq});const Pq=(e,t={})=>({state:r,dispatch:i})=>{const n=ua(e,r.schema);return!vc(r,n,t)&&sj(n,t)(r,i)};var Qq=Object.freeze({__proto__:null,wrapIn:Pq});const Rq=(e,t={})=>({state:r,dispatch:i})=>{const n=ua(e,r.schema);return Go(n,t)(r,i)};var Sq=Object.freeze({__proto__:null,wrapInList:Rq});const Tq=Va.create({name:"commands",addCommands:()=>({...Vo,...Xo,...Zo,..._o,...bp,...dp,...fp,...hp,...jp,...mp,...op,...sp,...up,...wp,...zp,...Bp,...Dp,...Hp,...Jp,...Lp,...Np,...Pp,...Rp,...Tp,...Vp,...Xp,...Zp,..._p,...bq,...dq,...fq,...hq,...jq,...lq,...nq,...pq,...rq,...uq,...wq,...Aq,...Cq,...Eq,...Gq,...Iq,...Kq,...Mq,...Oq,...Qq,...Sq})}),Uq=Va.create({name:"editable",addProseMirrorPlugins(){return[new _a({key:new rb("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Vq=Va.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new _a({key:new rb("focusEvents"),props:{attributes:{tabindex:"0"},handleDOMEvents:{focus:(t,r)=>{e.isFocused=!0;const i=e.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,r)=>{e.isFocused=!1;const i=e.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),Wq=Va.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.joinForward(),()=>e.selectNodeForward()]);return{Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:()=>e(),"Mod-Backspace":()=>e(),Delete:()=>t(),"Mod-Delete":()=>t()}}});var Xq=Object.freeze({__proto__:null,ClipboardTextSerializer:To,Commands:Tq,Editable:Uq,FocusEvents:Vq,Keymap:Wq});const Yq=".ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror [contenteditable=\"false\"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable=\"false\"] [contenteditable=\"true\"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: \"\";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}";class Zq extends Qo{constructor(e={}){super(),this.isFocused=!1,this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get commands(){return this.commandManager.createCommands()}chain(){return this.commandManager.createChain()}can(){return this.commandManager.createCan()}injectCSS(){this.options.injectCSS&&document&&(this.css=mm(Yq))}setOptions(e={}){this.options={...this.options,...e}}setEditable(e){this.setOptions({editable:e}),this.view&&this.state&&!this.isDestroyed&&this.view.updateState(this.state)}get isEditable(){return this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r="function"==typeof t?t(e,this.state.plugins):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const t="string"==typeof e?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(e=>!e.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){const e=[...Object.entries(Xq).map(([,e])=>e),...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new be(e,this)}createCommandManager(){this.commandManager=new Mo(this,this.extensionManager.commands)}createSchema(){this.schema=this.extensionManager.schema}createView(){this.view=new ta(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Ga.create({doc:ph(this.options.content,this.schema,this.options.parseOptions)})});const e=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(e),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)}):void(this.capturedTransaction=e);const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this});const i=e.getMeta("focus"),n=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event}),n&&this.emit("blur",{editor:this,event:n.event}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return hm(this.state,e)}getNodeAttributes(e){return console.warn("[tiptap warn]: editor.getNodeAttributes() is deprecated. please use editor.getAttributes() instead."),nh(this.state,e)}getMarkAttributes(e){return console.warn("[tiptap warn]: editor.getMarkAttributes() is deprecated. please use editor.getAttributes() instead."),Le(this.state,e)}isActive(e,t){const r="string"==typeof e?e:null,i="string"==typeof e?t:e;return im(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return km(this.state.doc,this.schema)}get isEmpty(){return lm(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners(),jm(this.css)}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}}class Wa{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,this.options=this.config.defaultOptions}static create(e={}){return new Wa(e)}configure(e={}){const t=this.extend();return t.options=ce(this.options,e),t}extend(e={}){const t=new Wa(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t}}class Fc{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,this.options=this.config.defaultOptions}static create(e={}){return new Fc(e)}configure(e={}){const t=this.extend();return t.options=ce(this.options,e),t}extend(e={}){const t=new Fc(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t}}function $q(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}class _q{constructor(e,t,r){this.isDragging=!1,this.options={stopEvent:null,update:null},this.component=e,this.options={...this.options,...r},this.editor=t.editor,this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return null}get contentDOM(){return null}onDragStart(e){var t,r,i;const{view:n}=this.editor,o=e.target,s=3===o.nodeType?null===(t=o.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):o.closest("[data-drag-handle]");if(!this.dom||(null===(r=this.contentDOM)||void 0===r?void 0:r.contains(o))||!s)return;let a=0,$=0;if(this.dom!==s){const t=this.dom.getBoundingClientRect(),r=s.getBoundingClientRect();a=r.x-t.x+e.offsetX,$=r.y-t.y+e.offsetY}null===(i=e.dataTransfer)||void 0===i||i.setDragImage(this.dom,a,$);const c=ga.create(n.state.doc,this.getPos()),p=n.state.tr.setSelection(c);n.dispatch(p)}stopEvent(e){var t;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent(e);const r=e.target;if(!(this.dom.contains(r)&&!(null===(t=this.contentDOM)||void 0===t?void 0:t.contains(r))))return!1;if(["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)return!0;const{isEditable:i}=this.editor,{isDragging:n}=this,o=!!this.node.type.spec.draggable,s=ga.isSelectable(this.node),a="copy"===e.type,$="paste"===e.type,c="cut"===e.type,p="mousedown"===e.type,l=e.type.startsWith("drag")||"drop"===e.type;if(!o&&s&&l&&e.preventDefault(),o&&l&&!n)return e.preventDefault(),!1;if(o&&i&&!n&&p){const e=r.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(n||a||$||c||p&&s)}ignoreMutation(e){if(!this.dom||!this.contentDOM)return!0;if(this.node.isLeaf||this.node.isAtom)return!0;if("selection"===e.type)return!1;if(this.dom.contains(e.target)&&"childList"===e.type&&$q()){if([...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))return!1}return this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const r=this.getPos();return t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0})}deleteNode(){const e=this.getPos(),t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function ar(e,t,r){return new wb(e,(e,i,n,o)=>{const s=r instanceof Function?r(i):r,{tr:a}=e;return i[0]&&a.replaceWith(n-1,o,t.create(s)),a})}function br(e,t,r){let i=[];return r.doc.nodesBetween(e,t,(e,t)=>{i=[...i,...e.marks.map(r=>({from:t,to:t+e.nodeSize,mark:r}))]}),i}function Gc(e,t,r){return new wb(e,(e,i,n,o)=>{const s=r instanceof Function?r(i):r,{tr:a}=e,$=i[i.length-1],c=i[0];let p=o;if($){const r=c.search(/\S/),i=n+c.indexOf($),l=i+$.length;if(br(n,o,e).filter(e=>{const{excluded:r}=e.mark.type;return r.find(e=>e.name===t.name)}).filter(e=>e.to>i).length)return null;l<o&&a.delete(l,o),i>n&&a.delete(n+r,i),p=n+r+$.length,a.addMark(n+r,p,t.create(s)),a.removeStoredMark(t)}return a})}function Hc(e,t,r){const i=(n,o)=>{const s=[];return n.forEach(n=>{if(n.isText&&n.text){const{text:i}=n;let a,$=0;for(;null!==(a=e.exec(i));){const e=Math.max(a.length-2,0),i=Math.max(a.length-1,0);if(null==o?void 0:o.type.allowsMarkType(t)){const o=a.index+a[0].indexOf(a[e]),c=o+a[e].length,p=o+a[e].lastIndexOf(a[i]),l=p+a[i].length,d=r instanceof Function?r(a):r;o>0&&s.push(n.cut($,o)),s.push(n.cut(p,l).mark(t.create(d).addToSet(n.marks))),$=c}}$<i.length&&s.push(n.cut($))}else s.push(n.copy(i(n.content,n)))}),ba.fromArray(s)};return new _a({key:new rb("markPasteRule"),props:{transformPasted:e=>new da(i(e.content),e.openStart,e.openEnd)}})}function cr(e,t=0){const r=[];return e.forEach((e,i)=>{const n=t+i,o=n+e.nodeSize,s=e.marks.map(e=>({type:e.type.name,attrs:{...e.attrs}})),a={...e.attrs},$=cr(e,n+1),c={type:e.type.name,from:n,to:o};Object.keys(a).length&&(c.attrs=a),s.length&&(c.marks=s),$.length&&(c.content=$),e.text&&(c.text=e.text),r.push(c)}),r}function dr(e){return Bj(e)&&e instanceof ga}function Gj(e,t,r){const i=e.coordsAtPos(t),n=e.coordsAtPos(r,-1),o=Math.min(i.top,n.top),s=Math.max(i.bottom,n.bottom),a=Math.min(i.left,n.left),$=Math.max(i.right,n.right),c={top:o,bottom:s,left:a,right:$,width:$-a,height:s-o,x:a,y:o};return{...c,toJSON:()=>c}}var bb="top";var hb="bottom";var ib="right";var cb="left";var Yf="auto";var nd=[bb,hb,ib,cb];var Ic="start";var Zf="end";var er="clippingParents";var Hj="viewport";var od="popper";var fr="reference";var Ij=nd.reduce(function($,e){return $.concat([e+"-"+Ic,e+"-"+Zf])},[]);var Jj=[].concat(nd,[Yf]).reduce(function($,e){return $.concat([e,e+"-"+Ic,e+"-"+Zf])},[]);var gr="beforeRead";var hr="read";var ir="afterRead";var jr="beforeMain";var kr="main";var lr="afterMain";var mr="beforeWrite";var nr="write";var or="afterWrite";var pr=[gr,hr,ir,jr,kr,lr,mr,nr,or];function qr(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var r=t.styles[e]||{},s=t.attributes[e]||{},n=t.elements[e];jb(n)&&xb(n)&&(Object.assign(n.style,r),Object.keys(s).forEach(function(e){var t=s[e];!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)}))})}function rr(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(e){var s=t.elements[e],n=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:r[e]).reduce(function(e,t){return e[t]="",e},{});jb(s)&&xb(s)&&(Object.assign(s.style,a),Object.keys(n).forEach(function(e){s.removeAttribute(e)}))})}}function xb(e){return e?(e.nodeName||"").toLowerCase():null}function pd(e){return e instanceof kb(e).Element||e instanceof Element}function jb(e){return e instanceof kb(e).HTMLElement||e instanceof HTMLElement}function Kj(e){return"undefined"!=typeof ShadowRoot&&(e instanceof kb(e).ShadowRoot||e instanceof ShadowRoot)}function kb(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}var $f={name:"applyStyles",enabled:!0,phase:"write",fn:qr,effect:rr,requires:["computeStyles"]};function yb(e){return e.split("-")[0]}function _f(t){var e=Jc(t),i=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:s}}function Jc(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function Lj(e,t){var o=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(o&&Kj(o)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function Mj(e){return jb(e)&&"fixed"!==Jb(e).position?e.offsetParent:null}function sr(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&jb(e)&&"fixed"===Jb(e).position)return null;for(var r=fe(e);jb(r)&&["html","body"].indexOf(xb(r))<0;){var $=Jb(r);if("none"!==$.transform||"none"!==$.perspective||"paint"===$.contain||-1!==["transform","perspective"].indexOf($.willChange)||t&&"filter"===$.willChange||t&&$.filter&&"none"!==$.filter)return r;r=r.parentNode}return null}function qd(e){for(var t=kb(e),r=Mj(e);r&&tr(r)&&"static"===Jb(r).position;)r=Mj(r);return r&&("html"===xb(r)||"body"===xb(r)&&"static"===Jb(r).position)?t:r||sr(e)||t}function Jb(r){return kb(r).getComputedStyle(r)}function tr(e){return["table","td","th"].indexOf(xb(e))>=0}function fe(e){return"html"===xb(e)?e:e.assignedSlot||e.parentNode||(Kj(e)?e.host:null)||Wb(e)}function Wb(e){return((pd(e)?e.ownerDocument:e.document)||window.document).documentElement}function ag(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ge($,t,u){return Xb($,rd(t,u))}var Xb=Math.max;var rd=Math.min;var he=Math.round;function Nj(e){return Object.assign({},Oj(),e)}function Oj(){return{top:0,right:0,bottom:0,left:0}}function Pj(e,t){return t.reduce(function(t,r){return t[r]=e,t},{})}var ur=function(e,t){return e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,Nj("number"!=typeof e?e:Pj(e,nd))};function vr(e){var t,r=e.state,$=e.name,l=e.options,i=r.elements.arrow,a=r.modifiersData.popperOffsets,o=yb(r.placement),p=ag(o),s=[cb,ib].indexOf(o)>=0?"height":"width";if(i&&a){var n=ur(l.padding,r),c=_f(i),m="y"===p?bb:cb,f="y"===p?hb:ib,D=r.rects.reference[s]+r.rects.reference[p]-a[p]-r.rects.popper[s],u=a[p]-r.rects.reference[p],z=qd(i),J=z?"y"===p?z.clientHeight||0:z.clientWidth||0:0,d=D/2-u/2,g=n[m],j=J-c[s]-n[f],v=J/2-c[s]/2+d,q=ge(g,v,j),O=p;r.modifiersData[$]=((t={})[O]=q,t.centerOffset=q-v,t)}}function wr(e){var t=e.state,r=e.options.element,$=void 0===r?"[data-popper-arrow]":r;null!=$&&("string"!=typeof $||($=t.elements.popper.querySelector($)))&&Lj(t.elements.popper,$)&&(t.elements.arrow=$)}var xr={name:"arrow",enabled:!0,phase:"main",fn:vr,effect:wr,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var yr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zr(t){var e=t.x,o=t.y,r=window.devicePixelRatio||1;return{x:he(he(e*r)/r)||0,y:he(he(o*r)/r)||0}}function Qj(t){var e,o=t.popper,r=t.popperRect,p=t.placement,s=t.offsets,$=t.position,a=t.gpuAcceleration,i=t.adaptive,n=t.roundOffsets,l=!0===n?zr(s):"function"==typeof n?n(s):s,u=l.x,b=void 0===u?0:u,m=l.y,c=void 0===m?0:m,d=s.hasOwnProperty("x"),f=s.hasOwnProperty("y"),g=cb,v=bb,y=window;if(i){var x=qd(o),O="clientHeight",j="clientWidth";x===kb(o)&&(x=Wb(o),"static"!==Jb(x).position&&(O="scrollHeight",j="scrollWidth")),x=x,p===bb&&(v=hb,c-=x[O]-r.height,c*=a?1:-1),p===cb&&(g=ib,b-=x[j]-r.width,b*=a?1:-1)}var h,w=Object.assign({position:$},i&&yr);return a?Object.assign({},w,((h={})[v]=f?"0":"",h[g]=d?"0":"",h.transform=(y.devicePixelRatio||1)<2?"translate("+b+"px, "+c+"px)":"translate3d("+b+"px, "+c+"px, 0)",h)):Object.assign({},w,((e={})[v]=f?c+"px":"",e[g]=d?b+"px":"",e.transform="",e))}function Ar(t){var e=t.state,o=t.options,r=o.gpuAcceleration,p=void 0===r||r,s=o.adaptive,$=void 0===s||s,a=o.roundOffsets,i=void 0===a||a,n={placement:yb(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:p};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Qj(Object.assign({},n,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:$,roundOffsets:i})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Qj(Object.assign({},n,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:i})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Rj={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ar,data:{}};var ie={passive:!0};function Br(e){var s=e.state,r=e.instance,t=e.options,a=t.scroll,p=void 0===a||a,$=t.resize,n=void 0===$||$,i=kb(s.elements.popper),o=[].concat(s.scrollParents.reference,s.scrollParents.popper);return p&&o.forEach(function(e){e.addEventListener("scroll",r.update,ie)}),n&&i.addEventListener("resize",r.update,ie),function(){p&&o.forEach(function(e){e.removeEventListener("scroll",r.update,ie)}),n&&i.removeEventListener("resize",r.update,ie)}}var Sj={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Br,data:{}};function Cr(e){if(yb(e)===Yf)return[];var r=je(e);return[Tj(e),r,Tj(r)]}function Dr(e){var r=e.state,t=e.options,o=e.name;if(!r.modifiersData[o]._skip){for(var a=t.mainAxis,i=void 0===a||a,$=t.altAxis,n=void 0===$||$,p=t.fallbackPlacements,N=t.padding,l=t.boundary,s=t.rootBoundary,m=t.altBoundary,c=t.flipVariations,u=void 0===c||c,f=t.allowedAutoPlacements,d=r.options.placement,g=yb(d),v=p||(g===d||!u?[je(d)]:Cr(d)),P=[d].concat(v).reduce(function(e,t){return e.concat(yb(t)===Yf?Lr(r,{placement:t,boundary:l,rootBoundary:s,padding:N,flipVariations:u,allowedAutoPlacements:f}):t)},[]),b=r.rects.reference,O=r.rects.popper,k=new Map,x=!0,y=P[0],B=0;B<P.length;B++){var h=P[B],q=yb(h),j=ud(h)===Ic,V=[bb,hb].indexOf(q)>=0,w=V?"width":"height",A=sd(r,{placement:h,boundary:l,rootBoundary:s,altBoundary:m,padding:N}),E=V?j?ib:cb:j?hb:bb;b[w]>O[w]&&(E=je(E));var _=je(E),D=[];if(i&&D.push(A[q]<=0),n&&D.push(A[E]<=0,A[_]<=0),D.every(function(e){return e})){y=h,x=!1;break}k.set(h,D)}if(x)for(var F=function(e){var r=P.find(function(r){var t=k.get(r);if(t)return t.slice(0,e).every(function(e){return e})});if(r)return y=r,"break"},I=u?3:1;I>0;I--){if("break"===F(I))break}r.placement!==y&&(r.modifiersData[o]._skip=!0,r.placement=y,r.reset=!0)}}var Er={left:"right",right:"left",bottom:"top",top:"bottom"};function je(t){return t.replace(/left|right|bottom|top/g,function(t){return Er[t]})}var Fr={start:"end",end:"start"};function Tj(t){return t.replace(/start|end/g,function(t){return Fr[t]})}function sd(e,o){void 0===o&&(o={});var t=o,r=t.placement,$=void 0===r?e.placement:r,p=t.boundary,i=void 0===p?er:p,m=t.rootBoundary,n=void 0===m?Hj:m,a=t.elementContext,l=void 0===a?od:a,c=t.altBoundary,s=void 0!==c&&c,M=t.padding,k=void 0===M?0:M,u=Nj("number"!=typeof k?k:Pj(k,nd)),d=l===od?fr:od,f=e.elements.reference,g=e.rects.popper,b=e.elements[s?d:l],j=Ir(pd(b)?b:b.contextElement||Wb(e.elements.popper),i,n),v=Jc(f),x=Wj({reference:v,element:g,strategy:"absolute",placement:$}),q=eg(Object.assign({},g,x)),O=l===od?q:v,h={top:j.top-O.top+u.top,bottom:O.bottom-j.bottom+u.bottom,left:j.left-O.left+u.left,right:O.right-j.right+u.right},y=e.modifiersData.offset;if(l===od&&y){var C=y[$];Object.keys(h).forEach(function(e){var o=[ib,hb].indexOf(e)>=0?1:-1,t=[bb,hb].indexOf(e)>=0?"y":"x";h[e]+=C[t]*o})}return h}function Gr(e){var t=Jc(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function Uj(e,t){return t===Hj?eg(Jr(e)):jb(t)?Gr(t):eg(Kr(Wb(e)))}function Hr(e){var t=td(fe(e)),$=["absolute","fixed"].indexOf(Jb(e).position)>=0&&jb(e)?qd(e):e;return pd($)?t.filter(function(e){return pd(e)&&Lj(e,$)&&"body"!==xb(e)}):[]}function Ir(e,t,$){var r="clippingParents"===t?Hr(e):[].concat(t),i=[].concat(r,[$]),o=i[0],n=i.reduce(function(t,$){var r=Uj(e,$);return t.top=Xb(r.top,t.top),t.right=rd(r.right,t.right),t.bottom=rd(r.bottom,t.bottom),t.left=Xb(r.left,t.left),t},Uj(e,o));return n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}function Jr(e){var t=kb(e),r=Wb(e),i=t.visualViewport,l=r.clientWidth,$=r.clientHeight,o=0,w=0;return i&&(l=i.width,$=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,w=i.offsetTop)),{width:l,height:$,x:o+bg(e),y:w}}function bg(e){return Jc(Wb(e)).left+cg(e).scrollLeft}function cg(e){var o=kb(e);return{scrollLeft:o.pageXOffset,scrollTop:o.pageYOffset}}function Kr(e){var t,r=Wb(e),l=cg(e),$=null==(t=e.ownerDocument)?void 0:t.body,i=Xb(r.scrollWidth,r.clientWidth,$?$.scrollWidth:0,$?$.clientWidth:0),o=Xb(r.scrollHeight,r.clientHeight,$?$.scrollHeight:0,$?$.clientHeight:0),c=-l.scrollLeft+bg(e),j=-l.scrollTop;return"rtl"===Jb($||r).direction&&(c+=Xb(r.clientWidth,$?$.clientWidth:0)-i),{width:i,height:o,x:c,y:j}}function td(e,r){var $;void 0===r&&(r=[]);var t=Vj(e),o=t===(null==($=e.ownerDocument)?void 0:$.body),a=kb(t),l=o?[a].concat(a.visualViewport||[],dg(t)?t:[]):t,m=r.concat(l);return o?m:m.concat(td(fe(l)))}function Vj(r){return["html","body","#document"].indexOf(xb(r))>=0?r.ownerDocument.body:jb(r)&&dg(r)?r:Vj(fe(r))}function dg(e){var t=Jb(e),o=t.overflow,r=t.overflowX,$=t.overflowY;return /auto|scroll|overlay|hidden/.test(o+$+r)}function eg(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Wj(e){var t,$=e.reference,r=e.element,a=e.placement,i=a?yb(a):null,d=a?ud(a):null,f=$.x+$.width/2-r.width/2,l=$.y+$.height/2-r.height/2;switch(i){case bb:t={x:f,y:$.y-r.height};break;case hb:t={x:f,y:$.y+$.height};break;case ib:t={x:$.x+$.width,y:l};break;case cb:t={x:$.x-r.width,y:l};break;default:t={x:$.x,y:$.y};}var o=i?ag(i):null;if(null!=o){var v="y"===o?"height":"width";switch(d){case Ic:t[o]=t[o]-($[v]/2-r[v]/2);break;case Zf:t[o]=t[o]+($[v]/2-r[v]/2);}}return t}function ud(t){return t.split("-")[1]}function Lr(e,t){void 0===t&&(t={});var r=t,i=r.placement,a=r.boundary,$=r.rootBoundary,n=r.padding,o=r.flipVariations,l=r.allowedAutoPlacements,u=void 0===l?Jj:l,c=ud(i),p=c?o?Ij:Ij.filter(function(e){return ud(e)===c}):nd,d=p.filter(function(e){return u.indexOf(e)>=0});0===d.length&&(d=p);var m=d.reduce(function(t,r){return t[r]=sd(e,{placement:r,boundary:a,rootBoundary:$,padding:n})[yb(r)],t},{});return Object.keys(m).sort(function(e,t){return m[e]-m[t]})}var Mr={name:"flip",enabled:!0,phase:"main",fn:Dr,requiresIfExists:["offset"],data:{_skip:!1}};function Xj(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Yj(e){return[bb,ib,hb,cb].some(function(t){return e[t]>=0})}function Nr(e){var t=e.state,r=e.name,a=t.rects.reference,$=t.rects.popper,i=t.modifiersData.preventOverflow,p=sd(t,{elementContext:"reference"}),o=sd(t,{altBoundary:!0}),s=Xj(p,a),h=Xj(o,$,i),f=Yj(s),n=Yj(h);t.modifiersData[r]={referenceClippingOffsets:s,popperEscapeOffsets:h,isReferenceHidden:f,hasPopperEscaped:n},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":n})}var Or={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Nr};function Pr(e,t,a){var $=yb(e),r=[cb,bb].indexOf($)>=0?-1:1,i="function"==typeof a?a(Object.assign({},t,{placement:e})):a,o=i[0],n=i[1];return o=o||0,n=(n||0)*r,[cb,ib].indexOf($)>=0?{x:n,y:o}:{x:o,y:n}}function Qr(e){var t=e.state,a=e.options,$=e.name,r=a.offset,i=void 0===r?[0,0]:r,o=Jj.reduce(function(e,a){return e[a]=Pr(a,t.rects,i),e},{}),n=o[t.placement],s=n.x,c=n.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=c),t.modifiersData[$]=o}var Rr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Qr};function Sr(e){var t=e.state,f=e.name;t.modifiersData[f]=Wj({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Zj={name:"popperOffsets",enabled:!0,phase:"read",fn:Sr,data:{}};function Tr(e){var t=e.state,r=e.options,$=e.name,i=r.mainAxis,a=void 0===i||i,o=r.altAxis,s=void 0!==o&&o,p=r.boundary,m=r.rootBoundary,w=r.altBoundary,n=r.padding,l=r.tether,R=void 0===l||l,k=r.tetherOffset,X=void 0===k?0:k,f=sd(t,{boundary:p,rootBoundary:m,padding:n,altBoundary:w}),u=yb(t.placement),c=ud(t.placement),d=!c,g=ag(u),h=Ur(g),v=t.modifiersData.popperOffsets,x=t.rects.reference,j=t.rects.popper,y="function"==typeof X?X(Object.assign({},t.rects,{placement:t.placement})):X,q={x:0,y:0};if(v){if(a||s){var O="y"===g?bb:cb,b="y"===g?hb:ib,A="y"===g?"height":"width",B=v[g],D=v[g]+f[O],M=v[g]-f[b],P=R?-j[A]/2:0,F=c===Ic?x[A]:j[A],L=c===Ic?-j[A]:-x[A],S=t.elements.arrow,V=R&&S?_f(S):{width:0,height:0},E=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Oj(),I=E[O],T=E[b],z=ge(0,x[A],V[A]),C=d?x[A]/2-P-z-I-y:F-z-I-y,G=d?-x[A]/2+P+z+T+y:L+z+T+y,H=t.elements.arrow&&qd(t.elements.arrow),J=H?"y"===g?H.clientTop||0:H.clientLeft||0:0,K=t.modifiersData.offset?t.modifiersData.offset[t.placement][g]:0,N=v[g]+C-K-J,Q=v[g]+G-K;if(a){var U=ge(R?rd(D,N):D,B,R?Xb(M,Q):M);v[g]=U,q[g]=U-B}if(s){var W="x"===g?bb:cb,Y="x"===g?hb:ib,Z=v[h],_=Z+f[W],ee=Z-f[Y],te=ge(R?rd(_,N):_,Z,R?Xb(ee,Q):ee);v[h]=te,q[h]=te-Z}}t.modifiersData[$]=q}}function Ur($){return"x"===$?"y":"x"}var Vr={name:"preventOverflow",enabled:!0,phase:"main",fn:Tr,requiresIfExists:["offset"]};function Wr(e,t,r){void 0===r&&(r=!1);var $=Wb(t),o=Jc(e),l=jb(t),a={scrollLeft:0,scrollTop:0},i={x:0,y:0};return(l||!l&&!r)&&(("body"!==xb(t)||dg($))&&(a=Xr(t)),jb(t)?((i=Jc(t)).x+=t.clientLeft,i.y+=t.clientTop):$&&(i.x=bg($))),{x:o.left+a.scrollLeft-i.x,y:o.top+a.scrollTop-i.y,width:o.width,height:o.height}}function Xr(e){return e!==kb(e)&&jb(e)?Yr(e):cg(e)}function Yr(l){return{scrollLeft:l.scrollLeft,scrollTop:l.scrollTop}}function Zr(r){var e=new Map,t=new Set,n=[];return r.forEach(function(r){e.set(r.name,r)}),r.forEach(function(r){t.has(r.name)||function r(a){t.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(n){if(!t.has(n)){var a=e.get(n);a&&r(a)}}),n.push(a)}(r)}),n}function $r(r){var e=Zr(r);return pr.reduce(function(r,t){return r.concat(e.filter(function(r){return r.phase===t}))},[])}function _r(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function as(t){var e=t.reduce(function(t,e){var a=t[e.name];return t[e.name]=a?Object.assign({},a,e,{options:Object.assign({},a.options,e.options),data:Object.assign({},a.data,e.data)}):e,t},{});return Object.keys(e).map(function(t){return e[t]})}var $j={placement:"bottom",modifiers:[],strategy:"absolute"};function _j(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return!r.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function fg(e){void 0===e&&(e={});var r=e,t=r.defaultModifiers,o=void 0===t?[]:t,i=r.defaultOptions,n=void 0===i?$j:i;return function(e,r,t){void 0===t&&(t=n);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},$j,n),modifiersData:{},elements:{reference:e,popper:r},attributes:{},styles:{}},s=[],a=!1,d={state:i,setOptions:function(t){$(),i.options=Object.assign({},n,i.options,t),i.scrollParents={reference:pd(e)?td(e):e.contextElement?td(e.contextElement):[],popper:td(r)};var a=$r(as([].concat(o,i.options.modifiers)));return i.orderedModifiers=a.filter(function(e){return e.enabled}),i.orderedModifiers.forEach(function(e){var r=e.name,t=e.options,o=void 0===t?{}:t,n=e.effect;if("function"==typeof n){var a=n({state:i,name:r,instance:d,options:o});s.push(a||function(){})}}),d.update()},forceUpdate:function(){if(!a){var e=i.elements,r=e.reference,t=e.popper;if(_j(r,t)){i.rects={reference:Wr(r,qd(t),"fixed"===i.options.strategy),popper:_f(t)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach(function(e){return i.modifiersData[e.name]=Object.assign({},e.data)});for(var o=0;o<i.orderedModifiers.length;o++)if(!0!==i.reset){var n=i.orderedModifiers[o],s=n.fn,$=n.options,p=void 0===$?{}:$,c=n.name;"function"==typeof s&&(i=s({state:i,options:p,name:c,instance:d})||i)}else i.reset=!1,o=-1}}},update:_r(function(){return new Promise(function(e){d.forceUpdate(),e(i)})}),destroy:function(){$(),a=!0}};if(!_j(e,r))return d;function $(){s.forEach(function(e){return e()}),s=[]}return d.setOptions(t).then(function(e){!a&&t.onFirstUpdate&&t.onFirstUpdate(e)}),d}}var h=fg();var bs=[Sj,Zj,Rj,$f],i=fg({defaultModifiers:bs});var cs=[Sj,Zj,Rj,$f,Rr,Mr,Vr,xr,Or],ds=fg({defaultModifiers:cs});var es="tippy-box",ak="tippy-content",fs="tippy-backdrop",bk="tippy-arrow",ck="tippy-svg-arrow",jc={passive:!0,capture:!0};function gg(e,t,r){if(Array.isArray(e)){var n=e[t];return null==n?Array.isArray(r)?r[t]:r:n}return e}function hg(e,t){var r={}.toString.call(e);return 0===r.indexOf("[object")&&r.indexOf(t+"]")>-1}function dk(e,t){return"function"==typeof e?e.apply(void 0,t):e}function ek(e,t){return 0===t?e:function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)};var r}function gs(e){return e.split(/\s+/).filter(Boolean)}function vd(e){return[].concat(e)}function fk(e,t){-1===e.indexOf(t)&&e.push(t)}function hs(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function is(e){return e.split("-")[0]}function ke(e){return[].slice.call(e)}function js(e){return Object.keys(e).reduce(function(t,r){return void 0!==e[r]&&(t[r]=e[r]),t},{})}function wd(){return document.createElement("div")}function le(e){return["Element","Fragment"].some(function(t){return hg(e,t)})}function ks(e){return hg(e,"NodeList")}function ls(e){return hg(e,"MouseEvent")}function ms(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function ns(e){return le(e)?[e]:ks(e)?ke(e):Array.isArray(e)?e:ke(document.querySelectorAll(e))}function ig(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function gk(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function os(e){var t,r=vd(e)[0];return(null==r?void 0:null==(t=r.ownerDocument)?void 0:t.body)?r.ownerDocument:document}function ps(e,t){var r=t.clientX,n=t.clientY;return e.every(function(e){var t=e.popperRect,o=e.popperState,i=e.props.interactiveBorder,a=is(o.placement),s=o.modifiersData.offset;if(!s)return!0;var $="bottom"===a?s.top.y:0,f="top"===a?s.bottom.y:0,u="right"===a?s.left.x:0,c="left"===a?s.right.x:0,p=t.top-n+$>i,v=n-t.bottom-f>i,l=t.left-r+u>i,d=r-t.right-c>i;return p||v||l||d})}function jg(e,t,r){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[n](t,r)})}var zb={isTouch:!1},qs=0;function rs(){zb.isTouch||(zb.isTouch=!0,window.performance&&document.addEventListener("mousemove",hk))}function hk(){var e=performance.now();e-qs<20&&(zb.isTouch=!1,document.removeEventListener("mousemove",hk)),qs=e}function ss(){var e=document.activeElement;if(ms(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function ts(){document.addEventListener("touchstart",rs,jc),window.addEventListener("blur",ss)}var j,us="undefined"!=typeof window&&"undefined"!=typeof document,vs=us?navigator.userAgent:"",ws=/MSIE |Trident\//.test(vs);var xs={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},ys={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},lb=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},xs,{},ys),zs=Object.keys(lb),As=function(e){Object.keys(e).forEach(function(t){lb[t]=e[t]})};function ik(e){var t=(e.plugins||[]).reduce(function(t,r){var n=r.name,o=r.defaultValue;return n&&(t[n]=void 0!==e[n]?e[n]:o),t},{});return Object.assign({},e,{},t)}function Bs(e,t){return(t?Object.keys(ik(Object.assign({},lb,{plugins:t}))):zs).reduce(function(t,r){var n=(e.getAttribute("data-tippy-"+r)||"").trim();if(!n)return t;if("content"===r)t[r]=n;else try{t[r]=JSON.parse(n)}catch(o){t[r]=n}return t},{})}function jk(e,t){var r=Object.assign({},t,{content:dk(t.content,[e])},t.ignoreAttributes?{}:Bs(e,t.plugins));return r.aria=Object.assign({},lb.aria,{},r.aria),r.aria={expanded:"auto"===r.aria.expanded?t.interactive:r.aria.expanded,content:"auto"===r.aria.content?t.interactive?null:"describedby":r.aria.content},r}var Cs=function(){return"innerHTML"};function kg(e,t){e[Cs()]=t}function kk(e){var t=wd();return!0===e?t.className=bk:(t.className=ck,le(e)?t.appendChild(e):kg(t,e)),t}function lk(e,t){le(t.content)?(kg(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?kg(e,t.content):e.textContent=t.content)}function lg(e){var t=e.firstElementChild,r=ke(t.children);return{box:t,content:r.find(function(e){return e.classList.contains(ak)}),arrow:r.find(function(e){return e.classList.contains(bk)||e.classList.contains(ck)}),backdrop:r.find(function(e){return e.classList.contains(fs)})}}function mk(e){var t=wd(),r=wd();r.className=es,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=wd();function o(r,n){var o=lg(t),i=o.box,a=o.content,s=o.arrow;n.theme?i.setAttribute("data-theme",n.theme):i.removeAttribute("data-theme"),"string"==typeof n.animation?i.setAttribute("data-animation",n.animation):i.removeAttribute("data-animation"),n.inertia?i.setAttribute("data-inertia",""):i.removeAttribute("data-inertia"),i.style.maxWidth="number"==typeof n.maxWidth?n.maxWidth+"px":n.maxWidth,n.role?i.setAttribute("role",n.role):i.removeAttribute("role"),r.content===n.content&&r.allowHTML===n.allowHTML||lk(a,e.props),n.arrow?s?r.arrow!==n.arrow&&(i.removeChild(s),i.appendChild(kk(n.arrow))):i.appendChild(kk(n.arrow)):s&&i.removeChild(s)}return n.className=ak,n.setAttribute("data-state","hidden"),lk(n,e.props),t.appendChild(r),r.appendChild(n),o(e.props,e.props),{popper:t,onUpdate:o}}mk.$$tippy=!0;var Ds=1,mg=[],nk=[];function Es(e,t){var r,n,o,i,a,s,$,f=jk(e,Object.assign({},lb,{},ik(js(t)))),u=!1,c=!1,p=!1,v=!1,l=[],d=ek(z,f.interactiveDebounce),x=Ds++,S=hs(f.plugins),m={id:x,reference:e,popper:wd(),popperInstance:null,props:f,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:S,clearDelayTimeouts:function(){clearTimeout(r),clearTimeout(n),cancelAnimationFrame(o)},setProps:function(t){0;if(m.state.isDestroyed)return;M("onBeforeUpdate",[m,t]),W();var r=m.props,n=jk(e,Object.assign({},m.props,{},t,{ignoreAttributes:!0}));m.props=n,H(),r.interactiveDebounce!==n.interactiveDebounce&&(D(),d=ek(z,n.interactiveDebounce));r.triggerTarget&&!n.triggerTarget?vd(r.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):n.triggerTarget&&e.removeAttribute("aria-expanded");R(),L(),h&&h(r,n);m.popperInstance&&(G(),J().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}));M("onAfterUpdate",[m,t])},setContent:function(e){m.setProps({content:e})},show:function(){0;var e=m.state.isVisible,t=m.state.isDestroyed,r=!m.state.isEnabled,n=zb.isTouch&&!m.props.touch,o=gg(m.props.duration,0,lb.duration);if(e||t||r||n)return;if(w().hasAttribute("disabled"))return;if(M("onShow",[m],!1),!1===m.props.onShow(m))return;m.state.isVisible=!0,C()&&(g.style.visibility="visible");L(),_(),m.state.isMounted||(g.style.transition="none");if(C()){var i=A(),a=i.box,$=i.content;ig([a,$],0)}s=function(){var e;if(m.state.isVisible&&!v){if(v=!0,g.offsetHeight,g.style.transition=m.props.moveTransition,C()&&m.props.animation){var t=A(),r=t.box,n=t.content;ig([r,n],o),gk([r,n],"visible")}I(),R(),fk(nk,m),null==(e=m.popperInstance)||e.forceUpdate(),m.state.isMounted=!0,M("onMount",[m]),m.props.animation&&C()&&function(e,t){N(e,t)}(o,function(){m.state.isShown=!0,M("onShown",[m])})}},function(){var e,t=m.props.appendTo,r=w();e=m.props.interactive&&t===lb.appendTo||"parent"===t?r.parentNode:dk(t,[r]);e.contains(g)||e.appendChild(g);G(),0}()},hide:function(){0;var e=!m.state.isVisible,t=m.state.isDestroyed,r=!m.state.isEnabled,n=gg(m.props.duration,1,lb.duration);if(e||t||r)return;if(M("onHide",[m],!1),!1===m.props.onHide(m))return;m.state.isVisible=!1,m.state.isShown=!1,v=!1,u=!1,C()&&(g.style.visibility="hidden");if(D(),j(),L(),C()){var o=A(),i=o.box,a=o.content;m.props.animation&&(ig([i,a],n),gk([i,a],"hidden"))}I(),R(),m.props.animation?C()&&function(e,t){N(e,function(){!m.state.isVisible&&g.parentNode&&g.parentNode.contains(g)&&t()})}(n,m.unmount):m.unmount()},hideWithInteractivity:function(e){0;E().addEventListener("mousemove",d),fk(mg,d),d(e)},enable:function(){m.state.isEnabled=!0},disable:function(){m.hide(),m.state.isEnabled=!1},unmount:function(){0;m.state.isVisible&&m.hide();if(!m.state.isMounted)return;K(),J().forEach(function(e){e._tippy.unmount()}),g.parentNode&&g.parentNode.removeChild(g);nk=nk.filter(function(e){return e!==m}),m.state.isMounted=!1,M("onHidden",[m])},destroy:function(){0;if(m.state.isDestroyed)return;m.clearDelayTimeouts(),m.unmount(),W(),delete e._tippy,m.state.isDestroyed=!0,M("onDestroy",[m])}};if(!f.render)return m;var Q=f.render(m),g=Q.popper,h=Q.onUpdate;g.setAttribute("data-tippy-root",""),g.id="tippy-"+m.id,m.popper=g,e._tippy=m,g._tippy=m;var y=S.map(function(e){return e.fn(m)}),b=e.hasAttribute("aria-expanded");return H(),R(),L(),M("onCreate",[m]),f.showOnCreate&&Z(),g.addEventListener("mouseenter",function(){m.props.interactive&&m.state.isVisible&&m.clearDelayTimeouts()}),g.addEventListener("mouseleave",function(e){m.props.interactive&&m.props.trigger.indexOf("mouseenter")>=0&&(E().addEventListener("mousemove",d),d(e))}),m;function O(){var e=m.props.touch;return Array.isArray(e)?e:[e,0]}function T(){return"hold"===O()[0]}function C(){var e;return!!(null==(e=m.props.render)?void 0:e.$$tippy)}function w(){return $||e}function E(){var e=w().parentNode;return e?os(e):document}function A(){return lg(g)}function P(e){return m.state.isMounted&&!m.state.isVisible||zb.isTouch||i&&"focus"===i.type?0:gg(m.props.delay,e?0:1,lb.delay)}function L(){g.style.pointerEvents=m.props.interactive&&m.state.isVisible?"":"none",g.style.zIndex=""+m.props.zIndex}function M(e,t,r){var n;(void 0===r&&(r=!0),y.forEach(function(r){r[e]&&r[e].apply(void 0,t)}),r)&&(n=m.props)[e].apply(n,t)}function I(){var t=m.props.aria;if(t.content){var r="aria-"+t.content,n=g.id;vd(m.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(r);if(m.state.isVisible)e.setAttribute(r,t?t+" "+n:n);else{var o=t&&t.replace(n,"").trim();o?e.setAttribute(r,o):e.removeAttribute(r)}})}}function R(){!b&&m.props.aria.expanded&&vd(m.props.triggerTarget||e).forEach(function(e){m.props.interactive?e.setAttribute("aria-expanded",m.state.isVisible&&e===w()?"true":"false"):e.removeAttribute("aria-expanded")})}function D(){E().removeEventListener("mousemove",d),mg=mg.filter(function(e){return e!==d})}function k(e){if(!(zb.isTouch&&(p||"mousedown"===e.type)||m.props.interactive&&g.contains(e.target))){if(w().contains(e.target)){if(zb.isTouch)return;if(m.state.isVisible&&m.props.trigger.indexOf("click")>=0)return}else M("onClickOutside",[m,e]);!0===m.props.hideOnClick&&(m.clearDelayTimeouts(),m.hide(),c=!0,setTimeout(function(){c=!1}),m.state.isMounted||j())}}function B(){p=!0}function V(){p=!1}function _(){var e=E();e.addEventListener("mousedown",k,!0),e.addEventListener("touchend",k,jc),e.addEventListener("touchstart",V,jc),e.addEventListener("touchmove",B,jc)}function j(){var e=E();e.removeEventListener("mousedown",k,!0),e.removeEventListener("touchend",k,jc),e.removeEventListener("touchstart",V,jc),e.removeEventListener("touchmove",B,jc)}function N(e,t){var r=A().box;function n(e){e.target===r&&(jg(r,"remove",n),t())}if(0===e)return t();jg(r,"remove",a),jg(r,"add",n),a=n}function U(t,r,n){void 0===n&&(n=!1),vd(m.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,r,n),l.push({node:e,eventType:t,handler:r,options:n})})}function H(){T()&&(U("touchstart",F,{passive:!0}),U("touchend",q,{passive:!0})),gs(m.props.trigger).forEach(function(e){if("manual"!==e)switch(U(e,F),e){case"mouseenter":U("mouseleave",q);break;case"focus":U(ws?"focusout":"blur",X);break;case"focusin":U("focusout",X);}})}function W(){l.forEach(function(e){var t=e.node,r=e.eventType,n=e.handler,o=e.options;t.removeEventListener(r,n,o)}),l=[]}function F(e){var t,r=!1;if(m.state.isEnabled&&!Y(e)&&!c){var n="focus"===(null==(t=i)?void 0:t.type);i=e,$=e.currentTarget,R(),!m.state.isVisible&&ls(e)&&mg.forEach(function(t){return t(e)}),"click"===e.type&&(m.props.trigger.indexOf("mouseenter")<0||u)&&!1!==m.props.hideOnClick&&m.state.isVisible?r=!0:Z(e),"click"===e.type&&(u=!r),r&&!n&&ee(e)}}function z(e){var t=e.target,r=w().contains(t)||g.contains(t);"mousemove"===e.type&&r||ps(J().concat(g).map(function(e){var t,r=null==(t=e._tippy.popperInstance)?void 0:t.state;return r?{popperRect:e.getBoundingClientRect(),popperState:r,props:f}:null}).filter(Boolean),e)&&(D(),ee(e))}function q(e){Y(e)||m.props.trigger.indexOf("click")>=0&&u||(m.props.interactive?m.hideWithInteractivity(e):ee(e))}function X(e){m.props.trigger.indexOf("focusin")<0&&e.target!==w()||m.props.interactive&&e.relatedTarget&&g.contains(e.relatedTarget)||ee(e)}function Y(e){return!!zb.isTouch&&T()!==e.type.indexOf("touch")>=0}function G(){K();var t=m.props,r=t.popperOptions,n=t.placement,o=t.offset,i=t.getReferenceClientRect,a=t.moveTransition,$=C()?lg(g).arrow:null,f=i?{getBoundingClientRect:i,contextElement:i.contextElement||w()}:e,u=[{name:"offset",options:{offset:o}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(C()){var r=A().box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?r.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?r.setAttribute("data-"+e,""):r.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];C()&&$&&u.push({name:"arrow",options:{element:$,padding:3}}),u.push.apply(u,(null==r?void 0:r.modifiers)||[]),m.popperInstance=ds(f,g,Object.assign({},r,{placement:n,onFirstUpdate:s,modifiers:u}))}function K(){m.popperInstance&&(m.popperInstance.destroy(),m.popperInstance=null)}function J(){return ke(g.querySelectorAll("[data-tippy-root]"))}function Z(e){m.clearDelayTimeouts(),e&&M("onTrigger",[m,e]),_();var t=P(!0),n=O(),o=n[0],i=n[1];zb.isTouch&&"hold"===o&&i&&(t=i),t?r=setTimeout(function(){m.show()},t):m.show()}function ee(e){if(m.clearDelayTimeouts(),M("onUntrigger",[m,e]),m.state.isVisible){if(!(m.props.trigger.indexOf("mouseenter")>=0&&m.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&u)){var t=P(!1);t?n=setTimeout(function(){m.state.isVisible&&m.hide()},t):o=requestAnimationFrame(function(){m.hide()})}}else j()}}function Kc(e,t){void 0===t&&(t={});var r=lb.plugins.concat(t.plugins||[]);ts();var n=Object.assign({},t,{plugins:r}),o=ns(e),i=o.reduce(function(e,t){var r=t&&Es(t,n);return r&&e.push(r),e},[]);return le(e)?i[0]:i}Kc.defaultProps=lb,Kc.setDefaultProps=As,Kc.currentInput=zb;var k=Object.assign({},$f,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});Kc.setDefaultProps({render:mk});class Fs{constructor({editor:e,element:t,view:i,tippyOptions:n}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null==e?void 0:e.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(e.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=i,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(n),this.element.style.visibility="visible"}createTooltip(e={}){this.tippy=Kc(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...e})}update(e,t){const{state:i,composing:n}=e,{doc:r,selection:l}=i,o=t&&t.doc.eq(r)&&t.selection.eq(l);if(n||o)return;const{empty:s,ranges:p}=l,u=Math.min(...p.map(e=>e.$from.pos)),$=Math.max(...p.map(e=>e.$to.pos)),d=!r.textBetween(u,$).length&&Cj(e.state.selection);s||d?this.hide():(this.tippy.setProps({getReferenceClientRect:()=>{if(dr(e.state.selection)){const t=e.nodeDOM(u);if(t)return t.getBoundingClientRect()}return Gj(e,u,$)}}),this.show())}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const ok=new rb("menuBubble"),pk=e=>new _a({key:ok,view:t=>new Fs({view:t,...e})}),l=Va.create({name:"bubbleMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[pk({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});class Gs{constructor({editor:e,element:t,view:i,tippyOptions:n}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null==e?void 0:e.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(e.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=i,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(n),this.element.style.visibility="visible"}createTooltip(e={}){this.tippy=Kc(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...e})}update(e,t){const{state:i,composing:n}=e,{doc:o,selection:r}=i,s=t&&t.doc.eq(o)&&t.selection.eq(r);if(n||s)return;const{$anchor:l,empty:p,from:$,to:a}=r,u=1===l.depth,d=!r.$anchor.parent.isLeaf&&!r.$anchor.parent.textContent;p&&u&&d?(this.tippy.setProps({getReferenceClientRect:()=>Gj(e,$,a)}),this.show()):this.hide()}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const qk=new rb("menuFloating"),rk=e=>new _a({key:qk,view:t=>new Gs({view:t,...e})}),m=Va.create({name:"floatingMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[rk({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});var Ab=Object.freeze({});function fa(e){return null==e}function aa(e){return null!=e}function sa(e){return!0===e}function Hs(e){return!1===e}function xd(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function Ma(e){return null!==e&&"object"==typeof e}var ng=Object.prototype.toString;function Xa(e){return"[object Object]"===ng.call(e)}function Is(e){return"[object RegExp]"===ng.call(e)}function sk(e){var r=parseFloat(String(e));return r>=0&&Math.floor(r)===r&&isFinite(e)}function og(e){return aa(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function Js(e){return null==e?"":Array.isArray(e)||Xa(e)&&e.toString===ng?JSON.stringify(e,null,2):String(e)}function yd(e){var r=parseFloat(e);return isNaN(r)?e:r}function mb(e,r){for(var $=Object.create(null),t=e.split(","),a=0;a<t.length;a++)$[t[a]]=!0;return r?function(e){return $[e.toLowerCase()]}:function(e){return $[e]}}var n=mb("slot,component",!0),Ks=mb("key,ref,slot,slot-scope,is");function Kb(e,r){if(e.length){var $=e.indexOf(r);if($>-1)return e.splice($,1)}}var Ls=Object.prototype.hasOwnProperty;function Na(e,r){return Ls.call(e,r)}function kc(e){var r=Object.create(null);return function($){return r[$]||(r[$]=e($))}}var Ms=/-(\w)/g,lc=kc(function(e){return e.replace(Ms,function(e,r){return r?r.toUpperCase():""})}),Ns=kc(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),Os=/\B([A-Z])/g,zd=kc(function(e){return e.replace(Os,"-$1").toLowerCase()});function Ps(e,r){function $($){var t=arguments.length;return t?t>1?e.apply(r,arguments):e.call(r,$):e.call(r)}return $._length=e.length,$}function Qs(e,r){return e.bind(r)}var Rs=Function.prototype.bind?Qs:Ps;function pg(e,r){r=r||0;for(var $=e.length-r,t=new Array($);$--;)t[$]=e[$+r];return t}function oa(e,r){for(var $ in r)e[$]=r[$];return e}function tk(e){for(var r={},$=0;$<e.length;$++)e[$]&&oa(r,e[$]);return r}function Ra(e,r,$){}var me=function(e,r,$){return!1},uk=function(e){return e};function mc(e,r){if(e===r)return!0;var $=Ma(e),t=Ma(r);if(!$||!t)return!$&&!t&&String(e)===String(r);try{var a=Array.isArray(e),n=Array.isArray(r);if(a&&n)return e.length===r.length&&e.every(function(e,$){return mc(e,r[$])});if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(a||n)return!1;var i=Object.keys(e),o=Object.keys(r);return i.length===o.length&&i.every(function($){return mc(e[$],r[$])})}catch(f){return!1}}function vk(e,r){for(var $=0;$<e.length;$++)if(mc(e[$],r))return $;return-1}function ne(e){var r=!1;return function(){r||(r=!0,e.apply(this,arguments))}}var wk="data-server-rendered",oe=["component","directive","filter"],xk=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],db={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:me,isReservedAttr:me,isUnknownElement:me,getTagNamespace:Ra,parsePlatformTagName:uk,mustUseProp:me,async:!0,_lifecycleHooks:xk},Ss=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Ts(e){var r=(e+"").charCodeAt(0);return 36===r||95===r}function Lc(e,r,$,t){Object.defineProperty(e,r,{value:$,enumerable:!!t,writable:!0,configurable:!0})}var Us=new RegExp("[^"+Ss.source+".$_\\d]");function Vs(e){if(!Us.test(e)){var r=e.split(".");return function(e){for(var $=0;$<r.length;$++){if(!e)return;e=e[r[$]]}return e}}}var yk,Ws=("__proto__"in{}),Ya="undefined"!=typeof window,qg="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,zk=qg&&WXEnvironment.platform.toLowerCase(),Ha=Ya&&window.navigator.userAgent.toLowerCase(),Mc=Ha&&/msie|trident/.test(Ha),Nc=Ha&&Ha.indexOf("msie 9.0")>0,rg=Ha&&Ha.indexOf("edge/")>0,o=Ha&&Ha.indexOf("android")>0||"android"===zk,Xs=Ha&&/iphone|ipad|ipod|ios/.test(Ha)||"ios"===zk,p=Ha&&/chrome\/\d+/.test(Ha)&&!rg,q=Ha&&/phantomjs/.test(Ha),Ak=Ha&&Ha.match(/firefox\/(\d+)/),sg={}.watch,Ys=!1;if(Ya)try{var Bk={};Object.defineProperty(Bk,"passive",{get:function(){Ys=!0}}),window.addEventListener("test-passive",null,Bk)}catch(e){}var pe=function(){return void 0===yk&&(yk=!Ya&&!qg&&"undefined"!=typeof Ke&&Ke.process&&"server"===Ke.process.env.VUE_ENV),yk},qe=Ya&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function Oc(e){return"function"==typeof e&&/native code/.test(e.toString())}var tg,re="undefined"!=typeof Symbol&&Oc(Symbol)&&"undefined"!=typeof Reflect&&Oc(Reflect.ownKeys);tg="undefined"!=typeof Set&&Oc(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var r,s,t,u,Zs=Ra,$s=0,Za=function(){this.id=$s++,this.subs=[]};Za.prototype.addSub=function(e){this.subs.push(e)},Za.prototype.removeSub=function(e){Kb(this.subs,e)},Za.prototype.depend=function(){Za.target&&Za.target.addDep(this)},Za.prototype.notify=function(){var e=this.subs.slice();for(var r=0,$=e.length;r<$;r++)e[r].update()},Za.target=null;var se=[];function Ad(e){se.push(e),Za.target=e}function Bd(){se.pop(),Za.target=se[se.length-1]}var Sa=function(e,r,$,t,a,n,i,o){this.tag=e,this.data=r,this.children=$,this.text=t,this.elm=a,this.ns=void 0,this.context=n,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=r&&r.key,this.componentOptions=i,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=o,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Ck={child:{configurable:!0}};Ck.child.get=function(){return this.componentInstance},Object.defineProperties(Sa.prototype,Ck);var nc=function(e){void 0===e&&(e="");var r=new Sa;return r.text=e,r.isComment=!0,r};function Pc(e){return new Sa(void 0,void 0,void 0,String(e))}function ug(e){var r=new Sa(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return r.ns=e.ns,r.isStatic=e.isStatic,r.key=e.key,r.isComment=e.isComment,r.fnContext=e.fnContext,r.fnOptions=e.fnOptions,r.fnScopeId=e.fnScopeId,r.asyncMeta=e.asyncMeta,r.isCloned=!0,r}var Dk=Array.prototype,ue=Object.create(Dk),_s=["push","pop","shift","unshift","splice","sort","reverse"];_s.forEach(function(e){var r=Dk[e];Lc(ue,e,function(){for(var $=[],t=arguments.length;t--;)$[t]=arguments[t];var a,n=r.apply(this,$),i=this.__ob__;switch(e){case"push":case"unshift":a=$;break;case"splice":a=$.slice(2);}return a&&i.observeArray(a),i.dep.notify(),n})});var at=Object.getOwnPropertyNames(ue),Ek=!0;function Yb(e){Ek=e}var ve=function(e){this.value=e,this.dep=new Za,this.vmCount=0,Lc(e,"__ob__",this),Array.isArray(e)?(Ws?bt(e,ue):ct(e,ue,at),this.observeArray(e)):this.walk(e)};function bt(e,r){e.__proto__=r}function ct(e,r,$){for(var t=0,a=$.length;t<a;t++){var n=$[t];Lc(e,n,r[n])}}function oc(e,r){var $;if(Ma(e)&&!(e instanceof Sa))return Na(e,"__ob__")&&e.__ob__ instanceof ve?$=e.__ob__:Ek&&!pe()&&(Array.isArray(e)||Xa(e))&&Object.isExtensible(e)&&!e._isVue&&($=new ve(e)),r&&$&&$.vmCount++,$}function pc(e,r,$,t,a){var n=new Za,i=Object.getOwnPropertyDescriptor(e,r);if(!i||!1!==i.configurable){var o=i&&i.get,f=i&&i.set;o&&!f||2!==arguments.length||($=e[r]);var s=!a&&oc($);Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:function(){var r=o?o.call(e):$;return Za.target&&(n.depend(),s&&(s.dep.depend(),Array.isArray(r)&&Gk(r))),r},set:function(r){var t=o?o.call(e):$;r===t||r!=r&&t!=t||o&&!f||(f?f.call(e,r):$=r,s=!a&&oc(r),n.notify())}})}}function vg(e,r,$){if(Array.isArray(e)&&sk(r))return e.length=Math.max(e.length,r),e.splice(r,1,$),$;if(r in e&&!(r in Object.prototype))return e[r]=$,$;var t=e.__ob__;return e._isVue||t&&t.vmCount?$:t?(pc(t.value,r,$),t.dep.notify(),$):(e[r]=$,$)}function Fk(e,r){if(Array.isArray(e)&&sk(r))e.splice(r,1);else{var $=e.__ob__;e._isVue||$&&$.vmCount||Na(e,r)&&(delete e[r],$&&$.dep.notify())}}function Gk(e){for(var r=void 0,$=0,t=e.length;$<t;$++)(r=e[$])&&r.__ob__&&r.__ob__.dep.depend(),Array.isArray(r)&&Gk(r)}ve.prototype.walk=function(e){for(var r=Object.keys(e),$=0;$<r.length;$++)pc(e,r[$])},ve.prototype.observeArray=function(e){for(var r=0,$=e.length;r<$;r++)oc(e[r])};var Bb=db.optionMergeStrategies;function wg(e,r){if(!r)return e;for(var $,t,a,n=re?Reflect.ownKeys(r):Object.keys(r),i=0;i<n.length;i++)"__ob__"!==($=n[i])&&(t=e[$],a=r[$],Na(e,$)?t!==a&&Xa(t)&&Xa(a)&&wg(t,a):vg(e,$,a));return e}function xg(e,r,$){return $?function(){var t="function"==typeof r?r.call($,$):r,a="function"==typeof e?e.call($,$):e;return t?wg(t,a):a}:r?e?function(){return wg("function"==typeof r?r.call(this,this):r,"function"==typeof e?e.call(this,this):e)}:r:e}function dt(e,r){var $=r?e?e.concat(r):Array.isArray(r)?r:[r]:e;return $?et($):$}function et(e){for(var r=[],$=0;$<e.length;$++)-1===r.indexOf(e[$])&&r.push(e[$]);return r}function ft(e,r,$,t){var a=Object.create(e||null);return r?oa(a,r):a}Bb.data=function(e,r,$){return $?xg(e,r,$):r&&"function"!=typeof r?e:xg(e,r)},xk.forEach(function(e){Bb[e]=dt}),oe.forEach(function(e){Bb[e+"s"]=ft}),Bb.watch=function(e,r,$,t){if(e===sg&&(e=void 0),r===sg&&(r=void 0),!r)return Object.create(e||null);if(!e)return r;var a={};for(var n in oa(a,e),r){var i=a[n],o=r[n];i&&!Array.isArray(i)&&(i=[i]),a[n]=i?i.concat(o):Array.isArray(o)?o:[o]}return a},Bb.props=Bb.methods=Bb.inject=Bb.computed=function(e,r,$,t){if(!e)return r;var a=Object.create(null);return oa(a,e),r&&oa(a,r),a},Bb.provide=xg;var gt=function(e,r){return void 0===r?e:r};function ht(e,r){var $=e.props;if($){var t,a,n={};if(Array.isArray($))for(t=$.length;t--;)"string"==typeof(a=$[t])&&(n[lc(a)]={type:null});else if(Xa($))for(var i in $)a=$[i],n[lc(i)]=Xa(a)?a:{type:a};else 0;e.props=n}}function it(e,r){var $=e.inject;if($){var t=e.inject={};if(Array.isArray($))for(var a=0;a<$.length;a++)t[$[a]]={from:$[a]};else if(Xa($))for(var n in $){var i=$[n];t[n]=Xa(i)?oa({from:n},i):{from:i}}else 0}}function jt(e){var r=e.directives;if(r)for(var $ in r){var t=r[$];"function"==typeof t&&(r[$]={bind:t,update:t})}}function qc(e,r,$){if("function"==typeof r&&(r=r.options),ht(r,$),it(r,$),jt(r),!r._base&&(r.extends&&(e=qc(e,r.extends,$)),r.mixins))for(var t=0,a=r.mixins.length;t<a;t++)e=qc(e,r.mixins[t],$);var n,i={};for(n in e)o(n);for(n in r)Na(e,n)||o(n);function o(t){var a=Bb[t]||gt;i[t]=a(e[t],r[t],$,t)}return i}function yg(e,r,$,t){if("string"==typeof $){var a=e[r];if(Na(a,$))return a[$];var n=lc($);if(Na(a,n))return a[n];var i=Ns(n);if(Na(a,i))return a[i];var o=a[$]||a[n]||a[i];return o}}function zg(e,r,$,t){var a=r[e],n=!Na($,e),i=$[e],o=Ik(Boolean,a.type);if(o>-1)if(n&&!Na(a,"default"))i=!1;else if(""===i||i===zd(e)){var f=Ik(String,a.type);(f<0||o<f)&&(i=!0)}if(void 0===i){i=kt(t,a,e);var s=Ek;Yb(!0),oc(i),Yb(s)}return i}function kt(e,r,$){if(Na(r,"default")){var t=r.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[$]&&void 0!==e._props[$]?e._props[$]:"function"==typeof t&&"Function"!==Ag(r.type)?t.call(e):t}}var lt=/^\s*function (\w+)/;function Ag(e){var r=e&&e.toString().match(lt);return r?r[1]:""}function Hk(e,r){return Ag(e)===Ag(r)}function Ik(e,r){if(!Array.isArray(r))return Hk(r,e)?0:-1;for(var $=0,t=r.length;$<t;$++)if(Hk(r[$],e))return $;return-1}function rc(r,$,t){Ad();try{if($)for(var a=$;a=a.$parent;){var n=a.$options.errorCaptured;if(n)for(var i=0;i<n.length;i++)try{if(!1===n[i].call(a,r,$,t))return}catch(e){Jk(e,a,"errorCaptured hook")}}Jk(r,$,t)}finally{Bd()}}function Qc(r,$,t,a,n){var i;try{(i=t?r.apply($,t):r.call($))&&!i._isVue&&og(i)&&!i._handled&&(i.catch(function(e){return rc(e,a,n+" (Promise/async)")}),i._handled=!0)}catch(e){rc(e,a,n)}return i}function Jk(r,$,t){if(db.errorHandler)try{return db.errorHandler.call(null,r,$,t)}catch(e){e!==r&&Kk(e,null,"config.errorHandler")}Kk(r,$,t)}function Kk(e,r,$){if(!Ya&&!qg||"undefined"==typeof console)throw e;console.error(e)}var mt,v,w,x,y,z,A,B,C,nt=!1,Bg=[],ot=!1;function we(){ot=!1;var e=Bg.slice(0);Bg.length=0;for(var r=0;r<e.length;r++)e[r]()}if("undefined"!=typeof Promise&&Oc(Promise)){var pt=Promise.resolve();mt=function(){pt.then(we),Xs&&setTimeout(Ra)},nt=!0}else if(Mc||"undefined"==typeof MutationObserver||!Oc(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())mt="undefined"!=typeof setImmediate&&Oc(setImmediate)?function(){setImmediate(we)}:function(){setTimeout(we,0)};else{var Cg=1,qt=new MutationObserver(we),Lk=document.createTextNode(String(Cg));qt.observe(Lk,{characterData:!0}),mt=function(){Cg=(Cg+1)%2,Lk.data=String(Cg)},nt=!0}function Dg(r,$){var t;if(Bg.push(function(){if(r)try{r.call($)}catch(e){rc(e,$,"nextTick")}else t&&t($)}),ot||(ot=!0,mt()),!r&&"undefined"!=typeof Promise)return new Promise(function(e){t=e})}var D,E,F,Mk=new tg;function xe(e){Eg(e,Mk),Mk.clear()}function Eg(e,r){var $,t,a=Array.isArray(e);if(!(!a&&!Ma(e)||Object.isFrozen(e)||e instanceof Sa)){if(e.__ob__){var n=e.__ob__.dep.id;if(r.has(n))return;r.add(n)}if(a)for($=e.length;$--;)Eg(e[$],r);else for($=(t=Object.keys(e)).length;$--;)Eg(e[t[$]],r)}}var Nk=kc(function(e){var r="&"===e.charAt(0),$="~"===(e=r?e.slice(1):e).charAt(0),t="!"===(e=$?e.slice(1):e).charAt(0);return{name:e=t?e.slice(1):e,once:$,capture:t,passive:r}});function Fg(e,r){function $(){var e=arguments,t=$.fns;if(!Array.isArray(t))return Qc(t,null,arguments,r,"v-on handler");for(var a=t.slice(),n=0;n<a.length;n++)Qc(a[n],null,e,r,"v-on handler")}return $.fns=e,$}function Ok(e,r,$,t,a,n){var i,o,f,s;for(i in e)o=e[i],f=r[i],s=Nk(i),fa(o)||(fa(f)?(fa(o.fns)&&(o=e[i]=Fg(o,n)),sa(s.once)&&(o=e[i]=a(s.name,o,s.capture)),$(s.name,o,s.capture,s.passive,s.params)):o!==f&&(f.fns=o,e[i]=f));for(i in r)fa(e[i])&&t((s=Nk(i)).name,r[i],s.capture)}function Zb(e,r,$){var t;e instanceof Sa&&(e=e.data.hook||(e.data.hook={}));var a=e[r];function n(){$.apply(this,arguments),Kb(t.fns,n)}fa(a)?t=Fg([n]):aa(a.fns)&&sa(a.merged)?(t=a).fns.push(n):t=Fg([a,n]),t.merged=!0,e[r]=t}function rt(e,r,$){var t=r.options.props;if(!fa(t)){var a={},n=e.attrs,i=e.props;if(aa(n)||aa(i))for(var o in t){var f=zd(o);Pk(a,i,o,f,!0)||Pk(a,n,o,f,!1)}return a}}function Pk(e,r,$,t,a){if(aa(r)){if(Na(r,$))return e[$]=r[$],a||delete r[$],!0;if(Na(r,t))return e[$]=r[t],a||delete r[t],!0}return!1}function st(e){for(var r=0;r<e.length;r++)if(Array.isArray(e[r]))return Array.prototype.concat.apply([],e);return e}function Gg(e){return xd(e)?[Pc(e)]:Array.isArray(e)?Qk(e):void 0}function Cd(e){return aa(e)&&aa(e.text)&&Hs(e.isComment)}function Qk(e,r){var $,t,a,n,i=[];for($=0;$<e.length;$++)fa(t=e[$])||"boolean"==typeof t||(n=i[a=i.length-1],Array.isArray(t)?t.length>0&&(Cd((t=Qk(t,(r||"")+"_"+$))[0])&&Cd(n)&&(i[a]=Pc(n.text+t[0].text),t.shift()),i.push.apply(i,t)):xd(t)?Cd(n)?i[a]=Pc(n.text+t):""!==t&&i.push(Pc(t)):Cd(t)&&Cd(n)?i[a]=Pc(n.text+t.text):(sa(e._isVList)&&aa(t.tag)&&fa(t.key)&&aa(r)&&(t.key="__vlist"+r+"_"+$+"__"),i.push(t)));return i}function tt(e){var r=e.$options.provide;r&&(e._provided="function"==typeof r?r.call(e):r)}function ut(e){var r=Rk(e.$options.inject,e);r&&(Yb(!1),Object.keys(r).forEach(function($){pc(e,$,r[$])}),Yb(!0))}function Rk(e,r){if(e){for(var $=Object.create(null),t=re?Reflect.ownKeys(e):Object.keys(e),a=0;a<t.length;a++){var n=t[a];if("__ob__"!==n){for(var i=e[n].from,o=r;o;){if(o._provided&&Na(o._provided,i)){$[n]=o._provided[i];break}o=o.$parent}if(!o)if("default"in e[n]){var f=e[n].default;$[n]="function"==typeof f?f.call(r):f}else 0}}return $}}function Hg(e,r){if(!e||!e.length)return{};for(var $={},t=0,a=e.length;t<a;t++){var n=e[t],i=n.data;if(i&&i.attrs&&i.attrs.slot&&delete i.attrs.slot,n.context!==r&&n.fnContext!==r||!i||null==i.slot)($.default||($.default=[])).push(n);else{var o=i.slot,f=$[o]||($[o]=[]);"template"===n.tag?f.push.apply(f,n.children||[]):f.push(n)}}for(var s in $)$[s].every(vt)&&delete $[s];return $}function vt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Dd(e){return e.isComment&&e.asyncFactory}function ye(e,r,$){var t,a=Object.keys(r).length>0,n=e?!!e.$stable:!a,i=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(n&&$&&$!==Ab&&i===$.$key&&!a&&!$.$hasNormal)return $;for(var o in t={},e)e[o]&&"$"!==o[0]&&(t[o]=wt(r,o,e[o]))}else t={};for(var f in r)f in t||(t[f]=xt(r,f));return e&&Object.isExtensible(e)&&(e._normalized=t),Lc(t,"$stable",n),Lc(t,"$key",i),Lc(t,"$hasNormal",a),t}function wt(e,r,$){var t=function(){var e=arguments.length?$.apply(null,arguments):$({}),r=(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:Gg(e))&&e[0];return e&&(!r||1===e.length&&r.isComment&&!Dd(r))?void 0:e};return $.proxy&&Object.defineProperty(e,r,{get:t,enumerable:!0,configurable:!0}),t}function xt(e,r){return function(){return e[r]}}function yt(e,r){var $,t,a,n,i;if(Array.isArray(e)||"string"==typeof e)for($=new Array(e.length),t=0,a=e.length;t<a;t++)$[t]=r(e[t],t);else if("number"==typeof e)for($=new Array(e),t=0;t<e;t++)$[t]=r(t+1,t);else if(Ma(e))if(re&&e[Symbol.iterator]){$=[];for(var o=e[Symbol.iterator](),f=o.next();!f.done;)$.push(r(f.value,$.length)),f=o.next()}else for(n=Object.keys(e),$=new Array(n.length),t=0,a=n.length;t<a;t++)i=n[t],$[t]=r(e[i],i,t);return aa($)||($=[]),$._isVList=!0,$}function zt(e,r,$,t){var a,n=this.$scopedSlots[e];n?($=$||{},t&&($=oa(oa({},t),$)),a=n($)||("function"==typeof r?r():r)):a=this.$slots[e]||("function"==typeof r?r():r);var i=$&&$.slot;return i?this.$createElement("template",{slot:i},a):a}function At(e){return yg(this.$options,"filters",e,!0)||uk}function Sk(e,r){return Array.isArray(e)?-1===e.indexOf(r):e!==r}function Bt(e,r,$,t,a){var n=db.keyCodes[r]||$;return a&&t&&!db.keyCodes[r]?Sk(a,t):n?Sk(n,e):t?zd(t)!==r:void 0===e}function Ct(e,r,$,t,a){if($)if(Ma($)){var n;Array.isArray($)&&($=tk($));var i=function(i){if("class"===i||"style"===i||Ks(i))n=e;else{var o=e.attrs&&e.attrs.type;n=t||db.mustUseProp(r,o,i)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var f=lc(i),s=zd(i);f in n||s in n||(n[i]=$[i],a&&((e.on||(e.on={}))["update:"+i]=function(e){$[i]=e}))};for(var o in $)i(o)}else;return e}function Dt(e,r){var $=this._staticTrees||(this._staticTrees=[]),t=$[e];return t&&!r?t:(Tk(t=$[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),t)}function Et(e,r,$){return Tk(e,"__once__"+r+($?"_"+$:""),!0),e}function Tk(e,r,$){if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t]&&"string"!=typeof e[t]&&Uk(e[t],r+"_"+t,$);else Uk(e,r,$)}function Uk(e,r,$){e.isStatic=!0,e.key=r,e.isOnce=$}function Ft(e,r){if(r)if(Xa(r)){var $=e.on=e.on?oa({},e.on):{};for(var t in r){var a=$[t],n=r[t];$[t]=a?[].concat(a,n):n}}else;return e}function Vk(e,r,$,t){r=r||{$stable:!$};for(var a=0;a<e.length;a++){var n=e[a];Array.isArray(n)?Vk(n,r,$):n&&(n.proxy&&(n.fn.proxy=!0),r[n.key]=n.fn)}return t&&(r.$key=t),r}function Gt(e,r){for(var $=0;$<r.length;$+=2){var t=r[$];"string"==typeof t&&t&&(e[r[$]]=r[$+1])}return e}function Ht(e,r){return"string"==typeof e?r+e:e}function Wk(e){e._o=Et,e._n=yd,e._s=Js,e._l=yt,e._t=zt,e._q=mc,e._i=vk,e._m=Dt,e._f=At,e._k=Bt,e._b=Ct,e._v=Pc,e._e=nc,e._u=Vk,e._g=Ft,e._d=Gt,e._p=Ht}function Ig(e,r,$,t,a){var n,i=this,o=a.options;Na(t,"_uid")?(n=Object.create(t))._original=t:(n=t,t=t._original);var f=sa(o._compiled),s=!f;this.data=e,this.props=r,this.children=$,this.parent=t,this.listeners=e.on||Ab,this.injections=Rk(o.inject,t),this.slots=function(){return i.$slots||ye(e.scopedSlots,i.$slots=Hg($,t)),i.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ye(e.scopedSlots,this.slots())}}),f&&(this.$options=o,this.$slots=this.slots(),this.$scopedSlots=ye(e.scopedSlots,this.$slots)),o._scopeId?this._c=function(e,r,$,a){var i=ze(n,e,r,$,a,s);return i&&!Array.isArray(i)&&(i.fnScopeId=o._scopeId,i.fnContext=t),i}:this._c=function(e,r,$,t){return ze(n,e,r,$,t,s)}}function It(e,r,$,t,a){var n=e.options,i={},o=n.props;if(aa(o))for(var f in o)i[f]=zg(f,o,r||Ab);else aa($.attrs)&&Yk(i,$.attrs),aa($.props)&&Yk(i,$.props);var s=new Ig($,i,a,t,e),v=n.render.call(null,s._c,s);if(v instanceof Sa)return Xk(v,$,s.parent,n,s);if(Array.isArray(v)){for(var c=Gg(v)||[],P=new Array(c.length),l=0;l<c.length;l++)P[l]=Xk(c[l],$,s.parent,n,s);return P}}function Xk(e,r,$,t,a){var n=ug(e);return n.fnContext=$,n.fnOptions=t,r.slot&&((n.data||(n.data={})).slot=r.slot),n}function Yk(e,r){for(var $ in r)e[lc($)]=r[$]}Wk(Ig.prototype);var Jg={init:function(e,r){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var $=e;Jg.prepatch($,$)}else{(e.componentInstance=Jt(e,Ed)).$mount(r?e.elm:void 0,r)}},prepatch:function(e,r){var $=r.componentOptions;bu(r.componentInstance=e.componentInstance,$.propsData,$.listeners,r,$.children)},insert:function(e){var r=e.context,$=e.componentInstance;$._isMounted||($._isMounted=!0,nb($,"mounted")),e.data.keepAlive&&(r._isMounted?iu($):Mg($,!0))},destroy:function(e){var r=e.componentInstance;r._isDestroyed||(e.data.keepAlive?fl(r,!0):r.$destroy())}},Zk=Object.keys(Jg);function $k(e,r,$,t,a){if(!fa(e)){var n=$.$options._base;if(Ma(e)&&(e=n.extend(e)),"function"==typeof e){var i;if(fa(e.cid)&&void 0===(e=Ut(i=e,n)))return Tt(i,r,$,t,a);r=r||{},Sg(e),aa(r.model)&&Mt(e.options,r);var o=rt(r,e,a);if(sa(e.options.functional))return It(e,o,r,$,t);var f=r.on;if(r.on=r.nativeOn,sa(e.options.abstract)){var s=r.slot;r={},s&&(r.slot=s)}Kt(r);var v=e.options.name||a;return new Sa("vue-component-"+e.cid+(v?"-"+v:""),r,void 0,void 0,void 0,$,{Ctor:e,propsData:o,listeners:f,tag:a,children:t},i)}}}function Jt(e,r){var $={_isComponent:!0,_parentVnode:e,parent:r},t=e.data.inlineTemplate;return aa(t)&&($.render=t.render,$.staticRenderFns=t.staticRenderFns),new e.componentOptions.Ctor($)}function Kt(e){for(var r=e.hook||(e.hook={}),$=0;$<Zk.length;$++){var t=Zk[$],a=r[t],n=Jg[t];a===n||a&&a._merged||(r[t]=a?Lt(n,a):n)}}function Lt(e,r){var $=function($,t){e($,t),r($,t)};return $._merged=!0,$}function Mt(e,r){var $=e.model&&e.model.prop||"value",t=e.model&&e.model.event||"input";(r.attrs||(r.attrs={}))[$]=r.model.value;var a=r.on||(r.on={}),n=a[t],i=r.model.callback;aa(n)?(Array.isArray(n)?-1===n.indexOf(i):n!==i)&&(a[t]=[i].concat(n)):a[t]=i}var Nt=1,_k=2;function ze(e,r,$,t,a,n){return(Array.isArray($)||xd($))&&(a=t,t=$,$=void 0),sa(n)&&(a=_k),Ot(e,r,$,t,a)}function Ot(e,r,$,t,a){if(aa($)&&aa($.__ob__))return nc();if(aa($)&&aa($.is)&&(r=$.is),!r)return nc();var n,i,o;(Array.isArray(t)&&"function"==typeof t[0]&&(($=$||{}).scopedSlots={default:t[0]},t.length=0),a===_k?t=Gg(t):a===Nt&&(t=st(t)),"string"==typeof r)?(i=e.$vnode&&e.$vnode.ns||db.getTagNamespace(r),n=db.isReservedTag(r)?new Sa(db.parsePlatformTagName(r),$,t,void 0,void 0,e):$&&$.pre||!aa(o=yg(e.$options,"components",r))?new Sa(r,$,t,void 0,void 0,e):$k(o,$,e,t,r)):n=$k(r,$,e,t);return Array.isArray(n)?n:aa(n)?(aa(i)&&al(n,i),aa($)&&Pt($),n):nc()}function al(e,r,$){if(e.ns=r,"foreignObject"===e.tag&&(r=void 0,$=!0),aa(e.children))for(var t=0,a=e.children.length;t<a;t++){var n=e.children[t];aa(n.tag)&&(fa(n.ns)||sa($)&&"svg"!==n.tag)&&al(n,r,$)}}function Pt(e){Ma(e.style)&&xe(e.style),Ma(e.class)&&xe(e.class)}function Qt(e){e._vnode=null,e._staticTrees=null;var r=e.$options,$=e.$vnode=r._parentVnode,t=$&&$.context;e.$slots=Hg(r._renderChildren,t),e.$scopedSlots=Ab,e._c=function(r,$,t,a){return ze(e,r,$,t,a,!1)},e.$createElement=function(r,$,t,a){return ze(e,r,$,t,a,!0)};var a=$&&$.data;pc(e,"$attrs",a&&a.attrs||Ab,null,!0),pc(e,"$listeners",r._parentListeners||Ab,null,!0)}var Kg,Rt=null;function St(r){Wk(r.prototype),r.prototype.$nextTick=function(e){return Dg(e,this)},r.prototype._render=function(){var r,$=this,t=$.$options,a=t.render,n=t._parentVnode;n&&($.$scopedSlots=ye(n.data.scopedSlots,$.$slots,$.$scopedSlots)),$.$vnode=n;try{Rt=$,r=a.call($._renderProxy,$.$createElement)}catch(e){rc(e,$,"render"),r=$._vnode}finally{Rt=null}return Array.isArray(r)&&1===r.length&&(r=r[0]),r instanceof Sa||(r=nc()),r.parent=n,r}}function Lg(e,r){return(e.__esModule||re&&"Module"===e[Symbol.toStringTag])&&(e=e.default),Ma(e)?r.extend(e):e}function Tt(e,r,$,t,a){var n=nc();return n.asyncFactory=e,n.asyncMeta={data:r,context:$,children:t,tag:a},n}function Ut(e,r){if(sa(e.error)&&aa(e.errorComp))return e.errorComp;if(aa(e.resolved))return e.resolved;var $=Rt;if($&&aa(e.owners)&&-1===e.owners.indexOf($)&&e.owners.push($),sa(e.loading)&&aa(e.loadingComp))return e.loadingComp;if($&&!aa(e.owners)){var t=e.owners=[$],a=!0,n=null,i=null;$.$on("hook:destroyed",function(){return Kb(t,$)});var o=function(e){for(var r=0,$=t.length;r<$;r++)t[r].$forceUpdate();e&&(t.length=0,null!==n&&(clearTimeout(n),n=null),null!==i&&(clearTimeout(i),i=null))},f=ne(function($){e.resolved=Lg($,r),a?t.length=0:o(!0)}),s=ne(function(r){aa(e.errorComp)&&(e.error=!0,o(!0))}),v=e(f,s);return Ma(v)&&(og(v)?fa(e.resolved)&&v.then(f,s):og(v.component)&&(v.component.then(f,s),aa(v.error)&&(e.errorComp=Lg(v.error,r)),aa(v.loading)&&(e.loadingComp=Lg(v.loading,r),0===v.delay?e.loading=!0:n=setTimeout(function(){n=null,fa(e.resolved)&&fa(e.error)&&(e.loading=!0,o(!1))},v.delay||200)),aa(v.timeout)&&(i=setTimeout(function(){i=null,fa(e.resolved)&&s(null)},v.timeout)))),a=!1,e.loading?e.loadingComp:e.resolved}}function bl(e){if(Array.isArray(e))for(var r=0;r<e.length;r++){var $=e[r];if(aa($)&&(aa($.componentOptions)||Dd($)))return $}}function Vt(e){e._events=Object.create(null),e._hasHookEvent=!1;var r=e.$options._parentListeners;r&&cl(e,r)}function Wt(e,r){Kg.$on(e,r)}function Xt(e,r){Kg.$off(e,r)}function Yt(e,r){var $=Kg;return function t(){null!==r.apply(null,arguments)&&$.$off(e,t)}}function cl(e,r,$){Kg=e,Ok(r,$||{},Wt,Xt,Yt,e),Kg=void 0}function Zt(e){var r=/^hook:/;e.prototype.$on=function(e,$){var t=this;if(Array.isArray(e))for(var a=0,n=e.length;a<n;a++)t.$on(e[a],$);else(t._events[e]||(t._events[e]=[])).push($),r.test(e)&&(t._hasHookEvent=!0);return t},e.prototype.$once=function(e,r){var $=this;function t(){$.$off(e,t),r.apply($,arguments)}return t.fn=r,$.$on(e,t),$},e.prototype.$off=function(e,r){var $=this;if(!arguments.length)return $._events=Object.create(null),$;if(Array.isArray(e)){for(var t=0,a=e.length;t<a;t++)$.$off(e[t],r);return $}var n,i=$._events[e];if(!i)return $;if(!r)return $._events[e]=null,$;for(var o=i.length;o--;)if((n=i[o])===r||n.fn===r){i.splice(o,1);break}return $},e.prototype.$emit=function(e){var r=this,$=r._events[e];if($){$=$.length>1?pg($):$;for(var t=pg(arguments,1),a="event handler for \""+e+"\"",n=0,i=$.length;n<i;n++)Qc($[n],r,t,r,a)}return r}}var Ed=null;function dl(e){var r=Ed;return Ed=e,function(){Ed=r}}function $t(e){var r=e.$options,$=r.parent;if($&&!r.abstract){for(;$.$options.abstract&&$.$parent;)$=$.$parent;$.$children.push(e)}e.$parent=$,e.$root=$?$.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function _t(e){e.prototype._update=function(e,r){var $=this,t=$.$el,a=$._vnode,n=dl($);$._vnode=e,$.$el=a?$.__patch__(a,e):$.__patch__($.$el,e,r,!1),n(),t&&(t.__vue__=null),$.$el&&($.$el.__vue__=$),$.$vnode&&$.$parent&&$.$vnode===$.$parent._vnode&&($.$parent.$el=$.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){nb(e,"beforeDestroy"),e._isBeingDestroyed=!0;var r=e.$parent;!r||r._isBeingDestroyed||e.$options.abstract||Kb(r.$children,e),e._watcher&&e._watcher.teardown();for(var $=e._watchers.length;$--;)e._watchers[$].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),nb(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function au(e,r,$){var t;return e.$el=r,e.$options.render||(e.$options.render=nc),nb(e,"beforeMount"),t=function(){e._update(e._render(),$)},new ob(e,t,Ra,{before:function(){e._isMounted&&!e._isDestroyed&&nb(e,"beforeUpdate")}},!0),$=!1,null==e.$vnode&&(e._isMounted=!0,nb(e,"mounted")),e}function bu(e,r,$,t,a){var n=t.data.scopedSlots,i=e.$scopedSlots,o=!!(n&&!n.$stable||i!==Ab&&!i.$stable||n&&e.$scopedSlots.$key!==n.$key||!n&&e.$scopedSlots.$key),f=!!(a||e.$options._renderChildren||o);if(e.$options._parentVnode=t,e.$vnode=t,e._vnode&&(e._vnode.parent=t),e.$options._renderChildren=a,e.$attrs=t.data.attrs||Ab,e.$listeners=$||Ab,r&&e.$options.props){Yb(!1);for(var s=e._props,v=e.$options._propKeys||[],c=0;c<v.length;c++){var P=v[c],l=e.$options.props;s[P]=zg(P,l,r,e)}Yb(!0),e.$options.propsData=r}$=$||Ab;var z=e.$options._parentListeners;e.$options._parentListeners=$,cl(e,$,z),f&&(e.$slots=Hg(a,t.context),e.$forceUpdate())}function el(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Mg(e,r){if(r){if(e._directInactive=!1,el(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var $=0;$<e.$children.length;$++)Mg(e.$children[$]);nb(e,"activated")}}function fl(e,r){if(!(r&&(e._directInactive=!0,el(e))||e._inactive)){e._inactive=!0;for(var $=0;$<e.$children.length;$++)fl(e.$children[$]);nb(e,"deactivated")}}function nb(e,r){Ad();var $=e.$options[r],t=r+" hook";if($)for(var a=0,n=$.length;a<n;a++)Qc($[a],e,null,e,t);e._hasHookEvent&&e.$emit("hook:"+r),Bd()}var Lb=[],Ng=[],Og={},cu=!1,du=!1,Ae=0;function eu(){Ae=Lb.length=Ng.length=0,Og={},cu=du=!1}var fu=0,gl=Date.now;if(Ya&&!Mc){var Pg=window.performance;Pg&&"function"==typeof Pg.now&&gl()>document.createEvent("Event").timeStamp&&(gl=function(){return Pg.now()})}function gu(){var e,r;for(fu=gl(),du=!0,Lb.sort(function(e,r){return e.id-r.id}),Ae=0;Ae<Lb.length;Ae++)(e=Lb[Ae]).before&&e.before(),r=e.id,Og[r]=null,e.run();var $=Ng.slice(),t=Lb.slice();eu(),ju($),hu(t),qe&&db.devtools&&qe.emit("flush")}function hu(e){for(var r=e.length;r--;){var $=e[r],t=$.vm;t._watcher===$&&t._isMounted&&!t._isDestroyed&&nb(t,"updated")}}function iu(e){e._inactive=!1,Ng.push(e)}function ju(e){for(var r=0;r<e.length;r++)e[r]._inactive=!0,Mg(e[r],!0)}function ku(e){var r=e.id;if(null==Og[r]){if(Og[r]=!0,du){for(var $=Lb.length-1;$>Ae&&Lb[$].id>e.id;)$--;Lb.splice($+1,0,e)}else Lb.push(e);cu||(cu=!0,Dg(gu))}}var lu=0,ob=function(e,r,$,t,a){this.vm=e,a&&(e._watcher=this),e._watchers.push(this),t?(this.deep=!!t.deep,this.user=!!t.user,this.lazy=!!t.lazy,this.sync=!!t.sync,this.before=t.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=$,this.id=++lu,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new tg,this.newDepIds=new tg,this.expression="","function"==typeof r?this.getter=r:(this.getter=Vs(r),this.getter||(this.getter=Ra)),this.value=this.lazy?void 0:this.get()};ob.prototype.get=function(){var r;Ad(this);var $=this.vm;try{r=this.getter.call($,$)}catch(e){if(!this.user)throw e;rc(e,$,"getter for watcher \""+this.expression+"\"")}finally{this.deep&&xe(r),Bd(),this.cleanupDeps()}return r},ob.prototype.addDep=function(e){var r=e.id;this.newDepIds.has(r)||(this.newDepIds.add(r),this.newDeps.push(e),this.depIds.has(r)||e.addSub(this))},ob.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var r=this.deps[e];this.newDepIds.has(r.id)||r.removeSub(this)}var $=this.depIds;this.depIds=this.newDepIds,this.newDepIds=$,this.newDepIds.clear(),$=this.deps,this.deps=this.newDeps,this.newDeps=$,this.newDeps.length=0},ob.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ku(this)},ob.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||Ma(e)||this.deep){var r=this.value;if(this.value=e,this.user){var $="callback for watcher \""+this.expression+"\"";Qc(this.cb,this.vm,[e,r],this.vm,$)}else this.cb.call(this.vm,e,r)}}},ob.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ob.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},ob.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||Kb(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var $b={enumerable:!0,configurable:!0,get:Ra,set:Ra};function Qg(e,r,$){$b.get=function(){return this[r][$]},$b.set=function(e){this[r][$]=e},Object.defineProperty(e,$,$b)}function mu(e){e._watchers=[];var r=e.$options;r.props&&nu(e,r.props),r.methods&&su(e,r.methods),r.data?ou(e):oc(e._data={},!0),r.computed&&ru(e,r.computed),r.watch&&r.watch!==sg&&tu(e,r.watch)}function nu(e,r){var $=e.$options.propsData||{},t=e._props={},a=e.$options._propKeys=[],n=!e.$parent;n||Yb(!1);var i=function(n){a.push(n);var i=zg(n,r,$,e);pc(t,n,i),n in e||Qg(e,"_props",n)};for(var o in r)i(o);Yb(!0)}function ou(e){var r=e.$options.data;Xa(r=e._data="function"==typeof r?pu(r,e):r||{})||(r={});for(var $=Object.keys(r),t=e.$options.props,a=(e.$options.methods,$.length);a--;){var n=$[a];0,t&&Na(t,n)||Ts(n)||Qg(e,"_data",n)}oc(r,!0)}function pu(r,$){Ad();try{return r.call($,$)}catch(e){return rc(e,$,"data()"),{}}finally{Bd()}}var qu={lazy:!0};function ru(e,r){var $=e._computedWatchers=Object.create(null),t=pe();for(var a in r){var n=r[a],i="function"==typeof n?n:n.get;0,t||($[a]=new ob(e,i||Ra,Ra,qu)),a in e||hl(e,a,n)}}function hl(e,r,$){var t=!pe();"function"==typeof $?($b.get=t?il(r):jl($),$b.set=Ra):($b.get=$.get?t&&!1!==$.cache?il(r):jl($.get):Ra,$b.set=$.set||Ra),Object.defineProperty(e,r,$b)}function il(e){return function(){var r=this._computedWatchers&&this._computedWatchers[e];if(r)return r.dirty&&r.evaluate(),Za.target&&r.depend(),r.value}}function jl(e){return function(){return e.call(this,this)}}function su(e,r){e.$options.props;for(var $ in r)e[$]="function"!=typeof r[$]?Ra:Rs(r[$],e)}function tu(e,r){for(var $ in r){var t=r[$];if(Array.isArray(t))for(var a=0;a<t.length;a++)Rg(e,$,t[a]);else Rg(e,$,t)}}function Rg(e,r,$,t){return Xa($)&&(t=$,$=$.handler),"string"==typeof $&&($=e[$]),e.$watch(r,$,t)}function uu(e){var r={get:function(){return this._data}},$={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",r),Object.defineProperty(e.prototype,"$props",$),e.prototype.$set=vg,e.prototype.$delete=Fk,e.prototype.$watch=function(e,r,$){if(Xa(r))return Rg(this,e,r,$);($=$||{}).user=!0;var t=new ob(this,e,r,$);if($.immediate){var a="callback for immediate watcher \""+t.expression+"\"";Ad(),Qc(r,this,[t.value],this,a),Bd()}return function(){t.teardown()}}}var vu=0;function wu(e){e.prototype._init=function(e){var r=this;r._uid=vu++,r._isVue=!0,e&&e._isComponent?xu(r,e):r.$options=qc(Sg(r.constructor),e||{},r),r._renderProxy=r,r._self=r,$t(r),Vt(r),Qt(r),nb(r,"beforeCreate"),ut(r),mu(r),tt(r),nb(r,"created"),r.$options.el&&r.$mount(r.$options.el)}}function xu(e,r){var $=e.$options=Object.create(e.constructor.options),t=r._parentVnode;$.parent=r.parent,$._parentVnode=t;var a=t.componentOptions;$.propsData=a.propsData,$._parentListeners=a.listeners,$._renderChildren=a.children,$._componentTag=a.tag,r.render&&($.render=r.render,$.staticRenderFns=r.staticRenderFns)}function Sg(e){var r=e.options;if(e.super){var $=Sg(e.super);if($!==e.superOptions){e.superOptions=$;var t=yu(e);t&&oa(e.extendOptions,t),(r=e.options=qc($,e.extendOptions)).name&&(r.components[r.name]=e)}}return r}function yu(e){var r,$=e.options,t=e.sealedOptions;for(var a in $)$[a]!==t[a]&&(r||(r={}),r[a]=$[a]);return r}function pa(e){this._init(e)}function zu(e){e.use=function(e){var r=this._installedPlugins||(this._installedPlugins=[]);if(r.indexOf(e)>-1)return this;var $=pg(arguments,1);return $.unshift(this),"function"==typeof e.install?e.install.apply(e,$):"function"==typeof e&&e.apply(null,$),r.push(e),this}}function Au(e){e.mixin=function(e){return this.options=qc(this.options,e),this}}function Bu(e){e.cid=0;var r=1;e.extend=function(e){e=e||{};var $=this,t=$.cid,a=e._Ctor||(e._Ctor={});if(a[t])return a[t];var n=e.name||$.options.name;var i=function(e){this._init(e)};return(i.prototype=Object.create($.prototype)).constructor=i,i.cid=r++,i.options=qc($.options,e),i.super=$,i.options.props&&Cu(i),i.options.computed&&Du(i),i.extend=$.extend,i.mixin=$.mixin,i.use=$.use,oe.forEach(function(e){i[e]=$[e]}),n&&(i.options.components[n]=i),i.superOptions=$.options,i.extendOptions=e,i.sealedOptions=oa({},i.options),a[t]=i,i}}function Cu(e){var r=e.options.props;for(var $ in r)Qg(e.prototype,"_props",$)}function Du(e){var r=e.options.computed;for(var $ in r)hl(e.prototype,$,r[$])}function Eu(e){oe.forEach(function(r){e[r]=function(e,$){return $?("component"===r&&Xa($)&&($.name=$.name||e,$=this.options._base.extend($)),"directive"===r&&"function"==typeof $&&($={bind:$,update:$}),this.options[r+"s"][e]=$,$):this.options[r+"s"][e]}})}function kl(e){return e&&(e.Ctor.options.name||e.tag)}function Be(e,r){return Array.isArray(e)?e.indexOf(r)>-1:"string"==typeof e?e.split(",").indexOf(r)>-1:!!Is(e)&&e.test(r)}function ll(e,r){var $=e.cache,t=e.keys,a=e._vnode;for(var n in $){var i=$[n];if(i){var o=i.name;o&&!r(o)&&Tg($,n,t,a)}}}function Tg(e,r,$,t){var a=e[r];!a||t&&a.tag===t.tag||a.componentInstance.$destroy(),e[r]=null,Kb($,r)}wu(pa),uu(pa),Zt(pa),_t(pa),St(pa);var ml=[String,RegExp,Array],Fu={name:"keep-alive",abstract:!0,props:{include:ml,exclude:ml,max:[String,Number]},methods:{cacheVNode:function(){var e=this.cache,r=this.keys,$=this.vnodeToCache,t=this.keyToCache;if($){var a=$.tag,n=$.componentInstance,i=$.componentOptions;e[t]={name:kl(i),tag:a,componentInstance:n},r.push(t),this.max&&r.length>parseInt(this.max)&&Tg(e,r[0],r,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Tg(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",function(r){ll(e,function(e){return Be(r,e)})}),this.$watch("exclude",function(r){ll(e,function(e){return!Be(r,e)})})},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,r=bl(e),$=r&&r.componentOptions;if($){var t=kl($),a=this.include,n=this.exclude;if(a&&(!t||!Be(a,t))||n&&t&&Be(n,t))return r;var i=this.cache,o=this.keys,f=null==r.key?$.Ctor.cid+($.tag?"::"+$.tag:""):r.key;i[f]?(r.componentInstance=i[f].componentInstance,Kb(o,f),o.push(f)):(this.vnodeToCache=r,this.keyToCache=f),r.data.keepAlive=!0}return r||e&&e[0]}},Gu={KeepAlive:Fu};function Hu(e){var r={get:function(){return db}};Object.defineProperty(e,"config",r),e.util={warn:Zs,extend:oa,mergeOptions:qc,defineReactive:pc},e.set=vg,e.delete=Fk,e.nextTick=Dg,e.observable=function(e){return oc(e),e},e.options=Object.create(null),oe.forEach(function(r){e.options[r+"s"]=Object.create(null)}),e.options._base=e,oa(e.options.components,Gu),zu(e),Au(e),Bu(e),Eu(e)}Hu(pa),Object.defineProperty(pa.prototype,"$isServer",{get:pe}),Object.defineProperty(pa.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(pa,"FunctionalRenderContext",{value:Ig}),pa.version="2.6.14";var Iu=mb("style,class"),Ju=mb("input,textarea,option,select,progress"),Ku=function(e,r,$){return"value"===$&&Ju(e)&&"button"!==r||"selected"===$&&"option"===e||"checked"===$&&"input"===e||"muted"===$&&"video"===e},nl=mb("contenteditable,draggable,spellcheck"),Lu=mb("events,caret,typing,plaintext-only"),Mu=function(e,r){return Ce(r)||"false"===r?"false":"contenteditable"===e&&Lu(r)?r:"true"},Nu=mb("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Ug="http://www.w3.org/1999/xlink",Vg=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},ol=function(e){return Vg(e)?e.slice(6,e.length):""},Ce=function(e){return null==e||!1===e};function Ou(e){for(var r=e.data,$=e,t=e;aa(t.componentInstance);)(t=t.componentInstance._vnode)&&t.data&&(r=pl(t.data,r));for(;aa($=$.parent);)$&&$.data&&(r=pl(r,$.data));return Pu(r.staticClass,r.class)}function pl(e,r){return{staticClass:Wg(e.staticClass,r.staticClass),class:aa(e.class)?[e.class,r.class]:r.class}}function Pu(e,r){return aa(e)||aa(r)?Wg(e,Xg(r)):""}function Wg(e,r){return e?r?e+" "+r:e:r||""}function Xg(e){return Array.isArray(e)?Qu(e):Ma(e)?Ru(e):"string"==typeof e?e:""}function Qu(e){for(var r,$="",t=0,a=e.length;t<a;t++)aa(r=Xg(e[t]))&&""!==r&&($&&($+=" "),$+=r);return $}function Ru(e){var r="";for(var $ in e)e[$]&&(r&&(r+=" "),r+=$);return r}var Su={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Tu=mb("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Yg=mb("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ql=function(e){return Tu(e)||Yg(e)};function Uu(e){return Yg(e)?"svg":"math"===e?"math":void 0}var De=Object.create(null);function Vu(e){if(!Ya)return!0;if(ql(e))return!1;if(e=e.toLowerCase(),null!=De[e])return De[e];var r=document.createElement(e);return e.indexOf("-")>-1?De[e]=r.constructor===window.HTMLUnknownElement||r.constructor===window.HTMLElement:De[e]=/HTMLUnknownElement/.test(r.toString())}var Zg=mb("text,number,password,search,email,tel,url");function Wu(e){if("string"==typeof e){var r=document.querySelector(e);return r||document.createElement("div")}return e}function Xu(e,r){var $=document.createElement(e);return"select"!==e?$:(r.data&&r.data.attrs&&void 0!==r.data.attrs.multiple&&$.setAttribute("multiple","multiple"),$)}function Yu(e,r){return document.createElementNS(Su[e],r)}function Zu(e){return document.createTextNode(e)}function $u(e){return document.createComment(e)}function _u(e,r,$){e.insertBefore(r,$)}function av(e,r){e.removeChild(r)}function bv(e,r){e.appendChild(r)}function cv(e){return e.parentNode}function dv(e){return e.nextSibling}function ev(e){return e.tagName}function fv(e,r){e.textContent=r}function gv(e,r){e.setAttribute(r,"")}var hv=Object.freeze({createElement:Xu,createElementNS:Yu,createTextNode:Zu,createComment:$u,insertBefore:_u,removeChild:av,appendChild:bv,parentNode:cv,nextSibling:dv,tagName:ev,setTextContent:fv,setStyleScope:gv}),iv={create:function(e,r){Rc(r)},update:function(e,r){e.data.ref!==r.data.ref&&(Rc(e,!0),Rc(r))},destroy:function(e){Rc(e,!0)}};function Rc(e,r){var $=e.data.ref;if(aa($)){var t=e.context,a=e.componentInstance||e.elm,n=t.$refs;r?Array.isArray(n[$])?Kb(n[$],a):n[$]===a&&(n[$]=void 0):e.data.refInFor?Array.isArray(n[$])?n[$].indexOf(a)<0&&n[$].push(a):n[$]=[a]:n[$]=a}}var sc=new Sa("",{},[]),Fd=["create","activate","update","remove","destroy"];function tc(e,r){return e.key===r.key&&e.asyncFactory===r.asyncFactory&&(e.tag===r.tag&&e.isComment===r.isComment&&aa(e.data)===aa(r.data)&&jv(e,r)||sa(e.isAsyncPlaceholder)&&fa(r.asyncFactory.error))}function jv(e,r){if("input"!==e.tag)return!0;var $,t=aa($=e.data)&&aa($=$.attrs)&&$.type,a=aa($=r.data)&&aa($=$.attrs)&&$.type;return t===a||Zg(t)&&Zg(a)}function kv(e,r,$){var t,a,n={};for(t=r;t<=$;++t)aa(a=e[t].key)&&(n[a]=t);return n}function lv(e){var r,$,t={},a=e.modules,n=e.nodeOps;for(r=0;r<Fd.length;++r)for(t[Fd[r]]=[],$=0;$<a.length;++$)aa(a[$][Fd[r]])&&t[Fd[r]].push(a[$][Fd[r]]);function i(e){var r=n.parentNode(e);aa(r)&&n.removeChild(r,e)}function o(e,r,$,a,i,o,c){if(aa(e.elm)&&aa(o)&&(e=o[c]=ug(e)),e.isRootInsert=!i,!function(e,r,$,a){var n=e.data;if(aa(n)){var i=aa(e.componentInstance)&&n.keepAlive;if(aa(n=n.hook)&&aa(n=n.init)&&n(e,!1),aa(e.componentInstance))return f(e,r),s($,e.elm,a),sa(i)&&function(e,r,$,a){var n,i=e;for(;i.componentInstance;)if(i=i.componentInstance._vnode,aa(n=i.data)&&aa(n=n.transition)){for(n=0;n<t.activate.length;++n)t.activate[n](sc,i);r.push(i);break}s($,e.elm,a)}(e,r,$,a),!0}}(e,r,$,a)){var z=e.data,Q=e.children,d=e.tag;aa(d)?(e.elm=e.ns?n.createElementNS(e.ns,d):n.createElement(d,e),l(e),v(e,Q,r),aa(z)&&P(e,r),s($,e.elm,a)):sa(e.isComment)?(e.elm=n.createComment(e.text),s($,e.elm,a)):(e.elm=n.createTextNode(e.text),s($,e.elm,a))}}function f(e,r){aa(e.data.pendingInsert)&&(r.push.apply(r,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,c(e)?(P(e,r),l(e)):(Rc(e),r.push(e))}function s(e,r,$){aa(e)&&(aa($)?n.parentNode($)===e&&n.insertBefore(e,r,$):n.appendChild(e,r))}function v(e,r,$){if(Array.isArray(r)){0;for(var t=0;t<r.length;++t)o(r[t],$,e.elm,null,!0,r,t)}else xd(e.text)&&n.appendChild(e.elm,n.createTextNode(String(e.text)))}function c(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return aa(e.tag)}function P(e,$){for(var a=0;a<t.create.length;++a)t.create[a](sc,e);aa(r=e.data.hook)&&(aa(r.create)&&r.create(sc,e),aa(r.insert)&&$.push(e))}function l(e){var r;if(aa(r=e.fnScopeId))n.setStyleScope(e.elm,r);else for(var $=e;$;)aa(r=$.context)&&aa(r=r.$options._scopeId)&&n.setStyleScope(e.elm,r),$=$.parent;aa(r=Ed)&&r!==e.context&&r!==e.fnContext&&aa(r=r.$options._scopeId)&&n.setStyleScope(e.elm,r)}function z(e,r,$,t,a,n){for(;t<=a;++t)o($[t],n,e,r,!1,$,t)}function Q(e){var r,$,a=e.data;if(aa(a))for(aa(r=a.hook)&&aa(r=r.destroy)&&r(e),r=0;r<t.destroy.length;++r)t.destroy[r](e);if(aa(r=e.children))for($=0;$<e.children.length;++$)Q(e.children[$])}function d(e,r,$){for(;r<=$;++r){var t=e[r];aa(t)&&(aa(t.tag)?(u(t),Q(t)):i(t.elm))}}function u(e,r){if(aa(r)||aa(e.data)){var $,a=t.remove.length+1;for(aa(r)?r.listeners+=a:r=function(e,r){function $(){0==--$.listeners&&i(e)}return $.listeners=r,$}(e.elm,a),aa($=e.componentInstance)&&aa($=$._vnode)&&aa($.data)&&u($,r),$=0;$<t.remove.length;++$)t.remove[$](e,r);aa($=e.data.hook)&&aa($=$.remove)?$(e,r):r()}else i(e.elm)}function p(e,r,$,t){for(var a=$;a<t;a++){var n=r[a];if(aa(n)&&tc(e,n))return a}}function h(e,r,$,a,i,f){if(e!==r){aa(r.elm)&&aa(a)&&(r=a[i]=ug(r));var s=r.elm=e.elm;if(sa(e.isAsyncPlaceholder))aa(r.asyncFactory.resolved)?g(e.elm,r,$):r.isAsyncPlaceholder=!0;else if(sa(r.isStatic)&&sa(e.isStatic)&&r.key===e.key&&(sa(r.isCloned)||sa(r.isOnce)))r.componentInstance=e.componentInstance;else{var v,P=r.data;aa(P)&&aa(v=P.hook)&&aa(v=v.prepatch)&&v(e,r);var l=e.children,Q=r.children;if(aa(P)&&c(r)){for(v=0;v<t.update.length;++v)t.update[v](e,r);aa(v=P.hook)&&aa(v=v.update)&&v(e,r)}fa(r.text)?aa(l)&&aa(Q)?l!==Q&&function(e,r,$,t,a){var i,f,s,v=0,c=0,P=r.length-1,l=r[0],Q=r[P],u=$.length-1,m=$[0],y=$[u],g=!a;for(;v<=P&&c<=u;)fa(l)?l=r[++v]:fa(Q)?Q=r[--P]:tc(l,m)?(h(l,m,t,$,c),l=r[++v],m=$[++c]):tc(Q,y)?(h(Q,y,t,$,u),Q=r[--P],y=$[--u]):tc(l,y)?(h(l,y,t,$,u),g&&n.insertBefore(e,l.elm,n.nextSibling(Q.elm)),l=r[++v],y=$[--u]):tc(Q,m)?(h(Q,m,t,$,c),g&&n.insertBefore(e,Q.elm,l.elm),Q=r[--P],m=$[++c]):(fa(i)&&(i=kv(r,v,P)),fa(f=aa(m.key)?i[m.key]:p(m,r,v,P))?o(m,t,e,l.elm,!1,$,c):tc(s=r[f],m)?(h(s,m,t,$,c),r[f]=void 0,g&&n.insertBefore(e,s.elm,l.elm)):o(m,t,e,l.elm,!1,$,c),m=$[++c]);v>P?z(e,fa($[u+1])?null:$[u+1].elm,$,c,u,t):c>u&&d(r,v,P)}(s,l,Q,$,f):aa(Q)?(aa(e.text)&&n.setTextContent(s,""),z(s,null,Q,0,Q.length-1,$)):aa(l)?d(l,0,l.length-1):aa(e.text)&&n.setTextContent(s,""):e.text!==r.text&&n.setTextContent(s,r.text),aa(P)&&aa(v=P.hook)&&aa(v=v.postpatch)&&v(e,r)}}}function m(e,r,$){if(sa($)&&aa(e.parent))e.parent.data.pendingInsert=r;else for(var t=0;t<r.length;++t)r[t].data.hook.insert(r[t])}var y=mb("attrs,class,staticClass,staticStyle,key");function g(e,r,$,t){var a,n=r.tag,i=r.data,o=r.children;if(t=t||i&&i.pre,r.elm=e,sa(r.isComment)&&aa(r.asyncFactory))return r.isAsyncPlaceholder=!0,!0;if(aa(i)&&(aa(a=i.hook)&&aa(a=a.init)&&a(r,!0),aa(a=r.componentInstance)))return f(r,$),!0;if(aa(n)){if(aa(o))if(e.hasChildNodes()){if(aa(a=i)&&aa(a=a.domProps)&&aa(a=a.innerHTML)){if(a!==e.innerHTML)return!1}else{for(var s=!0,c=e.firstChild,l=0;l<o.length;l++){if(!c||!g(c,o[l],$,t)){s=!1;break}c=c.nextSibling}if(!s||c)return!1}}else v(r,o,$);if(aa(i)){var z=!1;for(var Q in i)if(!y(Q)){z=!0,P(r,$);break}!z&&i.class&&xe(i.class)}}else e.data!==r.text&&(e.data=r.text);return!0}return function(e,r,$,a){if(!fa(r)){var i,f=!1,s=[];if(fa(e))f=!0,o(r,s);else{var v=aa(e.nodeType);if(!v&&tc(e,r))h(e,r,s,null,null,a);else{if(v){if(1===e.nodeType&&e.hasAttribute(wk)&&(e.removeAttribute(wk),$=!0),sa($)&&g(e,r,s))return m(r,s,!0),e;i=e,e=new Sa(n.tagName(i).toLowerCase(),{},[],void 0,i)}var P=e.elm,l=n.parentNode(P);if(o(r,s,P._leaveCb?null:l,n.nextSibling(P)),aa(r.parent))for(var z=r.parent,u=c(r);z;){for(var p=0;p<t.destroy.length;++p)t.destroy[p](z);if(z.elm=r.elm,u){for(var y=0;y<t.create.length;++y)t.create[y](sc,z);var _=z.data.hook.insert;if(_.merged)for(var b=1;b<_.fns.length;b++)_.fns[b]()}else Rc(z);z=z.parent}aa(l)?d([e],0,0):aa(e.tag)&&Q(e)}}return m(r,s,f),r.elm}aa(e)&&Q(e)}}var mv={create:$g,update:$g,destroy:function(e){$g(e,sc)}};function $g(e,r){(e.data.directives||r.data.directives)&&nv(e,r)}function nv(e,r){var $,t,a,n=e===sc,i=r===sc,o=rl(e.data.directives,e.context),f=rl(r.data.directives,r.context),s=[],v=[];for($ in f)t=o[$],a=f[$],t?(a.oldValue=t.value,a.oldArg=t.arg,Gd(a,"update",r,e),a.def&&a.def.componentUpdated&&v.push(a)):(Gd(a,"bind",r,e),a.def&&a.def.inserted&&s.push(a));if(s.length){var c=function(){for(var $=0;$<s.length;$++)Gd(s[$],"inserted",r,e)};n?Zb(r,"insert",c):c()}if(v.length&&Zb(r,"postpatch",function(){for(var $=0;$<v.length;$++)Gd(v[$],"componentUpdated",r,e)}),!n)for($ in o)f[$]||Gd(o[$],"unbind",e,e,i)}var ov=Object.create(null);function rl(e,r){var $,t,a=Object.create(null);if(!e)return a;for($=0;$<e.length;$++)(t=e[$]).modifiers||(t.modifiers=ov),a[pv(t)]=t,t.def=yg(r.$options,"directives",t.name,!0);return a}function pv(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Gd(r,$,t,a,n){var i=r.def&&r.def[$];if(i)try{i(t.elm,r,t,a,n)}catch(e){rc(e,t.context,"directive "+r.name+" "+$+" hook")}}var qv=[iv,mv];function sl(e,r){var $=r.componentOptions;if(!(aa($)&&!1===$.Ctor.options.inheritAttrs||fa(e.data.attrs)&&fa(r.data.attrs))){var t,a,n=r.elm,i=e.data.attrs||{},o=r.data.attrs||{};for(t in aa(o.__ob__)&&(o=r.data.attrs=oa({},o)),o)a=o[t],i[t]!==a&&tl(n,t,a,r.data.pre);for(t in(Mc||rg)&&o.value!==i.value&&tl(n,"value",o.value),i)fa(o[t])&&(Vg(t)?n.removeAttributeNS(Ug,ol(t)):nl(t)||n.removeAttribute(t))}}function tl(e,r,$,t){t||e.tagName.indexOf("-")>-1?ul(e,r,$):Nu(r)?Ce($)?e.removeAttribute(r):($="allowfullscreen"===r&&"EMBED"===e.tagName?"true":r,e.setAttribute(r,$)):nl(r)?e.setAttribute(r,Mu(r,$)):Vg(r)?Ce($)?e.removeAttributeNS(Ug,ol(r)):e.setAttributeNS(Ug,r,$):ul(e,r,$)}function ul(e,r,$){if(Ce($))e.removeAttribute(r);else{if(Mc&&!Nc&&"TEXTAREA"===e.tagName&&"placeholder"===r&&""!==$&&!e.__ieph){var t=function(r){r.stopImmediatePropagation(),e.removeEventListener("input",t)};e.addEventListener("input",t),e.__ieph=!0}e.setAttribute(r,$)}}var rv={create:sl,update:sl};function vl(e,r){var $=r.elm,t=r.data,a=e.data;if(!(fa(t.staticClass)&&fa(t.class)&&(fa(a)||fa(a.staticClass)&&fa(a.class)))){var n=Ou(r),i=$._transitionClasses;aa(i)&&(n=Wg(n,Xg(i))),n!==$._prevClass&&($.setAttribute("class",n),$._prevClass=n)}}var _g,sv={create:vl,update:vl},ah="__r",bh="__c";function tv(e){if(aa(e[ah])){var r=Mc?"change":"input";e[r]=[].concat(e[ah],e[r]||[]),delete e[ah]}aa(e[bh])&&(e.change=[].concat(e[bh],e.change||[]),delete e[bh])}function uv(e,r,$){var t=_g;return function a(){null!==r.apply(null,arguments)&&wl(e,a,$,t)}}var vv=nt&&!(Ak&&Number(Ak[1])<=53);function wv(e,r,$,t){if(vv){var a=fu,n=r;r=n._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=a||e.timeStamp<=0||e.target.ownerDocument!==document)return n.apply(this,arguments)}}_g.addEventListener(e,r,Ys?{capture:$,passive:t}:$)}function wl(e,r,$,t){(t||_g).removeEventListener(e,r._wrapper||r,$)}function xl(e,r){if(!fa(e.data.on)||!fa(r.data.on)){var $=r.data.on||{},t=e.data.on||{};_g=r.elm,tv($),Ok($,t,wv,wl,uv,r.context),_g=void 0}}var yl,xv={create:xl,update:xl};function zl(r,$){if(!fa(r.data.domProps)||!fa($.data.domProps)){var t,a,n=$.elm,i=r.data.domProps||{},o=$.data.domProps||{};for(t in aa(o.__ob__)&&(o=$.data.domProps=oa({},o)),i)t in o||(n[t]="");for(t in o){if(a=o[t],"textContent"===t||"innerHTML"===t){if($.children&&($.children.length=0),a===i[t])continue;1===n.childNodes.length&&n.removeChild(n.childNodes[0])}if("value"===t&&"PROGRESS"!==n.tagName){n._value=a;var f=fa(a)?"":String(a);yv(n,f)&&(n.value=f)}else if("innerHTML"===t&&Yg(n.tagName)&&fa(n.innerHTML)){(yl=yl||document.createElement("div")).innerHTML="<svg>"+a+"</svg>";for(var s=yl.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}else if(a!==i[t])try{n[t]=a}catch(e){}}}}function yv(e,r){return!e.composing&&("OPTION"===e.tagName||zv(e,r)||Av(e,r))}function zv(r,$){var t=!0;try{t=document.activeElement!==r}catch(e){}return t&&r.value!==$}function Av(e,r){var $=e.value,t=e._vModifiers;if(aa(t)){if(t.number)return yd($)!==yd(r);if(t.trim)return $.trim()!==r.trim()}return $!==r}var Bv={create:zl,update:zl},Cv=kc(function(e){var r={},$=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach(function(e){if(e){var t=e.split($);t.length>1&&(r[t[0].trim()]=t[1].trim())}}),r});function ch(e){var r=Al(e.style);return e.staticStyle?oa(e.staticStyle,r):r}function Al(e){return Array.isArray(e)?tk(e):"string"==typeof e?Cv(e):e}function Dv(e,r){var $,t={};if(r)for(var a=e;a.componentInstance;)(a=a.componentInstance._vnode)&&a.data&&($=ch(a.data))&&oa(t,$);($=ch(e.data))&&oa(t,$);for(var n=e;n=n.parent;)n.data&&($=ch(n.data))&&oa(t,$);return t}var dh,Ev=/^--/,Bl=/\s*!important$/,Cl=function(e,r,$){if(Ev.test(r))e.style.setProperty(r,$);else if(Bl.test($))e.style.setProperty(zd(r),$.replace(Bl,""),"important");else{var t=Fv(r);if(Array.isArray($))for(var a=0,n=$.length;a<n;a++)e.style[t]=$[a];else e.style[t]=$}},Dl=["Webkit","Moz","ms"],Fv=kc(function(e){if(dh=dh||document.createElement("div").style,"filter"!==(e=lc(e))&&e in dh)return e;for(var r=e.charAt(0).toUpperCase()+e.slice(1),$=0;$<Dl.length;$++){var t=Dl[$]+r;if(t in dh)return t}});function El(e,r){var $=r.data,t=e.data;if(!(fa($.staticStyle)&&fa($.style)&&fa(t.staticStyle)&&fa(t.style))){var a,n,i=r.elm,o=t.staticStyle,f=t.normalizedStyle||t.style||{},s=o||f,v=Al(r.data.style)||{};r.data.normalizedStyle=aa(v.__ob__)?oa({},v):v;var c=Dv(r,!0);for(n in s)fa(c[n])&&Cl(i,n,"");for(n in c)(a=c[n])!==s[n]&&Cl(i,n,null==a?"":a)}}var Gv={create:El,update:El},Fl=/\s+/;function Gl(e,r){if(r&&(r=r.trim()))if(e.classList)r.indexOf(" ")>-1?r.split(Fl).forEach(function(r){return e.classList.add(r)}):e.classList.add(r);else{var $=" "+(e.getAttribute("class")||"")+" ";$.indexOf(" "+r+" ")<0&&e.setAttribute("class",($+r).trim())}}function Hl(e,r){if(r&&(r=r.trim()))if(e.classList)r.indexOf(" ")>-1?r.split(Fl).forEach(function(r){return e.classList.remove(r)}):e.classList.remove(r),e.classList.length||e.removeAttribute("class");else{for(var $=" "+(e.getAttribute("class")||"")+" ",t=" "+r+" ";$.indexOf(t)>=0;)$=$.replace(t," ");($=$.trim())?e.setAttribute("class",$):e.removeAttribute("class")}}function Il(e){if(e){if("object"==typeof e){var r={};return!1!==e.css&&oa(r,Jl(e.name||"v")),oa(r,e),r}return"string"==typeof e?Jl(e):void 0}}var Jl=kc(function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}),Kl=Ya&&!Nc,Sc="transition",eh="animation",fh="transition",gh="transitionend",Ll="animation",Hv="animationend";Kl&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(fh="WebkitTransition",gh="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ll="WebkitAnimation",Hv="webkitAnimationEnd"));var Ml=Ya?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Nl(e){Ml(function(){Ml(e)})}function uc(e,r){var $=e._transitionClasses||(e._transitionClasses=[]);$.indexOf(r)<0&&($.push(r),Gl(e,r))}function Mb(e,r){e._transitionClasses&&Kb(e._transitionClasses,r),Hl(e,r)}function Ol(e,r,$){var t=Pl(e,r),a=t.type,n=t.timeout,i=t.propCount;if(!a)return $();var o=a===Sc?gh:Hv,f=0,s=function(){e.removeEventListener(o,v),$()},v=function(r){r.target===e&&++f>=i&&s()};setTimeout(function(){f<i&&s()},n+1),e.addEventListener(o,v)}var Iv=/\b(transform|all)(,|$)/;function Pl(e,r){var $,t=window.getComputedStyle(e),a=(t[fh+"Delay"]||"").split(", "),n=(t[fh+"Duration"]||"").split(", "),i=Ql(a,n),o=(t[Ll+"Delay"]||"").split(", "),f=(t[Ll+"Duration"]||"").split(", "),s=Ql(o,f),v=0,c=0;return r===Sc?i>0&&($=Sc,v=i,c=n.length):r===eh?s>0&&($=eh,v=s,c=f.length):c=($=(v=Math.max(i,s))>0?i>s?Sc:eh:null)?$===Sc?n.length:f.length:0,{type:$,timeout:v,propCount:c,hasTransform:$===Sc&&Iv.test(t[fh+"Property"])}}function Ql(e,r){for(;e.length<r.length;)e=e.concat(e);return Math.max.apply(null,r.map(function(r,$){return Rl(r)+Rl(e[$])}))}function Rl(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function hh(e,r){var $=e.elm;aa($._leaveCb)&&($._leaveCb.cancelled=!0,$._leaveCb());var t=Il(e.data.transition);if(!fa(t)&&!aa($._enterCb)&&1===$.nodeType){for(var a=t.css,n=t.type,i=t.enterClass,o=t.enterToClass,f=t.enterActiveClass,s=t.appearClass,v=t.appearToClass,c=t.appearActiveClass,P=t.beforeEnter,l=t.enter,z=t.afterEnter,Q=t.enterCancelled,d=t.beforeAppear,u=t.appear,p=t.afterAppear,h=t.appearCancelled,m=t.duration,y=Ed,g=Ed.$vnode;g&&g.parent;)y=g.context,g=g.parent;var _=!y._isMounted||!e.isRootInsert;if(!_||u||""===u){var b=_&&s?s:i,C=_&&c?c:f,x=_&&v?v:o,A=_&&d||P,O=_&&"function"==typeof u?u:l,T=_&&p||z,S=_&&h||Q,D=yd(Ma(m)?m.enter:m);0;var k=!1!==a&&!Nc,E=ih(O),w=$._enterCb=ne(function(){k&&(Mb($,x),Mb($,C)),w.cancelled?(k&&Mb($,b),S&&S($)):T&&T($),$._enterCb=null});e.data.show||Zb(e,"insert",function(){var r=$.parentNode,t=r&&r._pending&&r._pending[e.key];t&&t.tag===e.tag&&t.elm._leaveCb&&t.elm._leaveCb(),O&&O($,w)}),A&&A($),k&&(uc($,b),uc($,C),Nl(function(){Mb($,b),w.cancelled||(uc($,x),E||(Tl(D)?setTimeout(w,D):Ol($,n,w)))})),e.data.show&&(r&&r(),O&&O($,w)),k||E||w()}}}function Sl(e,r){var $=e.elm;aa($._enterCb)&&($._enterCb.cancelled=!0,$._enterCb());var t=Il(e.data.transition);if(fa(t)||1!==$.nodeType)return r();if(!aa($._leaveCb)){var a=t.css,n=t.type,i=t.leaveClass,o=t.leaveToClass,f=t.leaveActiveClass,s=t.beforeLeave,v=t.leave,c=t.afterLeave,P=t.leaveCancelled,l=t.delayLeave,z=t.duration,Q=!1!==a&&!Nc,d=ih(v),u=yd(Ma(z)?z.leave:z);0;var p=$._leaveCb=ne(function(){$.parentNode&&$.parentNode._pending&&($.parentNode._pending[e.key]=null),Q&&(Mb($,o),Mb($,f)),p.cancelled?(Q&&Mb($,i),P&&P($)):(r(),c&&c($)),$._leaveCb=null});l?l(h):h()}function h(){p.cancelled||(!e.data.show&&$.parentNode&&(($.parentNode._pending||($.parentNode._pending={}))[e.key]=e),s&&s($),Q&&(uc($,i),uc($,f),Nl(function(){Mb($,i),p.cancelled||(uc($,o),d||(Tl(u)?setTimeout(p,u):Ol($,n,p)))})),v&&v($,p),Q||d||p())}}function Tl(e){return"number"==typeof e&&!isNaN(e)}function ih(e){if(fa(e))return!1;var r=e.fns;return aa(r)?ih(Array.isArray(r)?r[0]:r):(e._length||e.length)>1}function Ul(e,r){!0!==r.data.show&&hh(r)}var Jv=Ya?{create:Ul,activate:Ul,remove:function(e,r){!0!==e.data.show?Sl(e,r):r()}}:{},Kv=[rv,sv,xv,Bv,Gv,Jv],Lv=Kv.concat(qv),Mv=lv({nodeOps:hv,modules:Lv});Nc&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&jh(e,"input")});var Vl={inserted:function(e,r,$,t){"select"===$.tag?(t.elm&&!t.elm._vOptions?Zb($,"postpatch",function(){Vl.componentUpdated(e,r,$)}):Wl(e,r,$.context),e._vOptions=[].map.call(e.options,Ee)):("textarea"===$.tag||Zg(e.type))&&(e._vModifiers=r.modifiers,r.modifiers.lazy||(e.addEventListener("compositionstart",Nv),e.addEventListener("compositionend",Zl),e.addEventListener("change",Zl),Nc&&(e.vmodel=!0)))},componentUpdated:function(e,r,$){if("select"===$.tag){Wl(e,r,$.context);var t=e._vOptions,a=e._vOptions=[].map.call(e.options,Ee);if(a.some(function(e,r){return!mc(e,t[r])}))(e.multiple?r.value.some(function(e){return Yl(e,a)}):r.value!==r.oldValue&&Yl(r.value,a))&&jh(e,"change")}}};function Wl(e,r,$){Xl(e,r,$),(Mc||rg)&&setTimeout(function(){Xl(e,r,$)},0)}function Xl(e,r,$){var t=r.value,a=e.multiple;if(!a||Array.isArray(t)){for(var n,i,o=0,f=e.options.length;o<f;o++)if(i=e.options[o],a)n=vk(t,Ee(i))>-1,i.selected!==n&&(i.selected=n);else if(mc(Ee(i),t))return void(e.selectedIndex!==o&&(e.selectedIndex=o));a||(e.selectedIndex=-1)}}function Yl(e,r){return r.every(function(r){return!mc(r,e)})}function Ee(e){return"_value"in e?e._value:e.value}function Nv(e){e.target.composing=!0}function Zl(e){e.target.composing&&(e.target.composing=!1,jh(e.target,"input"))}function jh(e,r){var $=document.createEvent("HTMLEvents");$.initEvent(r,!0,!0),e.dispatchEvent($)}function kh(e){return!e.componentInstance||e.data&&e.data.transition?e:kh(e.componentInstance._vnode)}var Ov={bind:function(e,r,$){var t=r.value,a=($=kh($)).data&&$.data.transition,n=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;t&&a?($.data.show=!0,hh($,function(){e.style.display=n})):e.style.display=t?n:"none"},update:function(e,r,$){var t=r.value;!t!=!r.oldValue&&(($=kh($)).data&&$.data.transition?($.data.show=!0,t?hh($,function(){e.style.display=e.__vOriginalDisplay}):Sl($,function(){e.style.display="none"})):e.style.display=t?e.__vOriginalDisplay:"none")},unbind:function(e,r,$,t,a){a||(e.style.display=e.__vOriginalDisplay)}},Pv={model:Vl,show:Ov},$l={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function lh(e){var r=e&&e.componentOptions;return r&&r.Ctor.options.abstract?lh(bl(r.children)):e}function _l(e){var r={},$=e.$options;for(var t in $.propsData)r[t]=e[t];var a=$._parentListeners;for(var n in a)r[lc(n)]=a[n];return r}function am(e,r){if(/\d-keep-alive$/.test(r.tag))return e("keep-alive",{props:r.componentOptions.propsData})}function Qv(e){for(;e=e.parent;)if(e.data.transition)return!0}function Rv(e,r){return r.key===e.key&&r.tag===e.tag}var Sv=function(e){return e.tag||Dd(e)},Tv=function(e){return"show"===e.name},Uv={name:"transition",props:$l,abstract:!0,render:function(e){var r=this,$=this.$slots.default;if($&&($=$.filter(Sv)).length){0;var t=this.mode;0;var a=$[0];if(Qv(this.$vnode))return a;var n=lh(a);if(!n)return a;if(this._leaving)return am(e,a);var i="__transition-"+this._uid+"-";n.key=null==n.key?n.isComment?i+"comment":i+n.tag:xd(n.key)?0===String(n.key).indexOf(i)?n.key:i+n.key:n.key;var o=(n.data||(n.data={})).transition=_l(this),f=this._vnode,s=lh(f);if(n.data.directives&&n.data.directives.some(Tv)&&(n.data.show=!0),s&&s.data&&!Rv(n,s)&&!Dd(s)&&(!s.componentInstance||!s.componentInstance._vnode.isComment)){var v=s.data.transition=oa({},o);if("out-in"===t)return this._leaving=!0,Zb(v,"afterLeave",function(){r._leaving=!1,r.$forceUpdate()}),am(e,a);if("in-out"===t){if(Dd(n))return f;var c,P=function(){c()};Zb(o,"afterEnter",P),Zb(o,"enterCancelled",P),Zb(v,"delayLeave",function(e){c=e})}}return a}}},bm=oa({tag:String,moveClass:String},$l);delete bm.mode;var Vv={props:bm,beforeMount:function(){var e=this,r=this._update;this._update=function($,t){var a=dl(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,a(),r.call(e,$,t)}},render:function(e){for(var r=this.tag||this.$vnode.data.tag||"span",$=Object.create(null),t=this.prevChildren=this.children,a=this.$slots.default||[],n=this.children=[],i=_l(this),o=0;o<a.length;o++){var f=a[o];if(f.tag)if(null!=f.key&&0!==String(f.key).indexOf("__vlist"))n.push(f),$[f.key]=f,(f.data||(f.data={})).transition=i;else;}if(t){for(var s=[],v=[],c=0;c<t.length;c++){var P=t[c];P.data.transition=i,P.data.pos=P.elm.getBoundingClientRect(),$[P.key]?s.push(P):v.push(P)}this.kept=e(r,null,s),this.removed=v}return e(r,null,n)},updated:function(){var e=this.prevChildren,r=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,r)&&(e.forEach(Wv),e.forEach(Xv),e.forEach(Yv),this._reflow=document.body.offsetHeight,e.forEach(function(e){if(e.data.moved){var $=e.elm,t=$.style;uc($,r),t.transform=t.WebkitTransform=t.transitionDuration="",$.addEventListener(gh,$._moveCb=function e(t){t&&t.target!==$||t&&!/transform$/.test(t.propertyName)||($.removeEventListener(gh,e),$._moveCb=null,Mb($,r))})}}))},methods:{hasMove:function(e,r){if(!Kl)return!1;if(this._hasMove)return this._hasMove;var $=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(e){Hl($,e)}),Gl($,r),$.style.display="none",this.$el.appendChild($);var t=Pl($);return this.$el.removeChild($),this._hasMove=t.hasTransform}}};function Wv(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Xv(e){e.data.newPos=e.elm.getBoundingClientRect()}function Yv(e){var r=e.data.pos,$=e.data.newPos,t=r.left-$.left,a=r.top-$.top;if(t||a){e.data.moved=!0;var n=e.elm.style;n.transform=n.WebkitTransform="translate("+t+"px,"+a+"px)",n.transitionDuration="0s"}}var Zv={Transition:Uv,TransitionGroup:Vv};pa.config.mustUseProp=Ku,pa.config.isReservedTag=ql,pa.config.isReservedAttr=Iu,pa.config.getTagNamespace=Uu,pa.config.isUnknownElement=Vu,oa(pa.options.directives,Pv),oa(pa.options.components,Zv),pa.prototype.__patch__=Ya?Mv:Ra,pa.prototype.$mount=function(e,r){return au(this,e=e&&Ya?Wu(e):void 0,r)},Ya&&setTimeout(function(){db.devtools&&qe&&qe.emit("init",pa)},0);const G={name:"BubbleMenu",props:{editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})}},watch:{editor:{immediate:!0,handler(e){e&&this.$nextTick(()=>{e.registerPlugin(pk({editor:e,element:this.$el,tippyOptions:this.tippyOptions}))})}}},render(e){return e("div",{style:{visibility:"hidden"}},this.$slots.default)},beforeDestroy(){this.editor.unregisterPlugin(ok)}};const $v={name:"EditorContent",props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(e){e&&e.options.element&&this.$nextTick(()=>{const t=this.$el;t&&e.options.element.firstChild&&(t.append(...e.options.element.childNodes),e.contentComponent=this,e.setOptions({element:t}),e.createNodeViews())})}}},render:e=>e("div"),beforeDestroy(){const{editor:e}=this;if(!e)return;if(e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild)return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}},H={name:"FloatingMenu",props:{editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})}},watch:{editor:{immediate:!0,handler(e){e&&this.$nextTick(()=>{e.registerPlugin(rk({editor:e,element:this.$el,tippyOptions:this.tippyOptions}))})}}},render(e){return e("div",{style:{visibility:"hidden"}},this.$slots.default)},beforeDestroy(){this.editor.unregisterPlugin(qk)}};class _v{constructor(e,t){const r=pa.extend(e);this.ref=new r(t).$mount()}get element(){return this.ref.$el}updateProps(e={}){if(!this.ref.$props)return;const t=pa.config.silent;pa.config.silent=!0,Object.entries(e).forEach(([e,t])=>{this.ref.$props[e]=t}),pa.config.silent=t}destroy(){this.ref.$destroy()}}const I={editor:{type:Object,required:!0},node:{type:Object,required:!0},decorations:{type:Object,required:!0},selected:{type:Boolean,required:!0},extension:{type:Object,required:!0},getPos:{type:Function,required:!0},updateAttributes:{type:Function,required:!0},deleteNode:{type:Function,required:!0}};class J extends _q{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(e={})=>this.updateAttributes(e),deleteNode:()=>this.deleteNode()},t=this.onDragStart.bind(this);this.decorationClasses=pa.observable({value:this.getDecorationClasses()});const r=pa.extend(this.component).extend({props:Object.keys(e),provide:()=>({onDragStart:t,decorationClasses:this.decorationClasses})});this.renderer=new _v(r,{parent:this.editor.contentComponent,propsData:e})}get dom(){if(!this.renderer.element.hasAttribute("data-node-view-wrapper"))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){if(this.node.isLeaf)return null;return this.dom.querySelector("[data-node-view-content]")||this.dom}update(e,t){return"function"==typeof this.options.update?this.options.update(e,t):e.type===this.node.type&&(e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,this.decorationClasses.value=this.getDecorationClasses(),this.renderer.updateProps({node:e,decorations:t}),!0))}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}getDecorationClasses(){return this.decorations.map(e=>e.type.attrs.class).flat().join(" ")}destroy(){this.renderer.destroy()}}const K={props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(e){return e(this.as,{class:this.decorationClasses.value,style:{whiteSpace:"normal"},attrs:{"data-node-view-wrapper":""},on:{dragstart:this.onDragStart}},this.$slots.default)}},L={props:{as:{type:String,default:"div"}},render(e){return e(this.as,{style:{whiteSpace:"pre-wrap"},attrs:{"data-node-view-content":""}})}};function aw(t){return void 0===t&&(t={}),new _a({view:function(e){return new Cb(e,t)}})}var Cb=function(t,e){var r=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map(function(e){var o=function(t){return r[e](t)};return t.dom.addEventListener(e,o),{name:e,handler:o}})};Cb.prototype.destroy=function(){var t=this;this.handlers.forEach(function(e){var r=e.name,o=e.handler;return t.editorView.dom.removeEventListener(r,o)})},Cb.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())},Cb.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},Cb.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var r=e.nodeBefore,o=e.nodeAfter;if(r||o){var i=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0)).getBoundingClientRect(),s=r?i.bottom:i.top;r&&o&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:i.left,right:i.right,top:s-this.width/2,bottom:s+this.width/2}}}if(!t){var n=this.editorView.coordsAtPos(this.cursorPos);t={left:n.left-this.width/2,right:n.left+this.width/2,top:n.top,bottom:n.bottom}}var l,a,d=this.editorView.dom.offsetParent;if(this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!d||d==document.body&&"static"==getComputedStyle(d).position)l=-pageXOffset,a=-pageYOffset;else{var u=d.getBoundingClientRect();l=u.left-d.scrollLeft,a=u.top-d.scrollTop}this.element.style.left=t.left-l+"px",this.element.style.top=t.top-a+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},Cb.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return e.setCursor(null)},t)},Cb.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var r=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(r=Uh(this.editorView.state.doc,r,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(r),this.scheduleRemoval(5e3)}}},Cb.prototype.dragend=function(){this.scheduleRemoval(20)},Cb.prototype.drop=function(){this.scheduleRemoval(20)},Cb.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};const bw=Va.create({name:"dropCursor",defaultOptions:{color:"currentColor",width:1,class:null},addProseMirrorPlugins(){return[aw(this.options)]}});var pb=function(r){function e(e){r.call(this,e,e)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.map=function(o,t){var n=o.resolve(t.map(this.head));return e.valid(n)?new e(n):r.near(n)},e.prototype.content=function(){return da.empty},e.prototype.eq=function(r){return r instanceof e&&r.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(r,o){if("number"!=typeof o.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(r.resolve(o.pos))},e.prototype.getBookmark=function(){return new Fe(this.anchor)},e.valid=function(r){var e=r.parent;if(e.isTextblock||!cw(r)||!dw(r))return!1;var o=e.type.spec.allowGapCursor;if(null!=o)return o;var t=e.contentMatchAt(r.index()).defaultType;return t&&t.isTextblock},e.findFrom=function(r,o,t){r:for(;;){if(!t&&e.valid(r))return r;for(var n=r.pos,i=null,a=r.depth;;a--){var $=r.node(a);if(o>0?r.indexAfter(a)<$.childCount:r.index(a)>0){i=$.child(o>0?r.indexAfter(a):r.index(a)-1);break}if(0==a)return null;n+=o;var p=r.doc.resolve(n);if(e.valid(p))return p}for(;;){var s=o>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!ga.isSelectable(i)){r=r.doc.resolve(n+i.nodeSize*o),t=!1;continue r}break}i=s,n+=o;var l=r.doc.resolve(n);if(e.valid(l))return l}return null}},e}(ha);pb.prototype.visible=!1,ha.jsonID("gapcursor",pb);var Fe=function(r){this.pos=r};function cw(r){for(var e=r.depth;e>=0;e--){var o=r.index(e);if(0!=o)for(var t=r.node(e).child(o-1);;t=t.lastChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}}return!0}function dw(r){for(var e=r.depth;e>=0;e--){var o=r.indexAfter(e),t=r.node(e);if(o!=t.childCount)for(var n=t.child(o);;n=n.firstChild){if(0==n.childCount&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}Fe.prototype.map=function(r){return new Fe(r.map(this.pos))},Fe.prototype.resolve=function(r){var e=r.resolve(this.pos);return pb.valid(e)?new pb(e):ha.near(e)};var ew=function(){return new _a({props:{decorations:hw,createSelectionBetween:function(r,e,o){if(e.pos==o.pos&&pb.valid(o))return new pb(o)},handleClick:gw,handleKeyDown:fw}})},fw=dj({ArrowLeft:Ge("horiz",-1),ArrowRight:Ge("horiz",1),ArrowUp:Ge("vert",-1),ArrowDown:Ge("vert",1)});function Ge(r,e){var o="vert"==r?e>0?"down":"up":e>0?"right":"left";return function(r,t,n){var i=r.selection,a=e>0?i.$to:i.$from,$=i.empty;if(i instanceof ka){if(!n.endOfTextblock(o)||0==a.depth)return!1;$=!1,a=r.doc.resolve(e>0?a.after():a.before())}var p=pb.findFrom(a,e,$);return!!p&&(t&&t(r.tr.setSelection(new pb(p))),!0)}}function gw(r,e,o){if(!r.editable)return!1;var t=r.state.doc.resolve(e);if(!pb.valid(t))return!1;var n=r.posAtCoords({left:o.clientX,top:o.clientY}).inside;return!(n>-1&&ga.isSelectable(r.state.doc.nodeAt(n)))&&(r.dispatch(r.state.tr.setSelection(new pb(t))),!0)}function hw(r){if(!(r.selection instanceof pb))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",la.create(r.doc,[wa.widget(r.selection.head,e,{key:"gapcursor"})])}const iw=Va.create({name:"gapCursor",addProseMirrorPlugins:()=>[ew()],extendNodeSchema(r){var e;const o={name:r.name,options:r.options};return{allowGapCursor:null!==(e=va(ea(r,"allowGapCursor",o)))&&void 0!==e?e:null}}});const jw=Wa.create({name:"doc",topNode:!0,content:"block+"});const kw=Wa.create({name:"paragraph",priority:1e3,defaultOptions:{HTMLAttributes:{}},group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:t}){return["p",Qa(this.options.HTMLAttributes,t),0]},addCommands:()=>({setParagraph:()=>({commands:t})=>t.toggleNode("paragraph","paragraph")}),addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});const lw=Wa.create({name:"text",group:"inline"});var He=200,za=function(){};za.prototype.append=function(e){return e.length?(e=za.from(e),!this.length&&e||e.length<He&&this.leafAppend(e)||this.length<He&&e.leafPrepend(this)||this.appendInner(e)):this},za.prototype.prepend=function(e){return e.length?za.from(e).append(this):this},za.prototype.appendInner=function(e){return new mw(this,e)},za.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?za.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},za.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},za.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},za.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},za.from=function(e){return e instanceof za?e:e&&e.length?new cm(e):za.empty};var cm=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=He)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=He)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(za);za.empty=new cm([]);var mw=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(za),dm=za;var nw=500,Aa=function(e,t){this.items=e,this.eventCount=t};function ow(e,t){var r;return e.forEach(function(e,n){if(e.selection&&0==t--)return r=n,!1}),e.slice(r)}Aa.prototype.popEvent=function(e,t){var r=this;if(0==this.eventCount)return null;for(var n,$,a=this.items.length;;a--){if(this.items.get(a-1).selection){--a;break}}t&&(n=this.remapping(a,this.items.length),$=n.maps.length);var s,o,i=e.tr,p=[],y=[];return this.items.forEach(function(e,t){if(!e.step)return n||(n=r.remapping(a,t+1),$=n.maps.length),$--,void y.push(e);if(n){y.push(new Db(e.map));var v,m=e.step.map(n.slice($));m&&i.maybeStep(m).doc&&(v=i.mapping.maps[i.mapping.maps.length-1],p.push(new Db(v,null,null,p.length+y.length))),$--,v&&n.appendMap(v,$)}else i.maybeStep(e.step);return e.selection?(s=n?e.selection.map(n.slice($)):e.selection,o=new Aa(r.items.slice(0,a).append(y.reverse().concat(p)),r.eventCount-1),!1):void 0},this.items.length,0),{remaining:o,transform:i,selection:s}},Aa.prototype.addTransform=function(e,t,r,n){for(var $=[],a=this.eventCount,s=this.items,o=!n&&s.length?s.get(s.length-1):null,i=0;i<e.steps.length;i++){var p,y=e.steps[i].invert(e.docs[i]),v=new Db(e.mapping.maps[i],y,t);(p=o&&o.merge(v))&&(v=p,i?$.pop():s=s.slice(0,s.length-1)),$.push(v),t&&(a++,t=null),n||(o=v)}var m=a-r.depth;return m>pw&&(s=ow(s,m),a-=m),new Aa(s.append($),a)},Aa.prototype.remapping=function(e,t){var r=new Ea;return this.items.forEach(function(t,n){var $=null!=t.mirrorOffset&&n-t.mirrorOffset>=e?r.maps.length-t.mirrorOffset:null;r.appendMap(t.map,$)},e,t),r},Aa.prototype.addMaps=function(e){return 0==this.eventCount?this:new Aa(this.items.append(e.map(function(e){return new Db(e)})),this.eventCount)},Aa.prototype.rebased=function(e,t){if(!this.eventCount)return this;var r=[],n=Math.max(0,this.items.length-t),$=e.mapping,a=e.steps.length,s=this.eventCount;this.items.forEach(function(e){e.selection&&s--},n);var o=t;this.items.forEach(function(t){var n=$.getMirror(--o);if(null!=n){a=Math.min(a,n);var i=$.maps[n];if(t.step){var p=e.steps[n].invert(e.docs[n]),y=t.selection&&t.selection.map($.slice(o+1,n));y&&s++,r.push(new Db(i,p,y))}else r.push(new Db(i))}},n);for(var i=[],p=t;p<a;p++)i.push(new Db($.maps[p]));var y=this.items.slice(0,n).append(i).append(r),v=new Aa(y,s);return v.emptyItemCount()>nw&&(v=v.compress(this.items.length-r.length)),v},Aa.prototype.emptyItemCount=function(){var e=0;return this.items.forEach(function(t){t.step||e++}),e},Aa.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),r=t.maps.length,n=[],$=0;return this.items.forEach(function(a,s){if(s>=e)n.push(a),a.selection&&$++;else if(a.step){var o=a.step.map(t.slice(r)),i=o&&o.getMap();if(r--,i&&t.appendMap(i,r),o){var p=a.selection&&a.selection.map(t.slice(r));p&&$++;var y,v=new Db(i.invert(),o,p),m=n.length-1;(y=n.length&&n[m].merge(v))?n[m]=y:n.push(v)}}else a.map&&r--},this.items.length,0),new Aa(dm.from(n.reverse()),$)},Aa.empty=new Aa(dm.empty,0);var Db=function(e,t,r,n){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=n};Db.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new Db(t.getMap().invert(),t,this.selection)}};var _b=function(e,t,r,n){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=n},pw=20;function qw(e,t,r,n){var $,a=r.getMeta(ac);if(a)return a.historyState;r.getMeta(uw)&&(e=new _b(e.done,e.undone,null,0));var s=r.getMeta("appendedTransaction");if(0==r.steps.length)return e;if(s&&s.getMeta(ac))return s.getMeta(ac).redo?new _b(e.done.addTransform(r,null,n,Ie(t)),e.undone,em(r.mapping.maps[r.steps.length-1]),e.prevTime):new _b(e.done,e.undone.addTransform(r,null,n,Ie(t)),null,e.prevTime);if(!1===r.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return($=r.getMeta("rebased"))?new _b(e.done.rebased(r,$),e.undone.rebased(r,$),mh(e.prevRanges,r.mapping),e.prevTime):new _b(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),mh(e.prevRanges,r.mapping),e.prevTime);var o=0==e.prevTime||!s&&(e.prevTime<(r.time||0)-n.newGroupDelay||!rw(r,e.prevRanges)),i=s?mh(e.prevRanges,r.mapping):em(r.mapping.maps[r.steps.length-1]);return new _b(e.done.addTransform(r,o?t.selection.getBookmark():null,n,Ie(t)),Aa.empty,i,r.time)}function rw(e,t){if(!t)return!1;if(!e.docChanged)return!0;var r=!1;return e.mapping.maps[0].forEach(function(e,n){for(var $=0;$<t.length;$+=2)e<=t[$+1]&&n>=t[$]&&(r=!0)}),r}function em(e){var t=[];return e.forEach(function(e,r,n,$){return t.push(n,$)}),t}function mh(e,t){if(!e)return null;for(var r=[],n=0;n<e.length;n+=2){var $=t.map(e[n],1),a=t.map(e[n+1],-1);$<=a&&r.push($,a)}return r}function fm(e,t,r,n){var $=Ie(t),a=ac.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,$);if(s){var o=s.selection.resolve(s.transform.doc),i=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),a,$),p=new _b(n?i:s.remaining,n?s.remaining:i,null,0);r(s.transform.setSelection(o).setMeta(ac,{redo:n,historyState:p}).scrollIntoView())}}var sw=!1,tw=null;function Ie(e){var t=e.plugins;if(tw!=t){sw=!1,tw=t;for(var r=0;r<t.length;r++)if(t[r].spec.historyPreserveItems){sw=!0;break}}return sw}var ac=new rb("history"),uw=new rb("closeHistory");function vw(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new _a({key:ac,state:{init:function(){return new _b(Aa.empty,Aa.empty,null,0)},apply:function(t,r,n){return qw(r,n,t,e)}},config:e})}function ww(e,t){var r=ac.getState(e);return!(!r||0==r.done.eventCount)&&(t&&fm(r,e,t,!1),!0)}function xw(e,t){var r=ac.getState(e);return!(!r||0==r.undone.eventCount)&&(t&&fm(r,e,t,!0),!0)}const yw=Va.create({name:"history",defaultOptions:{depth:100,newGroupDelay:500},addCommands:()=>({undo:()=>({state:r,dispatch:t})=>ww(r,t),redo:()=>({state:r,dispatch:t})=>xw(r,t)}),addProseMirrorPlugins(){return[vw(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}}});const zw=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/gm,Aw=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/gm,Bw=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/gm,Cw=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/gm,Dw=Fc.create({name:"bold",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],renderHTML({HTMLAttributes:e}){return["strong",Qa(this.options.HTMLAttributes,e),0]},addCommands:()=>({setBold:()=>({commands:e})=>e.setMark("bold"),toggleBold:()=>({commands:e})=>e.toggleMark("bold"),unsetBold:()=>({commands:e})=>e.unsetMark("bold")}),addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Gc(zw,this.type),Gc(Bw,this.type)]},addPasteRules(){return[Hc(Aw,this.type),Hc(Cw,this.type)]}});const Ew=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/gm,Fw=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/gm,Gw=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/gm,Hw=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/gm,Iw=Fc.create({name:"italic",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:e}){return["em",Qa(this.options.HTMLAttributes,e),0]},addCommands:()=>({setItalic:()=>({commands:e})=>e.setMark("italic"),toggleItalic:()=>({commands:e})=>e.toggleMark("italic"),unsetItalic:()=>({commands:e})=>e.unsetMark("italic")}),addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Gc(Ew,this.type),Gc(Gw,this.type)]},addPasteRules(){return[Hc(Fw,this.type),Hc(Hw,this.type)]}});const gm=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/gm,Jw=Fc.create({name:"code",defaultOptions:{HTMLAttributes:{}},excludes:"_",parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",Qa(this.options.HTMLAttributes,e),0]},addCommands:()=>({setCode:()=>({commands:e})=>e.setMark("code"),toggleCode:()=>({commands:e})=>e.toggleMark("code"),unsetCode:()=>({commands:e})=>e.unsetMark("code")}),addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Gc(gm,this.type)]},addPasteRules(){return[Hc(gm,this.type)]}});const Kw=/^```(?<language>[a-z]*)? $/,Lw=/^~~~(?<language>[a-z]*)? $/,Mw=Wa.create({name:"codeBlock",defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const r=null===(t=e.firstElementChild)||void 0===t?void 0:t.getAttribute("class");if(!r)return null;const o=new RegExp(`^(${this.options.languageClassPrefix})`);return{language:r.replace(o,"")}},renderHTML:e=>e.language?{class:this.options.languageClassPrefix+e.language}:null}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({HTMLAttributes:e}){return["pre",this.options.HTMLAttributes,["code",e,0]]},addCommands:()=>({setCodeBlock:e=>({commands:t})=>t.setNode("codeBlock",e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode("codeBlock","paragraph",e)}),addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,r=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&!(!r&&t.parent.textContent.length)&&this.editor.commands.clearNodes()}}},addInputRules(){return[Qf(Kw,this.type,({groups:e})=>e),Qf(Lw,this.type,({groups:e})=>e)]}});const Nw=Wa.create({name:"heading",defaultOptions:{levels:[1,2,3,4,5,6],HTMLAttributes:{}},content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Qa(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode("heading",e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode("heading","paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Qf(new RegExp(`^(#{1,${e}})\\s$`),this.type,{level:e}))}});const Ow=Wa.create({name:"hardBreak",defaultOptions:{HTMLAttributes:{}},inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:t}){return["br",Qa(this.options.HTMLAttributes,t)]},addCommands(){return{setHardBreak:()=>({commands:t})=>t.first([()=>t.exitCode(),()=>t.insertContent({type:this.name})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});const Pw=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/gm,Qw=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/gm,Rw=Fc.create({name:"strike",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",Qa(this.options.HTMLAttributes,e),0]},addCommands:()=>({setStrike:()=>({commands:e})=>e.setMark("strike"),toggleStrike:()=>({commands:e})=>e.toggleMark("strike"),unsetStrike:()=>({commands:e})=>e.unsetMark("strike")}),addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Gc(Pw,this.type)]},addPasteRules(){return[Hc(Qw,this.type)]}});const Sw=/^\s*>\s$/gm,Tw=Wa.create({name:"blockquote",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:t}){return["blockquote",Qa(this.options.HTMLAttributes,t),0]},addCommands:()=>({setBlockquote:()=>({commands:t})=>t.wrapIn("blockquote"),toggleBlockquote:()=>({commands:t})=>t.toggleWrap("blockquote"),unsetBlockquote:()=>({commands:t})=>t.lift("blockquote")}),addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Pf(Sw,this.type)]}});const Uw=Wa.create({name:"horizontalRule",defaultOptions:{HTMLAttributes:{}},group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:t}){return["hr",Qa(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().insertContent({type:this.name}).command(({tr:t,dispatch:e})=>{var r;if(e){const{parent:e,pos:o}=t.selection.$from,s=o+1;if(!t.doc.nodeAt(s)){const o=null===(r=e.type.contentMatch.defaultType)||void 0===r?void 0:r.create();o&&(t.insert(s,o),t.setSelection(ka.create(t.doc,s)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[ar(/^(?:---|—-|___\s|\*\*\*\s)$/,this.type)]}});const Vw=/^\s*([-+*])\s$/,Ww=Wa.create({name:"bulletList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:t}){return["ul",Qa(this.options.HTMLAttributes,t),0]},addCommands:()=>({toggleBulletList:()=>({commands:t})=>t.toggleList("bulletList","listItem")}),addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Pf(Vw,this.type)]}});const Xw=/^(\d+)\.\s$/,Yw=Wa.create({name:"orderedList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",addAttributes:()=>({start:{default:1,parseHTML:t=>({start:t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1})}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return 1===e?["ol",Qa(this.options.HTMLAttributes,r),0]:["ol",Qa(this.options.HTMLAttributes,t),0]},addCommands:()=>({toggleOrderedList:()=>({commands:t})=>t.toggleList("orderedList","listItem")}),addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Pf(Xw,this.type,t=>({order:+t[1]}),(t,e)=>e.childCount+e.attrs.order===+t[1])]}});const Zw=Wa.create({name:"listItem",defaultOptions:{HTMLAttributes:{}},content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",Qa(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem("listItem"),Tab:()=>this.editor.commands.sinkListItem("listItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("listItem")}}});const $w=Va.create({name:"starterKit",addExtensions(){var i,o,t,e,r,n,p,s,$,c,l,u,a,d,h,E,F,v;const g=[];return!1!==this.options.blockquote&&g.push(Tw.configure(null===(i=this.options)||void 0===i?void 0:i.blockquote)),!1!==this.options.bold&&g.push(Dw.configure(null===(o=this.options)||void 0===o?void 0:o.bold)),!1!==this.options.bulletList&&g.push(Ww.configure(null===(t=this.options)||void 0===t?void 0:t.bulletList)),!1!==this.options.code&&g.push(Jw.configure(null===(e=this.options)||void 0===e?void 0:e.code)),!1!==this.options.codeBlock&&g.push(Mw.configure(null===(r=this.options)||void 0===r?void 0:r.codeBlock)),!1!==this.options.document&&g.push(jw.configure(null===(n=this.options)||void 0===n?void 0:n.document)),!1!==this.options.dropcursor&&g.push(bw.configure(null===(p=this.options)||void 0===p?void 0:p.dropcursor)),!1!==this.options.gapcursor&&g.push(iw.configure(null===(s=this.options)||void 0===s?void 0:s.gapcursor)),!1!==this.options.hardBreak&&g.push(Ow.configure(null===($=this.options)||void 0===$?void 0:$.hardBreak)),!1!==this.options.heading&&g.push(Nw.configure(null===(c=this.options)||void 0===c?void 0:c.heading)),!1!==this.options.history&&g.push(yw.configure(null===(l=this.options)||void 0===l?void 0:l.history)),!1!==this.options.horizontalRule&&g.push(Uw.configure(null===(u=this.options)||void 0===u?void 0:u.horizontalRule)),!1!==this.options.italic&&g.push(Iw.configure(null===(a=this.options)||void 0===a?void 0:a.italic)),!1!==this.options.listItem&&g.push(Zw.configure(null===(d=this.options)||void 0===d?void 0:d.listItem)),!1!==this.options.orderedList&&g.push(Yw.configure(null===(h=this.options)||void 0===h?void 0:h.orderedList)),!1!==this.options.paragraph&&g.push(kw.configure(null===(E=this.options)||void 0===E?void 0:E.paragraph)),!1!==this.options.strike&&g.push(Rw.configure(null===(F=this.options)||void 0===F?void 0:F.strike)),!1!==this.options.text&&g.push(lw.configure(null===(v=this.options)||void 0===v?void 0:v.text)),g}});var Je={components:{EditorContent:$v},props:{label:String,value:String},data:function(){return{editor:null}},mounted:function(){var t=this;this.editor=new Zq({content:this.value,onUpdate:function(e){e.editor;var r=this.getHTML();t.$emit("input",r)},extensions:[$w]})}};if(typeof Je==="function"){Je=Je.options}Object.assign(Je,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",[_c("k-field",{staticClass:"k-tiptap-field",attrs:{"data-theme":"field","label":_vm.label}},[_c("span",{staticClass:"k-input-element"},[_c("div",{staticClass:"k-input",attrs:{"data-theme":"field"}},[_c("div",{staticClass:"k-textarea-input-wrapper"},[_vm.editor?_c("nav",{staticClass:"k-toolbar"},[_c("div",{staticClass:"k-toolbar-wrapper"},[_c("div",{staticClass:"k-toolbar-buttons"},[_c("k-button",{class:["k-toolbar-button","k-markdown-button",{"is-active":_vm.editor.isActive("bold")}],attrs:{"icon":"bold","tooltip":_vm.label,"tabindex":"-1"},on:{"mousedown":function($event){$event.preventDefault()},"click":function($event){_vm.editor.chain().focus().toggleBold().run()}}}),_vm._v(" "),_c("k-button",{class:["k-toolbar-button","k-markdown-button",{"is-active":_vm.editor.isActive("italic")}],attrs:{"icon":"italic","tooltip":_vm.label,"tabindex":"-1"},on:{"mousedown":function($event){$event.preventDefault()},"click":function($event){_vm.editor.chain().focus().toggleBold().run()}}})],1)])]):_vm._e(),_vm._v(" "),_c("editor-content",{attrs:{"editor":_vm.editor},model:{value:_vm.value,callback:function($$v){_vm.value=$$v},expression:"value"}})],1)])])])],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());panel.plugin("medienbaecker/tiptap",{fields:{tiptap:Je}});})();